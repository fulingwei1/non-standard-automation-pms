# PM介入策略 - 智能判断与提醒系统

## 📋 策略定义（符哥2026-02-15确认）

### 1️⃣ 高风险项目 → 提前介入（技术评审/需求调研阶段）

**判断条件**（满足 ≥2个 即为高风险）：
- ✅ **大项目**：合同金额 ≥ 100万
- ✅ **以前没做过**：该项目类型首次承接
- ✅ **有失败经验**：相似项目有过失败案例
- ✅ **经验不足**：相似项目数量 < 3个
- ✅ **无标准方案**：无成熟方案模板
- ✅ **技术创新**：需要新技术研发或技术创新

**PM介入时机**：售前阶段
- 技术方案评审会
- 客户需求调研
- 成本核算审核

**目的**：
- 提前识别技术风险
- 避免承诺无法交付
- 确保成本和工期估算准确

---

### 2️⃣ 成熟项目 → 签约后介入

**判断条件**（同时满足）：
- ✅ **标准化项目**：有成熟方案模板
- ✅ **小金额**：合同金额 < 100万
- ✅ **有经验**：过去3年内做过 ≥3个类似项目
- ✅ **低风险**：技术难度评级 ≤ 3星

**PM介入时机**：合同签订后
- 项目启动会
- 团队组建
- 详细计划制定

**目的**：
- 节约PM资源
- 避免过早介入浪费

---

### 3️⃣ PM分配规则

**分配职责**：PMO负责人（项目经理部负责人）

**分配依据**：
1. PM当前负载（在手项目数量和总金额）
2. PM专业领域匹配度（行业经验、设备类型）
3. PM级别匹配项目规模
   - 初级PM：<50万项目
   - 中级PM：50-200万项目
   - 高级PM：>200万项目或高风险项目

---

## 🤖 AI自动判断逻辑

### 输入数据
```json
{
  "项目金额": 150,  // 万元
  "项目类型": "SMT贴片生产线",
  "行业": "汽车电子",
  "是否首次做": false,  // 以前没做过
  "历史相似项目数": 2,
  "失败项目数": 1,  // 以前有失败经验
  "是否有标准方案": false,
  "技术创新点": ["视觉检测新算法", "多工位协同"]
}
```

### 判断流程
```python
def judge_pm_involvement_timing(project_data):
    """判断PM介入时机（符哥2026-02-15确认规则）"""
    
    # 高风险因素计数
    high_risk_factors = 0
    reasons = []
    
    # 1. 大项目（≥100万）
    if project_data['项目金额'] >= 100:
        high_risk_factors += 1
        reasons.append(f"大型项目（{project_data['项目金额']}万）")
    
    # 2. 技术难度高（以前没做过）
    if project_data['是否首次做']:
        high_risk_factors += 1
        reasons.append("以前没做过该类型项目")
    
    # 3. 技术难度高（有失败经验）
    if project_data.get('失败项目数', 0) > 0:
        high_risk_factors += 1
        reasons.append(f"相似项目有失败经验（{project_data['失败项目数']}次）")
    
    # 4. 缺少经验（<3个相似项目）
    if project_data['历史相似项目数'] < 3:
        high_risk_factors += 1
        reasons.append(f"相似项目经验不足（仅{project_data['历史相似项目数']}个）")
    
    # 5. 无标准方案
    if not project_data['是否有标准方案']:
        high_risk_factors += 1
        reasons.append("无标准化方案模板")
    
    # 6. 技术创新
    if project_data['技术创新点'] and len(project_data['技术创新点']) > 0:
        high_risk_factors += 1
        reasons.append(f"涉及技术创新（{len(project_data['技术创新点'])}项）")
    
    # 判断结果（≥2个风险因素就提前介入）
    if high_risk_factors >= 2:
        return {
            "建议": "PM提前介入",
            "介入阶段": "技术评审/需求调研阶段",
            "风险等级": "高",
            "风险因素数": high_risk_factors,
            "原因": reasons,
            "下一步行动": [
                "1. 立即通知PMO负责人安排PM",
                "2. 组织技术评审会（邀请PM参加）",
                "3. PM参与客户需求调研",
                "4. PM审核成本和工期估算"
            ]
        }
    else:
        return {
            "建议": "PM签约后介入",
            "介入阶段": "合同签订后",
            "风险等级": "低",
            "风险因素数": high_risk_factors,
            "原因": reasons if reasons else ["成熟项目，风险可控"],
            "下一步行动": [
                "1. 售前完成方案设计和报价",
                "2. 签约后通知PMO安排PM",
                "3. PM组织项目启动会"
            ]
        }
```

### 输出示例（高风险项目）
```json
{
  "建议": "PM提前介入",
  "介入阶段": "技术评审/需求调研阶段",
  "风险等级": "高",
  "风险因素数": 4,
  "原因": [
    "大型项目（150万）",
    "相似项目有失败经验（1次）",
    "相似项目经验不足（仅2个）",
    "涉及技术创新（2项）"
  ],
  "下一步行动": [
    "1. 立即通知PMO负责人安排PM",
    "2. 组织技术评审会（邀请PM参加）",
    "3. PM参与客户需求调研",
    "4. PM审核成本和工期估算"
  ]
}
```

### 输出示例（低风险项目）
```json
{
  "建议": "PM签约后介入",
  "介入阶段": "合同签订后",
  "风险等级": "低",
  "风险因素数": 1,
  "原因": [
    "相似项目经验不足（仅2个）"
  ],
  "下一步行动": [
    "1. 售前完成方案设计和报价",
    "2. 签约后通知PMO安排PM",
    "3. PM组织项目启动会"
  ]
}
```

---

## 📲 系统提醒机制

### 触发点1：售前创建工单时
```
系统自动评估 → 弹窗提示
-----------------------------------
⚠️ 该项目建议PM提前介入

项目：SMT贴片生产线（汽车电子）
金额：150万

风险因素（4个）：
✗ 大型项目（150万）
✗ 相似项目有失败经验（1次）
✗ 相似项目经验不足（仅2个）
✗ 涉及技术创新（2项）

建议操作：
☑️ 通知PMO负责人安排PM
☑️ 组织技术评审会
☑️ PM参与需求调研
☑️ PM审核成本和工期

[确认已通知PMO]  [稍后处理]
```

### 触发点2：方案设计完成时
```
系统二次确认 → 企业微信/钉钉通知
-----------------------------------
@售前工程师张三
@PMO负责人李四

项目【SMT贴片生产线】方案已完成
建议在技术评审会邀请PM参与

点击查看详情 >
```

### 触发点3：报价前
```
系统最后检查 → 阻断式提醒
-----------------------------------
❌ 该项目需PM审核后才能报价

项目：SMT贴片生产线
建议PM介入：是
PM是否已审核：否

请先完成以下步骤：
1. 通知PMO安排PM
2. 组织技术评审会
3. PM审核成本和工期
4. PM签字确认

[我已完成]  [返回修改]
```

---

## 📊 数据统计与优化

### 追踪指标
```sql
-- PM介入时机与项目成功率相关性分析
SELECT 
    pm_involvement_timing,
    COUNT(*) as 项目总数,
    SUM(CASE WHEN 项目状态='验收通过' THEN 1 ELSE 0 END) as 成功项目数,
    ROUND(SUM(CASE WHEN 项目状态='验收通过' THEN 1 ELSE 0 END) * 100.0 / COUNT(*), 2) as 成功率,
    AVG(毛利率) as 平均毛利率,
    AVG(工期偏差天数) as 平均工期偏差
FROM projects
GROUP BY pm_involvement_timing;
```

**预期结果**：
- 高风险项目提前介入 → 成功率更高、工期偏差更小
- 低风险项目按时介入 → 资源利用率更高

---

## 🎯 实施步骤

### Phase 1：规则配置（1天）
- ✅ 在系统中配置判断规则
- ✅ 定义风险因素阈值
- ✅ 设置提醒模板

### Phase 2：集成到售前流程（2天）
- ✅ 工单创建时自动评估
- ✅ 方案完成时二次提醒
- ✅ 报价前强制检查

### Phase 3：PMO对接（1天）
- ✅ 企业微信/钉钉通知集成
- ✅ PMO负责人接收提醒
- ✅ PM确认机制

### Phase 4：数据追踪（持续）
- ✅ 记录每个项目的PM介入时机
- ✅ 分析PM介入与成功率相关性
- ✅ 持续优化判断规则

---

## 💡 预期效果

1. **避免风险**：高风险项目100%提前介入，避免售前承诺无法交付
2. **提高效率**：低风险项目PM不过早介入，节约30%+PM资源
3. **决策透明**：AI自动判断，消除人为主观因素
4. **持续优化**：基于数据反馈，动态调整规则

---

## ✅ 已确认参数（符哥2026-02-15确认）

1. **大项目金额阈值**：≥ 100万 ✅
2. **技术难度高风险标准**：
   - ✅ 以前没做过的项目类型
   - ✅ 以前有失败过的相似项目经验
3. **相似项目数量阈值**：< 3个 ✅
4. **风险因素触发数**：≥ 2个就提前介入 ✅

---

**文档创建时间**：2026-02-15  
**策略来源**：符哥确认的PM介入策略  
**系统模块**：售前AI增强系统 + 项目管理系统

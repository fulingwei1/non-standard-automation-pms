# 售前技术支持管理模块设计

## 一、售前技术支持在项目中的角色定位

### 1.1 角色定义

售前技术支持（Pre-sales Technical Support）是连接**销售团队**与**技术研发团队**的桥梁，在非标自动化测试设备行业中扮演着至关重要的角色。

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        售前技术支持的角色定位                            │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│     客户需求                                                            │
│        ↓                                                                │
│   ┌─────────┐      ┌─────────────────┐      ┌─────────────┐            │
│   │  销售   │ ←──→ │  售前技术支持   │ ←──→ │  研发团队   │            │
│   │         │      │                 │      │             │            │
│   │ • 商务谈判│      │ • 需求分析      │      │ • 技术评估  │            │
│   │ • 客户关系│      │ • 方案设计      │      │ • 可行性验证│            │
│   │ • 合同签订│      │ • 技术答疑      │      │ • 成本估算  │            │
│   └─────────┘      │ • 现场支持      │      └─────────────┘            │
│        ↑           │ • 投标支持      │             ↑                   │
│        │           └─────────────────┘             │                   │
│        │                    ↓                      │                   │
│        │           ┌─────────────────┐             │                   │
│        └───────────│   项目成功落地   │─────────────┘                   │
│                    └─────────────────┘                                 │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 1.2 核心职责

| 职责领域 | 具体工作 | 价值体现 |
|---------|---------|---------|
| **需求转化** | 将客户模糊需求转化为技术规格 | 确保项目可行性 |
| **方案设计** | 设计技术方案、绘制方案图 | 展示公司技术实力 |
| **技术答疑** | 解答客户技术疑问、消除顾虑 | 建立技术信任 |
| **成本预估** | 配合财务进行项目成本估算 | 支撑报价决策 |
| **投标支持** | 编写技术标书、参与技术答辩 | 提高中标率 |
| **风险识别** | 识别技术风险、评估项目难度 | 规避项目风险 |
| **知识沉淀** | 积累行业方案、形成方案库 | 提升响应效率 |

### 1.3 在项目生命周期中的位置

```
项目生命周期：

商机阶段        投标阶段        签约阶段        执行阶段        交付阶段
   │              │              │              │              │
   ▼              ▼              ▼              ▼              ▼
┌──────┐      ┌──────┐      ┌──────┐      ┌──────┐      ┌──────┐
│ 线索 │ ──→ │ 投标 │ ──→ │ 签约 │ ──→ │ 研发 │ ──→ │ 交付 │
│ 跟进 │      │ 竞标 │      │ 立项 │      │ 生产 │      │ 验收 │
└──────┘      └──────┘      └──────┘      └──────┘      └──────┘
   │              │              │              │              │
   │◄─────────────┼──────────────┤              │              │
   │    售前技术支持核心工作区间   │              │              │
   │                             │              │              │
   └─────────────────────────────┼──────────────┤              │
                                 │   技术交底    │              │
                                 │   需求澄清    │              │
```

---

## 二、销售与售前技术支持的交互流程

### 2.1 交互场景矩阵

| 场景 | 销售发起 | 售前响应 | 输出物 | 时效要求 |
|------|---------|---------|--------|---------|
| **技术咨询** | 客户技术问题 | 专业解答 | 答复邮件/文档 | 4小时内 |
| **需求调研** | 客户拜访邀约 | 现场调研 | 需求调研报告 | 约定时间 |
| **方案设计** | 方案设计申请 | 方案编制 | 技术方案书 | 3-5工作日 |
| **报价支持** | 报价申请 | 成本估算 | BOM清单/工时估算 | 2工作日 |
| **投标支持** | 投标通知 | 技术标编写 | 技术标书 | 按标书要求 |
| **技术交流** | 客户技术交流 | 技术演示/答疑 | 会议纪要 | 约定时间 |
| **现场勘查** | 勘查申请 | 现场测量/评估 | 勘查报告 | 约定时间 |

### 2.2 标准交互流程

```
┌─────────────────────────────────────────────────────────────────────────┐
│                     销售与售前技术支持交互流程                           │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  销售                         系统                        售前技术      │
│   │                            │                            │          │
│   │  1.提交支持申请            │                            │          │
│   │ ─────────────────────────→│                            │          │
│   │  (客户/项目/需求/紧急度)   │  2.智能分配/通知           │          │
│   │                            │ ──────────────────────────→│          │
│   │                            │                            │          │
│   │                            │  3.接单确认(预计完成时间)   │          │
│   │  4.接收确认通知            │←─────────────────────────── │          │
│   │←────────────────────────── │                            │          │
│   │                            │                            │          │
│   │                            │                            │ 5.执行   │
│   │                            │                            │ 工作     │
│   │                            │  6.进度更新                │          │
│   │  7.查看进度                │←─────────────────────────── │          │
│   │←────────────────────────── │                            │          │
│   │                            │                            │          │
│   │                            │  8.提交交付物              │          │
│   │  9.交付物通知              │←─────────────────────────── │          │
│   │←────────────────────────── │                            │          │
│   │                            │                            │          │
│   │  10.确认/反馈              │                            │          │
│   │ ─────────────────────────→│  11.评价记录               │          │
│   │                            │ ──────────────────────────→│          │
│   │                            │                            │          │
│   ▼                            ▼                            ▼          │
└─────────────────────────────────────────────────────────────────────────┘
```

### 2.3 支持申请分类与响应时效

| 申请类型 | 紧急程度 | 响应时效 | 完成时效 | 审批流程 |
|---------|---------|---------|---------|---------|
| **技术咨询** | 普通 | 2小时 | 4小时 | 无需审批 |
| **技术咨询** | 紧急 | 30分钟 | 2小时 | 无需审批 |
| **方案设计** | 普通 | 4小时 | 5工作日 | 主管审批 |
| **方案设计** | 紧急 | 2小时 | 3工作日 | 主管审批 |
| **现场支持** | 普通 | 4小时 | 约定 | 主管审批 |
| **现场支持** | 紧急 | 1小时 | 约定 | 经理审批 |
| **投标支持** | 标准 | 2小时 | 按标期 | 经理审批 |

---

## 三、售前技术支持在系统中的工作内容

### 3.1 工作任务分类

```
售前技术支持工作分类
├── 📋 支持任务（来自销售申请）
│   ├── 技术咨询答复
│   ├── 需求调研
│   ├── 方案设计
│   ├── 报价支持
│   ├── 投标支持
│   ├── 技术交流
│   └── 现场勘查
│
├── 📁 项目跟踪（关联商机/项目）
│   ├── 商机技术评估
│   ├── 项目可行性分析
│   ├── 技术风险评估
│   └── 竞争对手分析
│
├── 📚 知识管理
│   ├── 方案模板维护
│   ├── 技术文档整理
│   ├── 案例库维护
│   └── FAQ知识库
│
└── 📊 工作统计
    ├── 支持工作量统计
    ├── 响应时效统计
    ├── 方案转化率
    └── 客户满意度
```

### 3.2 系统功能模块

#### 模块一：支持工单管理

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          支持工单管理                                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │ 工单看板                                                         │   │
│  ├─────────┬─────────┬─────────┬─────────┬─────────┐               │   │
│  │ 待接单  │ 进行中  │ 待审核  │ 已完成  │ 已关闭  │               │   │
│  │   (3)   │   (5)   │   (2)   │  (15)   │  (28)   │               │   │
│  ├─────────┼─────────┼─────────┼─────────┼─────────┤               │   │
│  │┌───────┐│┌───────┐│┌───────┐│         │         │               │   │
│  ││ 🔴紧急││ │ 方案  ││ │ 投标  ││         │         │               │   │
│  ││XX客户 ││ │ 设计  ││ │ 文件  ││         │         │               │   │
│  ││技术咨询││ │ 60%  ││ │ 待审  ││         │         │               │   │
│  │└───────┘│└───────┘│└───────┘│         │         │               │   │
│  │┌───────┐│┌───────┐│         │         │         │               │   │
│  ││ 方案  ││ │ 现场  ││         │         │         │               │   │
│  ││ 设计  ││ │ 勘查  ││         │         │         │               │   │
│  │└───────┘│└───────┘│         │         │         │               │   │
│  └─────────┴─────────┴─────────┴─────────┴─────────┘               │   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

#### 模块二：方案设计工作台

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          方案设计工作台                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  项目：XX汽车零部件自动化测试设备         客户：XX汽车科技              │
│  销售：张三                               预算：80-100万                │
│                                                                         │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │ 需求信息                                                          │  │
│  ├──────────────────────────────────────────────────────────────────┤  │
│  │ 测试对象：汽车传感器模块                                          │  │
│  │ 测试项目：功能测试、耐久测试、环境测试                            │  │
│  │ 产能需求：1200件/天                                               │  │
│  │ 节拍要求：30秒/件                                                 │  │
│  │ 特殊要求：需要对接客户MES系统                                     │  │
│  └──────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │ 方案编制                                                          │  │
│  ├──────────────────────────────────────────────────────────────────┤  │
│  │ [从模板创建▼]  [上传附件]  [在线编辑]  [预览]  [提交审核]        │  │
│  │                                                                    │  │
│  │ 📄 XX汽车传感器测试设备技术方案V1.0.docx        [编辑] [删除]    │  │
│  │ 📊 设备布局图.dwg                                [预览] [删除]    │  │
│  │ 📈 BOM清单初稿.xlsx                              [编辑] [删除]    │  │
│  └──────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│  ┌──────────────────────────────────────────────────────────────────┐  │
│  │ 成本估算                                                          │  │
│  ├───────────────┬────────────┬────────────┬────────────────────────┤  │
│  │ 项目          │ 预估金额   │ 占比       │ 备注                   │  │
│  ├───────────────┼────────────┼────────────┼────────────────────────┤  │
│  │ 机械部分      │ 25万       │ 31%        │ 含非标件加工           │  │
│  │ 电气部分      │ 18万       │ 22%        │ PLC+伺服+传感器        │  │
│  │ 软件部分      │ 12万       │ 15%        │ 上位机+MES对接         │  │
│  │ 标准件/外购件 │ 15万       │ 19%        │ 气缸/导轨/电机等       │  │
│  │ 人工成本      │ 8万        │ 10%        │ 预计工时800h           │  │
│  │ 其他费用      │ 2万        │ 3%         │ 运输/安装/调试         │  │
│  ├───────────────┼────────────┼────────────┼────────────────────────┤  │
│  │ 合计          │ 80万       │ 100%       │ 建议报价95-100万       │  │
│  └───────────────┴────────────┴────────────┴────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

#### 模块三：方案库/知识库

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           方案库管理                                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  🔍 搜索方案  [________________] [搜索]    [+ 新建方案] [导入]          │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │ 分类筛选                                                         │   │
│  │ [全部] [功能测试] [性能测试] [环境测试] [寿命测试] [综合测试]    │   │
│  │ [汽车行业] [3C电子] [医疗器械] [新能源] [其他]                   │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  ┌─────────┬──────────────────────────────────────────┬─────┬─────┐   │
│  │ 方案编号 │ 方案名称                                 │ 行业 │ 引用 │   │
│  ├─────────┼──────────────────────────────────────────┼─────┼─────┤   │
│  │ FA-001  │ 汽车传感器综合测试设备通用方案           │ 汽车 │ 23  │   │
│  │ FA-002  │ 新能源电池包气密性检测设备方案           │ 新能源│ 18  │   │
│  │ FA-003  │ 手机摄像头模组自动化测试方案             │ 3C   │ 15  │   │
│  │ FA-004  │ 医疗输液泵耐久性测试设备方案             │ 医疗 │ 8   │   │
│  │ FA-005  │ 连接器插拔寿命测试机方案                 │ 通用 │ 12  │   │
│  └─────────┴──────────────────────────────────────────┴─────┴─────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 四、数据库设计

### 4.1 核心表结构

```sql
-- =====================================================
-- 售前技术支持模块数据库设计
-- =====================================================

-- 1. 支持工单表
CREATE TABLE presale_support_ticket (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    ticket_no VARCHAR(32) NOT NULL COMMENT '工单编号',
    
    -- 申请信息
    title VARCHAR(200) NOT NULL COMMENT '工单标题',
    ticket_type ENUM('consult', 'survey', 'solution', 'quotation', 'tender', 'meeting', 'site_visit') 
        NOT NULL COMMENT '工单类型：咨询/调研/方案/报价/投标/交流/勘查',
    urgency ENUM('normal', 'urgent', 'very_urgent') DEFAULT 'normal' COMMENT '紧急程度',
    description TEXT COMMENT '详细描述',
    
    -- 关联信息
    customer_id BIGINT COMMENT '客户ID',
    customer_name VARCHAR(100) COMMENT '客户名称',
    opportunity_id BIGINT COMMENT '关联商机ID',
    project_id BIGINT COMMENT '关联项目ID',
    
    -- 申请人信息
    applicant_id BIGINT NOT NULL COMMENT '申请人ID(销售)',
    applicant_name VARCHAR(50) COMMENT '申请人姓名',
    applicant_dept VARCHAR(100) COMMENT '申请人部门',
    apply_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '申请时间',
    
    -- 处理人信息
    assignee_id BIGINT COMMENT '指派处理人ID',
    assignee_name VARCHAR(50) COMMENT '处理人姓名',
    accept_time DATETIME COMMENT '接单时间',
    
    -- 时间要求
    expected_date DATE COMMENT '期望完成日期',
    deadline DATETIME COMMENT '截止时间',
    
    -- 状态
    status ENUM('pending', 'accepted', 'processing', 'review', 'completed', 'closed', 'cancelled') 
        DEFAULT 'pending' COMMENT '状态',
    
    -- 完成信息
    complete_time DATETIME COMMENT '完成时间',
    actual_hours DECIMAL(10,2) COMMENT '实际工时',
    
    -- 评价
    satisfaction_score INT COMMENT '满意度评分(1-5)',
    feedback TEXT COMMENT '反馈意见',
    
    -- 系统字段
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT,
    
    INDEX idx_ticket_no (ticket_no),
    INDEX idx_status (status),
    INDEX idx_applicant (applicant_id),
    INDEX idx_assignee (assignee_id),
    INDEX idx_customer (customer_id),
    INDEX idx_opportunity (opportunity_id)
) COMMENT '售前支持工单表';


-- 2. 工单交付物表
CREATE TABLE presale_ticket_deliverable (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    ticket_id BIGINT NOT NULL COMMENT '工单ID',
    
    -- 交付物信息
    name VARCHAR(200) NOT NULL COMMENT '文件名称',
    file_type VARCHAR(50) COMMENT '文件类型',
    file_path VARCHAR(500) COMMENT '文件路径',
    file_size BIGINT COMMENT '文件大小(bytes)',
    version VARCHAR(20) DEFAULT 'V1.0' COMMENT '版本号',
    
    -- 状态
    status ENUM('draft', 'submitted', 'approved', 'rejected') DEFAULT 'draft' COMMENT '状态',
    
    -- 审核信息
    reviewer_id BIGINT COMMENT '审核人ID',
    review_time DATETIME COMMENT '审核时间',
    review_comment TEXT COMMENT '审核意见',
    
    -- 系统字段
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    created_by BIGINT,
    
    INDEX idx_ticket (ticket_id)
) COMMENT '工单交付物表';


-- 3. 工单进度记录表
CREATE TABLE presale_ticket_progress (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    ticket_id BIGINT NOT NULL COMMENT '工单ID',
    
    -- 进度信息
    progress_type ENUM('status_change', 'progress_update', 'comment', 'file_upload') 
        NOT NULL COMMENT '进度类型',
    content TEXT COMMENT '进度内容',
    progress_percent INT COMMENT '进度百分比',
    
    -- 操作人
    operator_id BIGINT NOT NULL,
    operator_name VARCHAR(50),
    
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_ticket (ticket_id)
) COMMENT '工单进度记录表';


-- 4. 技术方案表
CREATE TABLE presale_solution (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    solution_no VARCHAR(32) NOT NULL COMMENT '方案编号',
    
    -- 方案信息
    name VARCHAR(200) NOT NULL COMMENT '方案名称',
    solution_type ENUM('standard', 'custom') DEFAULT 'custom' COMMENT '方案类型：标准/定制',
    industry VARCHAR(50) COMMENT '所属行业',
    test_type VARCHAR(100) COMMENT '测试类型',
    
    -- 关联信息
    ticket_id BIGINT COMMENT '关联工单ID',
    customer_id BIGINT COMMENT '客户ID',
    opportunity_id BIGINT COMMENT '商机ID',
    
    -- 方案内容
    requirement_summary TEXT COMMENT '需求概述',
    solution_overview TEXT COMMENT '方案概述',
    technical_spec TEXT COMMENT '技术规格',
    
    -- 成本估算
    estimated_cost DECIMAL(12,2) COMMENT '预估成本',
    suggested_price DECIMAL(12,2) COMMENT '建议报价',
    cost_breakdown JSON COMMENT '成本明细(JSON)',
    
    -- 工时估算
    estimated_hours INT COMMENT '预估工时(小时)',
    estimated_duration INT COMMENT '预估周期(天)',
    
    -- 状态
    status ENUM('draft', 'review', 'approved', 'delivered', 'won', 'lost') 
        DEFAULT 'draft' COMMENT '状态',
    
    -- 版本控制
    version VARCHAR(20) DEFAULT 'V1.0' COMMENT '版本',
    parent_id BIGINT COMMENT '父版本ID',
    
    -- 审核
    reviewer_id BIGINT COMMENT '审核人',
    review_time DATETIME COMMENT '审核时间',
    review_status ENUM('pending', 'approved', 'rejected') COMMENT '审核状态',
    review_comment TEXT COMMENT '审核意见',
    
    -- 编制人
    author_id BIGINT NOT NULL COMMENT '编制人ID',
    author_name VARCHAR(50) COMMENT '编制人姓名',
    
    -- 系统字段
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_solution_no (solution_no),
    INDEX idx_ticket (ticket_id),
    INDEX idx_customer (customer_id),
    INDEX idx_industry (industry)
) COMMENT '技术方案表';


-- 5. 方案成本明细表
CREATE TABLE presale_solution_cost (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    solution_id BIGINT NOT NULL COMMENT '方案ID',
    
    -- 成本项
    category VARCHAR(50) NOT NULL COMMENT '成本类别',
    item_name VARCHAR(200) NOT NULL COMMENT '项目名称',
    specification VARCHAR(200) COMMENT '规格型号',
    unit VARCHAR(20) COMMENT '单位',
    quantity DECIMAL(10,2) COMMENT '数量',
    unit_price DECIMAL(12,2) COMMENT '单价',
    amount DECIMAL(12,2) COMMENT '金额',
    
    -- 备注
    remark VARCHAR(500) COMMENT '备注',
    
    -- 排序
    sort_order INT DEFAULT 0,
    
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_solution (solution_id)
) COMMENT '方案成本明细表';


-- 6. 方案模板库
CREATE TABLE presale_solution_template (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    template_no VARCHAR(32) NOT NULL COMMENT '模板编号',
    
    -- 模板信息
    name VARCHAR(200) NOT NULL COMMENT '模板名称',
    industry VARCHAR(50) COMMENT '适用行业',
    test_type VARCHAR(100) COMMENT '测试类型',
    description TEXT COMMENT '模板描述',
    
    -- 模板内容
    content_template TEXT COMMENT '内容模板',
    cost_template JSON COMMENT '成本模板',
    
    -- 附件
    attachments JSON COMMENT '附件列表',
    
    -- 使用统计
    use_count INT DEFAULT 0 COMMENT '使用次数',
    
    -- 状态
    is_active BOOLEAN DEFAULT TRUE COMMENT '是否启用',
    
    -- 系统字段
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT,
    
    INDEX idx_template_no (template_no),
    INDEX idx_industry (industry)
) COMMENT '方案模板库';


-- 7. 售前人员工作负荷表
CREATE TABLE presale_workload (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL COMMENT '人员ID',
    stat_date DATE NOT NULL COMMENT '统计日期',
    
    -- 工单统计
    pending_tickets INT DEFAULT 0 COMMENT '待处理工单数',
    processing_tickets INT DEFAULT 0 COMMENT '进行中工单数',
    completed_tickets INT DEFAULT 0 COMMENT '已完成工单数',
    
    -- 工时统计
    planned_hours DECIMAL(10,2) DEFAULT 0 COMMENT '计划工时',
    actual_hours DECIMAL(10,2) DEFAULT 0 COMMENT '实际工时',
    
    -- 方案统计
    solutions_count INT DEFAULT 0 COMMENT '方案数量',
    
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    
    UNIQUE KEY uk_user_date (user_id, stat_date),
    INDEX idx_stat_date (stat_date)
) COMMENT '售前人员工作负荷表';


-- 8. 客户技术档案表
CREATE TABLE presale_customer_tech_profile (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    customer_id BIGINT NOT NULL COMMENT '客户ID',
    
    -- 基本信息
    industry VARCHAR(50) COMMENT '所属行业',
    business_scope TEXT COMMENT '业务范围',
    
    -- 技术需求特点
    common_test_types VARCHAR(500) COMMENT '常见测试类型',
    technical_requirements TEXT COMMENT '技术要求特点',
    quality_standards VARCHAR(500) COMMENT '质量标准要求',
    
    -- 设备现状
    existing_equipment TEXT COMMENT '现有设备情况',
    it_infrastructure TEXT COMMENT 'IT基础设施',
    mes_system VARCHAR(100) COMMENT 'MES系统类型',
    
    -- 合作历史
    cooperation_history TEXT COMMENT '合作历史',
    success_cases TEXT COMMENT '成功案例',
    
    -- 关键联系人
    technical_contacts JSON COMMENT '技术联系人',
    
    -- 备注
    notes TEXT COMMENT '备注',
    
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY uk_customer (customer_id)
) COMMENT '客户技术档案表';


-- 9. 投标记录表
CREATE TABLE presale_tender_record (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    ticket_id BIGINT COMMENT '关联工单ID',
    opportunity_id BIGINT COMMENT '关联商机ID',
    
    -- 投标信息
    tender_no VARCHAR(50) COMMENT '招标编号',
    tender_name VARCHAR(200) NOT NULL COMMENT '项目名称',
    customer_name VARCHAR(100) COMMENT '招标单位',
    
    -- 时间节点
    publish_date DATE COMMENT '发布日期',
    deadline DATETIME COMMENT '投标截止时间',
    bid_opening_date DATE COMMENT '开标日期',
    
    -- 投标要求
    budget_amount DECIMAL(14,2) COMMENT '预算金额',
    qualification_requirements TEXT COMMENT '资质要求',
    technical_requirements TEXT COMMENT '技术要求',
    
    -- 我方投标
    our_bid_amount DECIMAL(14,2) COMMENT '我方报价',
    technical_score DECIMAL(5,2) COMMENT '技术得分',
    commercial_score DECIMAL(5,2) COMMENT '商务得分',
    total_score DECIMAL(5,2) COMMENT '总得分',
    
    -- 竞争对手
    competitors JSON COMMENT '竞争对手信息',
    
    -- 结果
    result ENUM('pending', 'won', 'lost', 'cancelled') DEFAULT 'pending' COMMENT '结果',
    result_reason TEXT COMMENT '中标/落标原因分析',
    
    -- 负责人
    leader_id BIGINT COMMENT '投标负责人',
    team_members JSON COMMENT '投标团队',
    
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_opportunity (opportunity_id),
    INDEX idx_result (result)
) COMMENT '投标记录表';
```

---

## 五、系统功能设计

### 5.1 功能模块架构

```
售前技术支持管理系统
├── 📊 工作台（Dashboard）
│   ├── 待办事项
│   ├── 工单统计
│   ├── 响应时效
│   └── 本月业绩
│
├── 📋 支持工单管理
│   ├── 工单列表（销售视角/售前视角）
│   ├── 新建工单（销售）
│   ├── 工单处理（售前）
│   ├── 工单看板
│   └── 工单统计报表
│
├── 📝 方案管理
│   ├── 方案列表
│   ├── 方案编制
│   ├── 方案审核
│   ├── 方案版本管理
│   └── 成本估算
│
├── 📚 方案库
│   ├── 模板管理
│   ├── 案例库
│   ├── 技术文档
│   └── FAQ知识库
│
├── 🏢 客户技术档案
│   ├── 档案列表
│   ├── 档案维护
│   └── 合作历史
│
├── 📊 投标管理
│   ├── 投标项目
│   ├── 技术标编写
│   ├── 投标跟踪
│   └── 中标分析
│
├── 📈 统计分析
│   ├── 工作量统计
│   ├── 响应时效分析
│   ├── 方案转化率
│   ├── 客户满意度
│   └── 人员绩效
│
└── ⚙️ 系统设置
    ├── 工单类型配置
    ├── 时效规则配置
    ├── 审批流程配置
    └── 通知模板配置
```

### 5.2 角色权限设计

| 功能 | 销售 | 售前工程师 | 售前主管 | 售前经理 |
|------|------|-----------|---------|---------|
| 提交支持申请 | ✓ | - | - | - |
| 查看自己的工单 | ✓ | ✓ | ✓ | ✓ |
| 查看所有工单 | - | - | ✓ | ✓ |
| 处理工单 | - | ✓ | ✓ | ✓ |
| 分配工单 | - | - | ✓ | ✓ |
| 编制方案 | - | ✓ | ✓ | ✓ |
| 审核方案 | - | - | ✓ | ✓ |
| 管理方案库 | - | ✓ | ✓ | ✓ |
| 查看统计报表 | 部分 | 个人 | 团队 | 全部 |
| 系统设置 | - | - | - | ✓ |

### 5.3 工作流程设计

#### 支持工单处理流程

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         支持工单处理流程                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────┐                                                            │
│  │ 销售提交 │                                                            │
│  │ 支持申请 │                                                            │
│  └────┬────┘                                                            │
│       ↓                                                                 │
│  ┌─────────┐     ┌─────────┐                                           │
│  │ 系统自动 │ ──→ │ 售前主管 │  (复杂/紧急工单)                          │
│  │ 分配    │     │ 人工分配 │                                           │
│  └────┬────┘     └────┬────┘                                           │
│       └───────┬───────┘                                                 │
│               ↓                                                         │
│  ┌─────────────────────────────────────────────────────────────┐       │
│  │                    售前工程师处理                            │       │
│  │  ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐    │       │
│  │  │ 接单确认 │ → │ 了解需求 │ → │ 执行工作 │ → │ 提交成果 │    │       │
│  │  └─────────┘   └─────────┘   └─────────┘   └─────────┘    │       │
│  └─────────────────────────────────────────────────────────────┘       │
│               ↓                                                         │
│        ┌──────┴──────┐                                                  │
│        ↓             ↓                                                  │
│  ┌─────────┐   ┌─────────┐                                             │
│  │ 需要审核 │   │ 无需审核 │                                             │
│  └────┬────┘   └────┬────┘                                             │
│       ↓             │                                                   │
│  ┌─────────┐        │                                                   │
│  │ 主管审核 │        │                                                   │
│  └────┬────┘        │                                                   │
│       │             │                                                   │
│  ┌────┴────┐        │                                                   │
│  ↓         ↓        │                                                   │
│ 通过     驳回       │                                                   │
│  │       (返回修改)  │                                                   │
│  └────────┬─────────┘                                                   │
│           ↓                                                             │
│  ┌─────────────────────────────────────────────────────────────┐       │
│  │                    交付给销售                                │       │
│  │  ┌─────────┐   ┌─────────┐   ┌─────────┐                   │       │
│  │  │ 销售确认 │ → │ 满意度  │ → │ 工单关闭 │                   │       │
│  │  │ 接收    │   │ 评价    │   │         │                   │       │
│  │  └─────────┘   └─────────┘   └─────────┘                   │       │
│  └─────────────────────────────────────────────────────────────┘       │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 六、关键业务场景

### 6.1 场景一：技术咨询

```
场景描述：销售在客户现场遇到技术问题，需要售前技术支持

流程：
1. 销售通过手机APP/企业微信提交「技术咨询」工单
2. 系统自动通知值班售前工程师
3. 售前工程师30分钟内响应（紧急）/2小时内响应（普通）
4. 通过电话/在线解答技术问题
5. 将解答内容记录到工单
6. 销售确认问题解决，关闭工单
```

### 6.2 场景二：方案设计

```
场景描述：客户有明确的设备需求，需要出具技术方案和报价

流程：
1. 销售提交「方案设计」申请，附上需求信息
2. 售前主管评估后分配给合适的售前工程师
3. 售前工程师：
   - 分析客户需求
   - 从方案库选择相似模板
   - 定制化编写技术方案
   - 进行成本估算
   - 绘制设备布局图
4. 提交主管审核
5. 审核通过后交付给销售
6. 销售提交给客户
7. 跟踪方案反馈，必要时修改完善
```

### 6.3 场景三：投标支持

```
场景描述：客户发布招标公告，需要组织投标

流程：
1. 销售收到招标信息，创建投标记录
2. 申请「投标支持」工单
3. 售前经理组建投标团队
4. 分工协作：
   - 售前工程师：编写技术方案、技术标
   - 销售：商务标、资质文件
   - 财务：成本测算、报价
5. 内部评审技术标
6. 打印装订投标文件
7. 参与开标/技术答辩
8. 记录投标结果和分析
```

---

## 七、报表与统计

### 7.1 售前工作统计看板

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        售前技术支持工作统计                              │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │ 本月工单统计                                          2025年1月   │   │
│  ├─────────┬─────────┬─────────┬─────────┬─────────────────────────┤   │
│  │ 总工单  │ 已完成  │ 进行中  │ 待处理  │ 平均响应时长            │   │
│  │   45    │   32    │    8    │    5    │    1.8 小时             │   │
│  └─────────┴─────────┴─────────┴─────────┴─────────────────────────┘   │
│                                                                         │
│  ┌──────────────────────────────┐ ┌──────────────────────────────┐    │
│  │ 工单类型分布                  │ │ 响应时效达成率               │    │
│  │                              │ │                              │    │
│  │  技术咨询 ████████ 35%       │ │  4小时内响应  95%  ██████████│    │
│  │  方案设计 ██████ 28%         │ │  按时完成    88%  █████████  │    │
│  │  现场支持 ████ 18%           │ │  客户满意度  4.6  ★★★★★     │    │
│  │  投标支持 ███ 12%            │ │                              │    │
│  │  其他     ██ 7%              │ │                              │    │
│  └──────────────────────────────┘ └──────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │ 人员工作量排行                                                   │   │
│  ├──────────┬──────────┬──────────┬──────────┬──────────┬─────────┤   │
│  │ 姓名     │ 工单数   │ 方案数   │ 工时     │ 响应率   │ 满意度  │   │
│  ├──────────┼──────────┼──────────┼──────────┼──────────┼─────────┤   │
│  │ 王工     │ 15       │ 5        │ 120h     │ 98%      │ 4.8     │   │
│  │ 李工     │ 12       │ 4        │ 96h      │ 95%      │ 4.6     │   │
│  │ 张工     │ 10       │ 3        │ 80h      │ 92%      │ 4.5     │   │
│  └──────────┴──────────┴──────────┴──────────┴──────────┴─────────┘   │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │ 方案转化跟踪                                                     │   │
│  ├──────────┬──────────┬──────────┬──────────┬──────────┬─────────┤   │
│  │ 本月方案 │ 已报价   │ 已中标   │ 跟踪中   │ 已丢失   │ 转化率  │   │
│  │ 12       │ 10       │ 4        │ 5        │ 1        │ 40%     │   │
│  └──────────┴──────────┴──────────┴──────────┴──────────┴─────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 7.2 关键指标(KPI)

| 指标 | 计算方式 | 目标值 |
|------|---------|--------|
| **响应及时率** | 按时响应工单数/总工单数 | ≥95% |
| **完成及时率** | 按时完成工单数/总工单数 | ≥90% |
| **方案转化率** | 中标方案数/总方案数 | ≥35% |
| **客户满意度** | 评价分数平均值 | ≥4.5分 |
| **人均工单量** | 月工单数/人数 | 参考值 |
| **方案复用率** | 引用模板方案数/总方案数 | ≥60% |

---

## 八、系统集成

### 8.1 与CRM系统集成

```
┌─────────────┐         ┌─────────────┐
│   CRM系统   │ ←─────→ │ 售前支持系统 │
│             │         │             │
│ • 客户信息  │ ──────→ │ • 客户档案  │
│ • 商机信息  │ ──────→ │ • 工单关联  │
│ • 联系人   │ ──────→ │ • 方案关联  │
│             │         │             │
│ • 商机状态  │ ←────── │ • 方案交付  │
│ • 中标信息  │ ←────── │ • 投标结果  │
└─────────────┘         └─────────────┘
```

### 8.2 与项目管理系统集成

```
签约后项目立项：

售前方案 ──→ 项目立项
   │            │
   │            ↓
   │      ┌─────────────┐
   └────→ │ 技术交底    │
          │ • 需求文档  │
          │ • 技术方案  │
          │ • 成本估算  │
          │ • 客户档案  │
          └─────────────┘
```

### 8.3 与企业微信集成

- 工单提醒推送
- 移动端快速响应
- 即时沟通协作
- 审批流程处理

---

## 九、实施建议

### 9.1 实施阶段

| 阶段 | 内容 | 周期 |
|------|------|------|
| **第一阶段** | 工单管理+方案管理基础功能 | 4周 |
| **第二阶段** | 方案库+知识库+投标管理 | 3周 |
| **第三阶段** | 统计报表+系统集成 | 2周 |
| **第四阶段** | 移动端+企业微信集成 | 2周 |

### 9.2 关键成功因素

1. **销售配合** - 销售愿意通过系统提交申请而非口头沟通
2. **知识沉淀** - 持续积累方案模板和技术文档
3. **数据质量** - 工单信息填写完整准确
4. **流程执行** - 严格按照流程执行，形成习惯
5. **持续优化** - 根据使用反馈持续改进系统

---

## 十、总结

售前技术支持管理模块的核心价值：

1. **提升效率** - 标准化流程，减少沟通成本
2. **知识复用** - 方案模板化，加快响应速度
3. **过程可控** - 全程跟踪，时效可控
4. **数据驱动** - 统计分析，支撑决策
5. **协作顺畅** - 销售与售前无缝协作

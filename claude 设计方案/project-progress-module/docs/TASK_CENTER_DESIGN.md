# ä¸ªäººä»»åŠ¡ä¸­å¿ƒè®¾è®¡æ–¹æ¡ˆ

## ä¸€ã€éœ€æ±‚åˆ†æ

### 1.1 ä»»åŠ¡æ¥æºå…¨æ™¯å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           æˆ‘çš„ä»»åŠ¡ä¸­å¿ƒ                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“‹ å²—ä½èŒè´£  â”‚  â”‚ ğŸ“ é¡¹ç›®ä»»åŠ¡  â”‚  â”‚ ğŸ”„ æµç¨‹å¾…åŠ  â”‚  â”‚ ğŸ“¨ è½¬åŠä»»åŠ¡  â”‚   â”‚
â”‚  â”‚   å®šæœŸä»»åŠ¡   â”‚  â”‚   WBSåˆ†è§£   â”‚  â”‚   å®¡æ‰¹æµè½¬   â”‚  â”‚   åä½œå§”æ‰˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â° é—ç•™ä»»åŠ¡  â”‚  â”‚ ğŸ”” é¢„è­¦ä»»åŠ¡  â”‚  â”‚ ğŸ“ è‡ªå»ºä»»åŠ¡  â”‚  â”‚ ğŸ¯ ä¸´æ—¶æŒ‡æ´¾  â”‚   â”‚
â”‚  â”‚   å†å²æœªå®Œ   â”‚  â”‚   é£é™©è·Ÿè¸ª   â”‚  â”‚   ä¸ªäººå¤‡å¿˜   â”‚  â”‚   é¢†å¯¼å®‰æ’   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ä»»åŠ¡åˆ†ç±»è¯¦è§£

| ä»»åŠ¡ç±»å‹ | æ¥æº | ç‰¹ç‚¹ | ä¸¾ä¾‹ |
|---------|------|------|------|
| **å²—ä½èŒè´£ä»»åŠ¡** | å²—ä½è¯´æ˜ä¹¦ | å‘¨æœŸæ€§ã€å›ºå®šã€å¿…é¡»å®Œæˆ | å‘¨æŠ¥æäº¤ã€æœˆåº¦ç›˜ç‚¹ã€è®¾å¤‡ç»´æŠ¤ |
| **é¡¹ç›®WBSä»»åŠ¡** | é¡¹ç›®åˆ†è§£ | æœ‰æ˜ç¡®äº¤ä»˜ç‰©ã€å…³è”é¡¹ç›® | æœºæ¢°è®¾è®¡ã€ç”µæ°”å›¾çº¸ã€ç¨‹åºç¼–å†™ |
| **æµç¨‹å¾…åŠä»»åŠ¡** | æµç¨‹å¼•æ“ | éœ€å®¡æ‰¹æˆ–å¤„ç†ã€æœ‰æ—¶é™ | å›¾çº¸è¯„å®¡ã€å˜æ›´å®¡æ‰¹ã€é‡‡è´­ç”³è¯· |
| **è½¬åŠåä½œä»»åŠ¡** | åŒäº‹å§”æ‰˜ | ä»–äººè½¬äº¤ã€éœ€åé¦ˆ | å¸®å¿™è°ƒè¯•ã€ååŠ©å‡ºå›¾ã€ä»£ä¸ºæµ‹è¯• |
| **é—ç•™å†å²ä»»åŠ¡** | ç³»ç»Ÿç´¯ç§¯ | æœªå®Œæˆã€éœ€æŒç»­è·Ÿè¿› | ä¸Šå‘¨æœªå®Œã€å†å²é—ç•™é—®é¢˜ |
| **é¢„è­¦è·Ÿè¸ªä»»åŠ¡** | é¢„è­¦ç³»ç»Ÿ | éœ€è¦å¤„ç†çš„é£é™©é¡¹ | è¿›åº¦é¢„è­¦ã€è´¨é‡é—®é¢˜ |
| **ä¸ªäººè‡ªå»ºä»»åŠ¡** | è‡ªå·±åˆ›å»º | å¤‡å¿˜æ€§è´¨ã€çµæ´» | ä¸ªäººæé†’ã€å­¦ä¹ è®¡åˆ’ |
| **ä¸´æ—¶æŒ‡æ´¾ä»»åŠ¡** | é¢†å¯¼å®‰æ’ | ç´§æ€¥ã€ä¼˜å…ˆçº§é«˜ | ä¸´æ—¶ä¼šè®®ã€ç´§æ€¥å¤„ç† |

### 1.3 ä»»åŠ¡çŠ¶æ€æµè½¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¾…æ¥æ”¶  â”‚ â†’ â”‚  è¿›è¡Œä¸­  â”‚ â†’ â”‚  å¾…éªŒæ”¶  â”‚ â†’ â”‚  å·²å®Œæˆ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚              â”‚              â”‚
     â†“              â†“              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å·²æ‹’ç»  â”‚    â”‚  å·²æš‚åœ  â”‚    â”‚  å·²é©³å›  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## äºŒã€æ•°æ®åº“è®¾è®¡

### 2.1 æ ¸å¿ƒè¡¨ç»“æ„

```sql
-- ä»»åŠ¡ä¸»è¡¨ï¼ˆç»Ÿä¸€æ‰€æœ‰ç±»å‹ä»»åŠ¡ï¼‰
CREATE TABLE task_unified (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    task_code VARCHAR(50) UNIQUE NOT NULL COMMENT 'ä»»åŠ¡ç¼–å·',
    
    -- ä»»åŠ¡åŸºæœ¬ä¿¡æ¯
    title VARCHAR(200) NOT NULL COMMENT 'ä»»åŠ¡æ ‡é¢˜',
    description TEXT COMMENT 'ä»»åŠ¡æè¿°',
    task_type ENUM('job_duty', 'project_wbs', 'workflow', 'transfer', 
                   'legacy', 'alert', 'personal', 'assigned') NOT NULL COMMENT 'ä»»åŠ¡ç±»å‹',
    
    -- æ¥æºè¿½æº¯
    source_type VARCHAR(50) COMMENT 'æ¥æºç±»å‹ï¼šproject/workflow/manual/system',
    source_id BIGINT COMMENT 'æ¥æºID',
    source_name VARCHAR(200) COMMENT 'æ¥æºåç§°',
    parent_task_id BIGINT COMMENT 'çˆ¶ä»»åŠ¡IDï¼ˆç”¨äºä»»åŠ¡åˆ†è§£ï¼‰',
    
    -- é¡¹ç›®å…³è”
    project_id BIGINT COMMENT 'å…³è”é¡¹ç›®ID',
    project_code VARCHAR(50) COMMENT 'é¡¹ç›®ç¼–å·',
    project_name VARCHAR(200) COMMENT 'é¡¹ç›®åç§°',
    wbs_code VARCHAR(50) COMMENT 'WBSç¼–ç ',
    
    -- äººå‘˜åˆ†é…
    assignee_id BIGINT NOT NULL COMMENT 'æ‰§è¡ŒäººID',
    assignee_name VARCHAR(50) COMMENT 'æ‰§è¡Œäººå§“å',
    assigner_id BIGINT COMMENT 'æŒ‡æ´¾äººID',
    assigner_name VARCHAR(50) COMMENT 'æŒ‡æ´¾äººå§“å',
    
    -- æ—¶é—´ä¿¡æ¯
    plan_start_date DATE COMMENT 'è®¡åˆ’å¼€å§‹æ—¥æœŸ',
    plan_end_date DATE COMMENT 'è®¡åˆ’ç»“æŸæ—¥æœŸ',
    actual_start_date DATE COMMENT 'å®é™…å¼€å§‹æ—¥æœŸ',
    actual_end_date DATE COMMENT 'å®é™…å®Œæˆæ—¥æœŸ',
    deadline DATETIME COMMENT 'æˆªæ­¢æ—¶é—´',
    
    -- å·¥æ—¶ä¿¡æ¯
    estimated_hours DECIMAL(10,2) COMMENT 'é¢„ä¼°å·¥æ—¶',
    actual_hours DECIMAL(10,2) DEFAULT 0 COMMENT 'å®é™…å·¥æ—¶',
    
    -- çŠ¶æ€ä¸è¿›åº¦
    status ENUM('pending', 'accepted', 'in_progress', 'paused', 
                'submitted', 'approved', 'rejected', 'completed', 'cancelled') 
           DEFAULT 'pending' COMMENT 'çŠ¶æ€',
    progress INT DEFAULT 0 COMMENT 'è¿›åº¦ç™¾åˆ†æ¯”',
    
    -- ä¼˜å…ˆçº§ä¸ç´§æ€¥åº¦
    priority ENUM('urgent', 'high', 'medium', 'low') DEFAULT 'medium' COMMENT 'ä¼˜å…ˆçº§',
    is_urgent BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦ç´§æ€¥',
    
    -- å‘¨æœŸæ€§ä»»åŠ¡
    is_recurring BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦å‘¨æœŸæ€§',
    recurrence_rule VARCHAR(200) COMMENT 'å‘¨æœŸè§„åˆ™(RRULEæ ¼å¼)',
    recurrence_end_date DATE COMMENT 'å‘¨æœŸç»“æŸæ—¥æœŸ',
    
    -- è½¬åŠä¿¡æ¯
    is_transferred BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦è½¬åŠ',
    transfer_from_id BIGINT COMMENT 'è½¬åŠæ¥æºäººID',
    transfer_from_name VARCHAR(50) COMMENT 'è½¬åŠæ¥æºäºº',
    transfer_reason TEXT COMMENT 'è½¬åŠåŸå› ',
    transfer_time DATETIME COMMENT 'è½¬åŠæ—¶é—´',
    
    -- äº¤ä»˜ç‰©
    deliverables JSON COMMENT 'äº¤ä»˜ç‰©æ¸…å•',
    attachments JSON COMMENT 'é™„ä»¶åˆ—è¡¨',
    
    -- æ ‡ç­¾ä¸åˆ†ç±»
    tags JSON COMMENT 'æ ‡ç­¾',
    category VARCHAR(50) COMMENT 'åˆ†ç±»',
    
    -- æé†’è®¾ç½®
    reminder_enabled BOOLEAN DEFAULT TRUE,
    reminder_before_hours INT DEFAULT 24 COMMENT 'æå‰æé†’å°æ—¶æ•°',
    
    -- å®¡è®¡å­—æ®µ
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT,
    updated_by BIGINT,
    
    INDEX idx_assignee (assignee_id),
    INDEX idx_project (project_id),
    INDEX idx_status (status),
    INDEX idx_type (task_type),
    INDEX idx_deadline (deadline),
    INDEX idx_priority (priority)
);

-- å²—ä½èŒè´£ä»»åŠ¡æ¨¡æ¿
CREATE TABLE job_duty_template (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    position_id BIGINT NOT NULL COMMENT 'å²—ä½ID',
    position_name VARCHAR(100) COMMENT 'å²—ä½åç§°',
    department_id BIGINT COMMENT 'éƒ¨é—¨ID',
    
    duty_name VARCHAR(200) NOT NULL COMMENT 'èŒè´£åç§°',
    duty_description TEXT COMMENT 'èŒè´£æè¿°',
    
    -- å‘¨æœŸè®¾ç½®
    frequency ENUM('daily', 'weekly', 'biweekly', 'monthly', 'quarterly', 'yearly') 
              NOT NULL COMMENT 'é¢‘ç‡',
    day_of_week INT COMMENT 'å‘¨å‡ (1-7)',
    day_of_month INT COMMENT 'å‡ å·(1-31)',
    month_of_year INT COMMENT 'å‡ æœˆ(1-12)',
    
    -- ä»»åŠ¡ç”Ÿæˆè§„åˆ™
    auto_generate BOOLEAN DEFAULT TRUE COMMENT 'è‡ªåŠ¨ç”Ÿæˆä»»åŠ¡',
    generate_before_days INT DEFAULT 3 COMMENT 'æå‰å‡ å¤©ç”Ÿæˆ',
    deadline_offset_days INT DEFAULT 0 COMMENT 'æˆªæ­¢æ—¥æœŸåç§»',
    
    -- ä»»åŠ¡é»˜è®¤å€¼
    default_priority ENUM('urgent', 'high', 'medium', 'low') DEFAULT 'medium',
    estimated_hours DECIMAL(10,2) COMMENT 'é¢„ä¼°å·¥æ—¶',
    
    is_active BOOLEAN DEFAULT TRUE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_position (position_id),
    INDEX idx_frequency (frequency)
);

-- ä»»åŠ¡æ“ä½œæ—¥å¿—
CREATE TABLE task_operation_log (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    task_id BIGINT NOT NULL,
    operation_type VARCHAR(50) NOT NULL COMMENT 'æ“ä½œç±»å‹',
    operation_desc TEXT COMMENT 'æ“ä½œæè¿°',
    old_value JSON COMMENT 'å˜æ›´å‰å€¼',
    new_value JSON COMMENT 'å˜æ›´åå€¼',
    operator_id BIGINT,
    operator_name VARCHAR(50),
    operation_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_task (task_id),
    INDEX idx_operator (operator_id)
);

-- ä»»åŠ¡è¯„è®ºä¸æ²Ÿé€š
CREATE TABLE task_comment (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    task_id BIGINT NOT NULL,
    content TEXT NOT NULL,
    comment_type ENUM('comment', 'progress', 'question', 'reply') DEFAULT 'comment',
    parent_id BIGINT COMMENT 'å›å¤çš„è¯„è®ºID',
    commenter_id BIGINT,
    commenter_name VARCHAR(50),
    mentioned_users JSON COMMENT '@çš„ç”¨æˆ·',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    
    INDEX idx_task (task_id)
);
```

## ä¸‰ã€ä»»åŠ¡ä¸­å¿ƒåŠŸèƒ½è®¾è®¡

### 3.1 é¦–é¡µæ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æˆ‘çš„ä»»åŠ¡                                              2025-01-03 å‘¨äº”   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚    12    â”‚ â”‚    3     â”‚ â”‚    5     â”‚ â”‚    2     â”‚ â”‚    1     â”‚     â”‚
â”‚  â”‚  å¾…å¤„ç†   â”‚ â”‚  ä»Šæ—¥åˆ°æœŸ â”‚ â”‚  æœ¬å‘¨åˆ°æœŸ â”‚ â”‚  å·²é€¾æœŸ   â”‚ â”‚  å¾…éªŒæ”¶   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Œ ç´§æ€¥ä»»åŠ¡ (2)                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”´ ã€ç´§æ€¥ã€‘XXé¡¹ç›®ç”µæ°”åŸç†å›¾ä¿®æ”¹      æˆªæ­¢ï¼šä»Šå¤© 18:00    é¡¹ç›®ä»»åŠ¡    â”‚   â”‚
â”‚  â”‚ ğŸ”´ ã€ç´§æ€¥ã€‘å®¢æˆ·é—®é¢˜ç´§æ€¥å¤„ç†          æˆªæ­¢ï¼šä»Šå¤© 17:00    ä¸´æ—¶æŒ‡æ´¾    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ ä»Šæ—¥ä»»åŠ¡ (5)                                             æŸ¥çœ‹å…¨éƒ¨ > â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â˜ æäº¤å‘¨æŠ¥                           æˆªæ­¢ï¼šä»Šå¤©    å²—ä½èŒè´£        â”‚   â”‚
â”‚  â”‚ â˜ XXé¡¹ç›®æœºæ¢°ç»“æ„è¯„å®¡                  æˆªæ­¢ï¼šä»Šå¤©    æµç¨‹å¾…åŠ        â”‚   â”‚
â”‚  â”‚ â˜ YYé¡¹ç›®æ§åˆ¶ç¨‹åºç¼–å†™                  è¿›è¡Œä¸­       é¡¹ç›®ä»»åŠ¡        â”‚   â”‚
â”‚  â”‚ â˜ å¸®è€ç‹è°ƒè¯•è®¾å¤‡                      æˆªæ­¢ï¼šä»Šå¤©    è½¬åŠä»»åŠ¡        â”‚   â”‚
â”‚  â”‚ â˜ æ•´ç†ä¸Šå‘¨é—ç•™é—®é¢˜                    æ— æˆªæ­¢       é—ç•™ä»»åŠ¡        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ä»»åŠ¡åˆ†ç±»Tab

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å…¨éƒ¨(23) â”‚ é¡¹ç›®ä»»åŠ¡(12) â”‚ å²—ä½èŒè´£(5) â”‚ æµç¨‹å¾…åŠ(3) â”‚ è½¬åŠ(2) â”‚ è‡ªå»º(1) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ç­›é€‰ï¼šçŠ¶æ€ â–¼  ä¼˜å…ˆçº§ â–¼  é¡¹ç›® â–¼  æ—¶é—´èŒƒå›´ â–¼         ğŸ” æœç´¢ä»»åŠ¡        â”‚
â”‚                                                                         â”‚
â”‚  æ’åºï¼šæˆªæ­¢æ—¶é—´ â–¼    â–¡ åªçœ‹é€¾æœŸ    â–¡ åªçœ‹ç´§æ€¥                          â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ã€ä»»åŠ¡åˆ—è¡¨åŒºåŸŸã€‘                                                        â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 ä»»åŠ¡å¡ç‰‡è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜  XXé¡¹ç›®æœºæ¢°ç»“æ„3Då»ºæ¨¡                                    ğŸ”´ ç´§æ€¥     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  ğŸ“ XXè‡ªåŠ¨åŒ–æµ‹è¯•è®¾å¤‡ (Açº§)                          æ¥æºï¼šé¡¹ç›®WBSåˆ†è§£   â”‚
â”‚  ğŸ“ WBS: 1.2.3 æœºæ¢°è®¾è®¡ - ç»“æ„å»ºæ¨¡                                      â”‚
â”‚                                                                         â”‚
â”‚  â° æˆªæ­¢ï¼š2025-01-05 18:00 (è¿˜å‰©2å¤©)                                    â”‚
â”‚  ğŸ“Š è¿›åº¦ï¼š60%  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                                    â”‚
â”‚  â±ï¸ å·¥æ—¶ï¼šå·²ç”¨ 16h / é¢„ä¼° 24h                                           â”‚
â”‚                                                                         â”‚
â”‚  ğŸ‘¤ æŒ‡æ´¾äººï¼šå¼ ç»ç†                           ğŸ“ 3ä¸ªé™„ä»¶                  â”‚
â”‚                                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æ›´æ–°è¿›åº¦]  [å¡«å†™å·¥æ—¶]  [ä¸Šä¼ æ–‡ä»¶]  [è½¬åŠ]  [å®Œæˆ]              Â·Â·Â·    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å››ã€æ ¸å¿ƒåŠŸèƒ½å®ç°

### 4.1 ä»»åŠ¡èšåˆé€»è¾‘

```python
def get_my_tasks(user_id, filters):
    """è·å–æˆ‘çš„æ‰€æœ‰ä»»åŠ¡ï¼ˆèšåˆå¤šæ¥æºï¼‰"""
    
    tasks = []
    
    # 1. é¡¹ç›®WBSä»»åŠ¡
    project_tasks = get_project_tasks(user_id)
    
    # 2. å²—ä½èŒè´£ä»»åŠ¡ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
    job_duties = generate_job_duty_tasks(user_id)
    
    # 3. æµç¨‹å¾…åŠ
    workflow_tasks = get_workflow_pending(user_id)
    
    # 4. è½¬åŠä»»åŠ¡
    transfer_tasks = get_transfer_tasks(user_id)
    
    # 5. é—ç•™ä»»åŠ¡
    legacy_tasks = get_legacy_tasks(user_id)
    
    # 6. é¢„è­¦ä»»åŠ¡
    alert_tasks = get_alert_tasks(user_id)
    
    # 7. ä¸ªäººè‡ªå»º
    personal_tasks = get_personal_tasks(user_id)
    
    # 8. ä¸´æ—¶æŒ‡æ´¾
    assigned_tasks = get_assigned_tasks(user_id)
    
    # èšåˆå¹¶æ’åº
    all_tasks = merge_and_sort(
        project_tasks, job_duties, workflow_tasks, 
        transfer_tasks, legacy_tasks, alert_tasks,
        personal_tasks, assigned_tasks
    )
    
    return apply_filters(all_tasks, filters)
```

### 4.2 æ™ºèƒ½æ’åºè§„åˆ™

```python
def smart_sort_tasks(tasks):
    """æ™ºèƒ½æ’åºï¼šç»¼åˆè€ƒè™‘ç´§æ€¥ç¨‹åº¦ã€æˆªæ­¢æ—¶é—´ã€ä¼˜å…ˆçº§"""
    
    def get_sort_score(task):
        score = 0
        
        # 1. ç´§æ€¥æ ‡è®° (+1000)
        if task.is_urgent:
            score += 1000
        
        # 2. å·²é€¾æœŸ (+500)
        if task.is_overdue:
            score += 500
        
        # 3. ä»Šæ—¥åˆ°æœŸ (+300)
        if task.is_due_today:
            score += 300
        
        # 4. ä¼˜å…ˆçº§
        priority_scores = {'urgent': 200, 'high': 100, 'medium': 50, 'low': 0}
        score += priority_scores.get(task.priority, 0)
        
        # 5. è·ç¦»æˆªæ­¢æ—¶é—´ï¼ˆè¶Šè¿‘è¶Šé«˜ï¼‰
        if task.deadline:
            hours_left = (task.deadline - now()).total_hours()
            if hours_left < 24:
                score += 100
            elif hours_left < 72:
                score += 50
        
        return score
    
    return sorted(tasks, key=get_sort_score, reverse=True)
```

### 4.3 å²—ä½èŒè´£ä»»åŠ¡è‡ªåŠ¨ç”Ÿæˆ

```python
def generate_job_duty_tasks(user_id):
    """æ ¹æ®å²—ä½èŒè´£æ¨¡æ¿è‡ªåŠ¨ç”Ÿæˆå®šæœŸä»»åŠ¡"""
    
    user = get_user(user_id)
    templates = get_duty_templates(user.position_id)
    
    tasks = []
    today = date.today()
    
    for template in templates:
        # æ£€æŸ¥æ˜¯å¦éœ€è¦ç”Ÿæˆ
        if should_generate(template, today):
            # æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
            if not task_exists(template.id, get_period_key(template)):
                task = create_task(
                    title=template.duty_name,
                    task_type='job_duty',
                    source_id=template.id,
                    assignee_id=user_id,
                    deadline=calculate_deadline(template),
                    priority=template.default_priority,
                    estimated_hours=template.estimated_hours,
                    is_recurring=True
                )
                tasks.append(task)
    
    return tasks

def should_generate(template, today):
    """åˆ¤æ–­æ˜¯å¦éœ€è¦ç”Ÿæˆä»»åŠ¡"""
    
    if template.frequency == 'daily':
        return True
    
    if template.frequency == 'weekly':
        return today.weekday() + 1 == template.day_of_week
    
    if template.frequency == 'monthly':
        return today.day == template.day_of_month
    
    # ... å…¶ä»–å‘¨æœŸ
```

## äº”ã€å‰ç«¯é¡µé¢è®¾è®¡

### 5.1 é¡µé¢ç»“æ„

```
MyTaskCenter.vue
â”œâ”€â”€ TaskOverview.vue          # ä»»åŠ¡æ¦‚è§ˆç»Ÿè®¡
â”œâ”€â”€ TaskTabs.vue              # åˆ†ç±»Tabåˆ‡æ¢
â”œâ”€â”€ TaskFilters.vue           # ç­›é€‰æ¡ä»¶
â”œâ”€â”€ TaskList.vue              # ä»»åŠ¡åˆ—è¡¨
â”‚   â””â”€â”€ TaskCard.vue          # ä»»åŠ¡å¡ç‰‡
â”œâ”€â”€ TaskDetail.vue            # ä»»åŠ¡è¯¦æƒ…æŠ½å±‰
â”œâ”€â”€ TaskProgress.vue          # è¿›åº¦æ›´æ–°å¼¹çª—
â”œâ”€â”€ TaskTransfer.vue          # ä»»åŠ¡è½¬åŠå¼¹çª—
â””â”€â”€ TaskCreate.vue            # æ–°å»ºä»»åŠ¡å¼¹çª—
```

### 5.2 äº¤äº’è®¾è®¡

1. **å¿«é€Ÿæ“ä½œ**ï¼š
   - æ»‘åŠ¨å¡ç‰‡æ˜¾ç¤ºå¿«æ·æŒ‰é’®
   - ç‚¹å‡»å¤é€‰æ¡†ç›´æ¥å®Œæˆ
   - æ‹–æ‹½è°ƒæ•´ä¼˜å…ˆçº§

2. **æ‰¹é‡æ“ä½œ**ï¼š
   - å¤šé€‰ä»»åŠ¡æ‰¹é‡å®Œæˆ
   - æ‰¹é‡æ›´æ–°çŠ¶æ€
   - æ‰¹é‡è®¾ç½®ä¼˜å…ˆçº§

3. **æé†’æœºåˆ¶**ï¼š
   - æˆªæ­¢å‰24å°æ—¶æé†’
   - é€¾æœŸä»»åŠ¡çº¢è‰²æ ‡è®°
   - ç´§æ€¥ä»»åŠ¡ç½®é¡¶+é—ªçƒ

## å…­ã€ä¸ç°æœ‰ç³»ç»Ÿé›†æˆ

### 6.1 æ•°æ®æµå‘

```
é¡¹ç›®ç®¡ç†æ¨¡å—                    ä»»åŠ¡ä¸­å¿ƒ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¡¹ç›®WBS    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  é¡¹ç›®ä»»åŠ¡   â”‚
â”‚  ä»»åŠ¡åˆ†è§£   â”‚   åŒæ­¥        â”‚  (è‡ªåŠ¨)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å·¥ä½œæµå¼•æ“                      ä»»åŠ¡ä¸­å¿ƒ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æµç¨‹å¾…åŠ   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  æµç¨‹ä»»åŠ¡   â”‚
â”‚  å®¡æ‰¹èŠ‚ç‚¹   â”‚   æ¨é€        â”‚  (è‡ªåŠ¨)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

äººäº‹ç³»ç»Ÿ                        ä»»åŠ¡ä¸­å¿ƒ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å²—ä½èŒè´£   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  èŒè´£ä»»åŠ¡   â”‚
â”‚  è¯´æ˜ä¹¦     â”‚   å®šæ—¶ç”Ÿæˆ    â”‚  (è‡ªåŠ¨)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 æ¶ˆæ¯é€šçŸ¥

```python
# ä»»åŠ¡é€šçŸ¥åœºæ™¯
NOTIFICATION_TRIGGERS = {
    'task_assigned': 'æ‚¨æœ‰æ–°ä»»åŠ¡ï¼š{task_title}',
    'task_transferred': '{from_user}å°†ä»»åŠ¡è½¬åŠç»™æ‚¨ï¼š{task_title}',
    'task_deadline_24h': 'ä»»åŠ¡å³å°†åˆ°æœŸï¼ˆ24å°æ—¶å†…ï¼‰ï¼š{task_title}',
    'task_overdue': 'ä»»åŠ¡å·²é€¾æœŸï¼š{task_title}',
    'task_rejected': 'æ‚¨çš„ä»»åŠ¡è¢«é©³å›ï¼š{task_title}',
    'task_approved': 'æ‚¨çš„ä»»åŠ¡å·²é€šè¿‡éªŒæ”¶ï¼š{task_title}',
}
```

## ä¸ƒã€å®æ–½å»ºè®®

### 7.1 ç¬¬ä¸€é˜¶æ®µï¼ˆåŸºç¡€ï¼‰
- ç»Ÿä¸€ä»»åŠ¡è¡¨ç»“æ„
- é¡¹ç›®ä»»åŠ¡åŒæ­¥
- åŸºç¡€ä»»åŠ¡åˆ—è¡¨é¡µé¢

### 7.2 ç¬¬äºŒé˜¶æ®µï¼ˆæ‰©å±•ï¼‰
- å²—ä½èŒè´£ä»»åŠ¡è‡ªåŠ¨ç”Ÿæˆ
- æµç¨‹å¾…åŠé›†æˆ
- è½¬åŠåŠŸèƒ½

### 7.3 ç¬¬ä¸‰é˜¶æ®µï¼ˆæ™ºèƒ½ï¼‰
- æ™ºèƒ½æ’åºæ¨è
- å·¥æ—¶é¢„æµ‹
- ä»»åŠ¡æé†’
- ç§»åŠ¨ç«¯æ”¯æŒ

# 非标自动化项目管理系统 - 规划报告

> 生成日期：2026-01-01
> 企业规模：大型企业（>100人）
> 项目类型：混合型（整机设备、改造升级、软件/系统集成）

---

## 一、项目背景

### 1.1 行业特点

非标自动化测试设备行业具有以下独特性：

- **定制化程度高**：每个项目都是根据客户需求定制，无标准产品
- **多学科协作**：涉及机械设计、电气设计、软件开发、装配调试等
- **需求变更频繁**：客户需求在项目过程中经常调整
- **采购周期长**：非标零件采购和加工周期不确定
- **调试周期难估**：设备调试时间受多因素影响

### 1.2 核心痛点

| 痛点 | 具体表现 | 根本原因 |
|------|---------|---------|
| **需求变更管理** | 变更影响范围不清，成本难以追溯 | 缺乏结构化评估流程，变更影响链不清晰 |
| **多部门协作** | 机械/电气/软件/采购各自为战 | 各专业用不同工具，接口文档不同步 |
| **进度跟踪** | 项目节点模糊，难以准确把控 | 节点定义不清，依赖关系复杂 |
| **成本核算** | 实际成本与报价偏差大 | 工时归集不准，变更成本未及时核算 |

---

## 二、功能规划

### 2.1 系统架构总览

```
┌─────────────────────────────────────────────────────────────────────┐
│                    非标自动化项目管理系统                            │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                       决策驾驶舱                             │   │
│  │  项目群看板 │ 资源全景 │ 成本概览 │ 风险预警 │ 经营分析     │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌─────────┐  │
│  │ 项目立项 │ │ 需求变更 │ │ 协作中心 │ │ 进度管控 │ │成本核算 │  │
│  ├──────────┤ ├──────────┤ ├──────────┤ ├──────────┤ ├─────────┤  │
│  │·商机转化 │ │·变更申请 │ │·任务分派 │ │·WBS计划  │ │·工时登记│  │
│  │·技术评审 │ │·影响评估 │ │·接口管理 │ │·甘特图   │ │·材料成本│  │
│  │·合同关联 │ │·审批流程 │ │·评审会议 │ │·里程碑   │ │·采购成本│  │
│  │·项目模板 │ │·变更追溯 │ │·交付物库 │ │·资源负载 │ │·变更成本│  │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘ └─────────┘  │
│                                                                     │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌─────────┐  │
│  │ 采购管理 │ │ 质量管理 │ │ 文档中心 │ │ 知识库   │ │客户门户 │  │
│  ├──────────┤ ├──────────┤ ├──────────┤ ├──────────┤ ├─────────┤  │
│  │·采购申请 │ │·问题登记 │ │·图纸版本 │ │·案例库   │ │·进度查看│  │
│  │·供应商库 │ │·NCR流程  │ │·程序版本 │ │·标准件库 │ │·变更确认│  │
│  │·到货跟踪 │ │·调试记录 │ │·验收资料 │ │·经验教训 │ │·验收签字│  │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘ └─────────┘  │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                       系统集成层                             │   │
│  │     PDM/PLM │ ERP │ OA │ 企业微信/钉钉 │ BI报表              │   │
│  └─────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────┘
```

### 2.2 核心模块详细设计

#### 模块1：需求变更管理

**流程设计：**
```
提出变更 → 影响评估（各部门） → 审批决策 → 执行分发 → 变更追溯
```

**关键功能：**
| 功能 | 说明 |
|------|------|
| 变更申请单 | 结构化模板：变更内容、原因、期望完成时间 |
| 影响分析链 | 自动关联受影响的BOM、图纸、程序、工序 |
| 多部门评估 | 机械/电气/软件/采购各自评估工时和成本 |
| 审批流 | 按变更金额分级审批（小额/中额/大额） |
| 变更追溯 | 每个变更与最终交付物的对应关系 |

#### 模块2：多部门协作平台

**设计理念：**
- 统一交付物管理，版本可追溯
- 接口定义明确，变更自动通知
- 评审记录在线，问题闭环跟踪

**关键功能：**
| 功能 | 说明 |
|------|------|
| 接口定义管理 | 机械↔电气↔软件的接口约定，变更时自动通知 |
| 交付物清单 | 每个阶段的输入/输出物明确定义 |
| 评审会议 | 技术评审记录、问题跟踪、闭环确认 |
| 跨部门任务 | 一个任务可指派多部门协作，进度汇总 |
| 设计冻结点 | 关键节点锁定，变更需走正式流程 |

#### 模块3：进度跟踪体系

**三级进度管控：**
```
L1 里程碑（管理层视角）
├── 合同签订 ── 方案评审 ── 设计冻结 ── 出厂 ── 验收

L2 阶段计划（项目经理视角）
├── 机械设计 ── 电气设计 ── 采购 ── 加工装配 ── 调试

L3 任务分解（执行层视角）
└── 具体设计任务、图纸、程序、测试项...
```

**关键功能：**
| 功能 | 说明 |
|------|------|
| WBS模板库 | 按项目类型预置WBS模板，快速创建计划 |
| 依赖关系 | 任务前后置关系，支持FS/FF/SS/SF |
| 关键路径 | 自动计算并高亮关键路径 |
| 进度汇报 | 日报/周报自动汇总，异常自动上报 |
| 甘特图+看板 | 双视图切换，适应不同管理风格 |
| 资源负载 | 按人员/设备显示负载，避免过载 |

#### 模块4：成本核算体系

**成本构成：**
```
┌──────────────────────────────────────────────────┐
│  直接成本                                         │
│  ├── 材料成本（BOM自动汇总）                     │
│  ├── 外购件成本（采购订单关联）                  │
│  ├── 外协加工成本                                │
│  └── 直接人工（工时 × 单价）                    │
├──────────────────────────────────────────────────┤
│  间接成本                                         │
│  ├── 项目管理费用                                │
│  ├── 差旅费用                                    │
│  └── 其他费用                                    │
├──────────────────────────────────────────────────┤
│  变更成本（独立核算）                            │
│  └── 每个变更单的增量成本                        │
└──────────────────────────────────────────────────┘
```

**关键功能：**
| 功能 | 说明 |
|------|------|
| 工时登记 | 按任务登记工时，支持手机端快捷录入 |
| BOM成本汇总 | 从PDM/ERP同步BOM，自动计算材料成本 |
| 采购成本归集 | 采购订单与项目关联，实时归集 |
| 变更成本独立 | 变更导致的增量成本单独核算，可向客户索赔 |
| 成本预警 | 实际成本接近/超过预算时自动预警 |
| 项目复盘 | 项目结束后自动生成成本分析报告 |

### 2.3 各角色使用场景

| 角色 | 主要使用功能 |
|------|-------------|
| 总经理 | 决策驾驶舱：项目群状态、资源负载、经营毛利 |
| 项目经理 | 全模块：立项、计划、协调、变更、成本、客户沟通 |
| 机械工程师 | 任务接收、图纸上传、工时填报、接口确认 |
| 电气工程师 | 任务接收、配置表管理、调试记录 |
| 软件工程师 | 任务接收、程序版本、接口文档、测试报告 |
| 采购 | 采购申请、供应商管理、到货跟踪 |
| 财务 | 成本核算、毛利分析、项目复盘 |
| 客户 | 客户门户：进度查看、变更确认、验收签字 |

---

## 三、技术方案

### 3.1 整体技术架构

```
┌─────────────────────────────────────────────────────────────────────┐
│                           接入层                                    │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐           │
│  │ Web端    │  │ 移动端   │  │ 企业微信 │  │ 钉钉     │           │
│  │ (管理)   │  │ (填报)   │  │ (审批)   │  │ (通知)   │           │
│  └────┬─────┘  └────┬─────┘  └────┬─────┘  └────┬─────┘           │
│       └─────────────┴─────────────┴─────────────┘                  │
│                           │                                         │
│                    ┌──────▼──────┐                                 │
│                    │  API网关    │ ← 认证/限流/日志                │
│                    └──────┬──────┘                                 │
├───────────────────────────┼─────────────────────────────────────────┤
│                        服务层                                       │
├───────────────────────────┼─────────────────────────────────────────┤
│       ┌───────────────────┼───────────────────────┐                │
│       │                   │                       │                │
│  ┌────▼────┐  ┌───────────▼───────────┐  ┌──────▼──────┐         │
│  │核心服务 │  │     业务服务           │  │  集成服务   │         │
│  ├─────────┤  ├───────────────────────┤  ├─────────────┤         │
│  │·用户认证│  │·项目管理  ·需求变更   │  │·PDM适配器  │         │
│  │·权限管理│  │·任务协作  ·进度跟踪   │  │·ERP适配器  │         │
│  │·组织架构│  │·成本核算  ·文档管理   │  │·OA适配器   │         │
│  │·消息通知│  │·采购管理  ·知识库     │  │·IM适配器   │         │
│  └─────────┘  └───────────────────────┘  └─────────────┘         │
│                           │                                         │
├───────────────────────────┼─────────────────────────────────────────┤
│                        数据层                                       │
├───────────────────────────┼─────────────────────────────────────────┤
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐           │
│  │PostgreSQL│  │ Redis    │  │ MinIO    │  │ ES       │           │
│  │ 主数据库 │  │ 缓存/队列│  │ 文件存储 │  │ 全文搜索 │           │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘           │
└─────────────────────────────────────────────────────────────────────┘
```

### 3.2 技术栈选型（AI辅助开发优化）

选择 AI 支持度最高的技术栈，确保代码生成质量：

| 层级 | 推荐方案 | 选择理由 |
|------|---------|---------|
| **前端** | React + Ant Design Pro + TypeScript | 企业级组件丰富，AI训练数据最多 |
| **后端** | NestJS + TypeScript | 结构清晰，前后端语言统一 |
| **数据库** | PostgreSQL | 功能强大，复杂查询性能好 |
| **ORM** | Prisma | 类型安全，AI生成准确率高 |
| **缓存** | Redis | 标配 |
| **文件存储** | MinIO | 私有化兼容S3 |
| **容器化** | Docker + Docker Compose | 简化部署运维 |

### 3.3 系统集成方案

**已有系统：ERP + 企业微信**

```
┌─────────────────────────────────────────────────────────────┐
│                  企业微信集成功能                            │
├─────────────────────────────────────────────────────────────┤
│ ·任务通知 → 企微消息卡片推送                                │
│ ·审批流程 → 企微审批应用                                    │
│ ·工时填报 → 企微小程序/H5                                  │
│ ·日报周报 → 企微汇报应用                                    │
│ ·组织同步 → 统一身份认证                                    │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│                    ERP集成功能                               │
├─────────────────────────────────────────────────────────────┤
│ ·采购订单同步 → 项目成本归集                                │
│ ·入库信息同步 → 到货状态更新                                │
│ ·BOM数据同步 → 材料成本计算                                 │
│ ·财务数据同步 → 项目毛利分析                                │
└─────────────────────────────────────────────────────────────┘
```

### 3.4 部署方案

推荐**混合部署架构**：

```
企业内网                              公有云/DMZ区
┌─────────────────┐                  ┌─────────────────┐
│ 核心数据        │                  │ 协作功能        │
│ ·项目财务数据   │  ◄──加密同步──►  │ ·移动端访问     │
│ ·客户信息       │                  │ ·外部协作       │
│ ·设计文档       │                  │ ·消息推送       │
│ ·成本数据       │                  │ ·客户门户       │
└─────────────────┘                  └─────────────────┘
与ERP直连                            支持远程访问
```

---

## 四、实施路径

### 4.1 AI辅助开发方式

```
┌─────────────────────────────────────────────────────────────┐
│                  AI 辅助开发工作流                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   你（决策者）              AI（执行者）                    │
│   ┌─────────┐              ┌─────────┐                     │
│   │定需求   │ ──────────► │写代码   │                     │
│   │做决策   │              │解释原理 │                     │
│   │验收质量 │ ◄────────── │调试修复 │                     │
│   └─────────┘              └─────────┘                     │
│                                                             │
│   关键：你不需要会写代码，但需要能看懂、能判断              │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 开发阶段规划

```
阶段1: 环境搭建
├── 安装开发环境（Node.js、Docker、VS Code）
├── 创建项目骨架
└── 配置数据库和基础服务

阶段2: 底座开发
├── 用户认证与权限管理
├── 组织架构管理
├── 基础API框架
└── 企业微信集成（登录、消息）

阶段3: 核心业务模块
├── 项目管理基础功能
├── 任务管理与分配
├── 进度跟踪（甘特图、看板）
└── 工时登记

阶段4: 高级功能
├── 需求变更管理
├── 成本核算
├── ERP数据集成
└── 报表与驾驶舱

阶段5: 优化与推广
├── 性能优化
├── 用户培训
├── 试点运行
└── 全面推广
```

### 4.3 下一步行动

**立即可做：**

1. **搭建开发环境**
   - 安装 Node.js (v20+)
   - 安装 Docker Desktop
   - 安装 VS Code 编辑器

2. **创建项目底座**
   - AI 辅助生成项目骨架代码
   - 包含：用户登录、权限管理、基础API
   - 验收标准：能跑起来，能登录

3. **开始迭代开发**
   - 从最简单的模块开始（项目基本信息）
   - 每次加一点功能，逐步完善

---

## 五、风险与建议

### 5.1 主要风险

| 风险 | 影响 | 应对措施 |
|------|------|---------|
| 需求范围蔓延 | 开发周期无限延长 | 严格控制MVP范围，分期迭代 |
| 技术债务累积 | 后期维护困难 | 定期重构，保持代码质量 |
| 集成复杂度 | ERP/企微集成超出预期 | 优先核心功能，集成功能分期 |
| 用户接受度 | 系统上线后无人使用 | 充分调研，试点先行 |

### 5.2 成功关键因素

1. **高层支持**：需要管理层推动，确保各部门配合
2. **需求聚焦**：先解决最痛的1-2个问题，不贪多
3. **快速迭代**：2周一个小版本，及时获取反馈
4. **数据迁移**：做好历史数据迁移方案

---

## 附录

### A. 数据模型草案

```
核心实体：
├── Organization（组织）
├── User（用户）
├── Project（项目）
├── Task（任务）
├── ChangeRequest（变更申请）
├── WorkLog（工时记录）
├── Cost（成本记录）
├── Document（文档）
└── Milestone（里程碑）
```

### B. 参考资源

- Ant Design Pro: https://pro.ant.design/
- NestJS: https://nestjs.com/
- Prisma: https://www.prisma.io/
- 企业微信开发文档: https://developer.work.weixin.qq.com/

---

*本报告由 Claude Code AI 辅助生成，基于与用户的需求讨论整理*

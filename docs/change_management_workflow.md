# 项目变更管理工作流图

## 工作流概述

本文档描述项目变更管理的完整工作流程，包括状态转换、角色职责和决策点。

---

## 完整工作流程图

```
┌─────────────┐
│  提交变更    │ ← 任何项目成员
│  SUBMITTED  │
└──────┬──────┘
       │
       ├──────────────┐
       │              │
       ↓              ↓
┌─────────────┐  ┌─────────────┐
│  影响评估    │  │  取消变更    │
│  ASSESSING  │  │  CANCELLED  │ [终态]
└──────┬──────┘  └─────────────┘
       │
       │ 评估完成
       ↓
┌─────────────┐
│   待审批     │ ← PM/技术负责人
│  PENDING    │
│  APPROVAL   │
└──────┬──────┘
       │
       ├──────────┬──────────┐
       │          │          │
       ↓          ↓          ↓
┌─────────┐ ┌─────────┐ ┌─────────┐
│  批准    │ │  拒绝    │ │  退回    │
│ APPROVED │ │ REJECTED│ │ RETURNED│
└────┬────┘ └─────────┘ └────┬────┘
     │       [终态]           │
     │                        │
     │                        ↓
     │                   回到评估
     │
     ↓
┌─────────────┐
│   实施中     │ ← 开发团队
│IMPLEMENTING │
└──────┬──────┘
       │
       │ 实施完成
       ↓
┌─────────────┐
│   验证中     │ ← 质量/测试团队
│  VERIFYING  │
└──────┬──────┘
       │
       │ 验证通过
       ↓
┌─────────────┐
│   已关闭     │
│   CLOSED    │ [终态]
└─────────────┘
```

---

## 状态转换矩阵

| 当前状态 \ 目标状态 | SUBMITTED | ASSESSING | PENDING_APPROVAL | APPROVED | REJECTED | IMPLEMENTING | VERIFYING | CLOSED | CANCELLED |
|---------------------|-----------|-----------|------------------|----------|----------|--------------|-----------|--------|-----------|
| **SUBMITTED**       | -         | ✓         | -                | -        | -        | -            | -         | -      | ✓         |
| **ASSESSING**       | ✓         | -         | ✓                | -        | -        | -            | -         | -      | ✓         |
| **PENDING_APPROVAL**| -         | ✓         | -                | ✓        | ✓        | -            | -         | -      | ✓         |
| **APPROVED**        | -         | -         | -                | -        | -        | ✓            | -         | -      | ✓         |
| **REJECTED**        | -         | -         | -                | -        | -        | -            | -         | -      | -         |
| **IMPLEMENTING**    | -         | -         | -                | ✓        | -        | -            | ✓         | -      | -         |
| **VERIFYING**       | -         | -         | -                | -        | -        | ✓            | -         | ✓      | -         |
| **CLOSED**          | -         | -         | -                | -        | -        | -            | -         | -      | -         |
| **CANCELLED**       | -         | -         | -                | -        | -        | -            | -         | -      | -         |

**说明**:
- ✓ 表示允许转换
- \- 表示不允许转换
- 终态（REJECTED、CLOSED、CANCELLED）不能转换到任何其他状态

---

## 详细工作流说明

### 阶段 1: 提交变更 (SUBMITTED)

**职责**: 任何项目成员

**操作**:
1. 填写变更标题和描述
2. 选择变更类型和来源
3. 初步评估影响（可选）
4. 上传相关附件
5. 提交变更请求

**自动操作**:
- 生成变更编号（格式：CHG-项目编码-序号）
- 记录提交人和提交时间
- 设置初始状态为 SUBMITTED
- 设置审批决策为 PENDING
- 发送通知给PM和技术负责人

**下一步**:
- 转入影响评估阶段
- 或直接取消变更

---

### 阶段 2: 影响评估 (ASSESSING)

**职责**: PM / 技术负责人

**操作**:
1. 分析变更的必要性和可行性
2. 评估成本影响（人力、材料等）
3. 评估时间影响（延期天数、影响的里程碑）
4. 评估范围影响（新增/删除/修改的功能）
5. 填写详细的影响评估报告
6. 识别相关风险

**评估维度**:

```
成本影响
├── 人工成本
├── 材料成本
├── 设备成本
└── 其他成本

时间影响
├── 延期天数
├── 影响的里程碑
└── 关键路径影响

范围影响
├── 新增功能
├── 删除功能
├── 修改功能
└── 质量标准变化

风险评估
├── 技术风险
├── 进度风险
├── 成本风险
└── 质量风险
```

**决策点**:
- 评估后认为可行 → 转入待审批
- 需要补充信息 → 退回提交状态
- 评估后不可行 → 直接取消

---

### 阶段 3: 待审批 (PENDING_APPROVAL)

**职责**: PM / 高层管理者（根据影响等级）

**审批规则**:

| 影响等级 | 审批人 | 审批时限 |
|----------|--------|----------|
| LOW | PM | 1个工作日 |
| MEDIUM | PM | 2个工作日 |
| HIGH | 部门经理 | 3个工作日 |
| CRITICAL | 总经理 | 5个工作日 |

**审批选项**:

1. **批准 (APPROVED)**
   - 同意变更
   - 可附审批意见和条件
   - 转入实施阶段

2. **拒绝 (REJECTED)**
   - 不同意变更
   - 必须填写拒绝原因
   - 变更进入终态

3. **退回 (RETURNED)**
   - 要求补充信息
   - 返回影响评估阶段
   - 填写需要补充的内容

**审批考虑因素**:
- 变更的价值和必要性
- 成本效益分析
- 对项目整体的影响
- 资源可用性
- 风险可控性

---

### 阶段 4: 实施中 (IMPLEMENTING)

**职责**: 开发/实施团队

**操作**:
1. 制定详细实施计划
2. 分解实施任务
3. 分配任务给团队成员
4. 执行变更实施
5. 定期更新实施进度
6. 记录实施过程中的问题

**实施跟踪**:
```
实施计划
├── 阶段划分
├── 任务分解
├── 人员分配
├── 时间安排
└── 交付物

进度跟踪
├── 完成百分比
├── 里程碑达成
├── 问题记录
└── 风险应对
```

**质量控制**:
- 代码审查
- 单元测试
- 集成测试
- 文档更新

**完成条件**:
- 所有实施任务完成
- 自测通过
- 交付物就绪
- 实施文档完整

---

### 阶段 5: 验证中 (VERIFYING)

**职责**: 质量保证团队 / 技术负责人

**验证内容**:
1. 功能验证 - 是否符合变更要求
2. 性能验证 - 是否满足性能指标
3. 兼容性验证 - 与现有功能是否兼容
4. 安全性验证 - 是否引入安全风险
5. 文档验证 - 文档是否完整准确

**验证方法**:
```
功能测试
├── 功能正确性
├── 边界条件
├── 异常处理
└── 用户体验

非功能测试
├── 性能测试
├── 安全测试
├── 兼容性测试
└── 可维护性

验收测试
├── 用户验收
├── 客户确认
└── 上线准备
```

**验证结果**:
- **通过** → 转入已关闭状态
- **不通过** → 退回实施阶段修复

---

### 阶段 6: 已关闭 (CLOSED)

**职责**: PM

**操作**:
1. 确认所有工作完成
2. 更新项目文档
3. 归档变更相关资料
4. 总结经验教训
5. 发送完成通知

**归档内容**:
- 变更请求文档
- 影响评估报告
- 审批记录
- 实施文档
- 验证报告
- 经验教训

---

## 角色与职责

### 项目成员
- 可以提交变更请求
- 可以查看变更列表和详情
- 可以参与变更讨论

### 技术负责人
- 进行技术影响评估
- 提供技术方案建议
- 指导变更实施
- 参与技术验证

### 项目经理 (PM)
- 进行综合影响评估
- 审批中低影响变更
- 协调资源分配
- 监控实施进度
- 关闭变更请求

### 质量负责人
- 制定验证计划
- 执行质量验证
- 确认变更质量
- 提出改进建议

### 高层管理者
- 审批高影响变更
- 提供战略决策
- 协调跨部门资源

---

## 决策树

### 变更是否应该实施？

```
收到变更请求
    ↓
是否符合项目目标？
    ├─ 否 → 拒绝
    └─ 是
        ↓
    成本影响可接受？
        ├─ 否 → 重新评估或拒绝
        └─ 是
            ↓
        时间影响可接受？
            ├─ 否 → 协商替代方案
            └─ 是
                ↓
            资源是否可用？
                ├─ 否 → 调整计划或拒绝
                └─ 是
                    ↓
                风险可控？
                    ├─ 否 → 制定风险应对措施
                    └─ 是
                        ↓
                    批准并实施
```

---

## 关键指标 (KPI)

### 过程指标

| 指标 | 计算方法 | 目标值 |
|------|----------|--------|
| 变更响应时间 | 从提交到开始评估的时间 | ≤ 1天 |
| 评估完成时间 | 从评估开始到提交审批的时间 | ≤ 3天 |
| 审批时间 | 从提交审批到审批完成的时间 | ≤ 2天 |
| 实施周期 | 从批准到实施完成的时间 | 按计划 |
| 验证时间 | 验证阶段耗时 | ≤ 5天 |

### 质量指标

| 指标 | 计算方法 | 目标值 |
|------|----------|--------|
| 变更成功率 | 已关闭 / (已关闭 + 已拒绝) × 100% | ≥ 80% |
| 首次验证通过率 | 首次验证通过的变更数 / 总变更数 × 100% | ≥ 90% |
| 变更准确率 | 实际影响 ≈ 评估影响的变更数 / 总变更数 × 100% | ≥ 85% |

### 影响指标

| 指标 | 计算方法 | 监控要求 |
|------|----------|----------|
| 总成本影响 | 所有已批准变更的成本影响总和 | 月度统计 |
| 总时间影响 | 所有已批准变更的时间影响总和 | 月度统计 |
| 变更密度 | 变更数 / 项目规模 | 项目比较 |

---

## 通知规则

### 自动通知触发点

| 事件 | 通知对象 | 通知方式 |
|------|----------|----------|
| 变更提交 | PM、技术负责人 | 邮件 + 系统消息 |
| 评估完成 | 提交人、审批人 | 邮件 |
| 待审批 | 审批人 | 邮件 + 系统消息 |
| 审批完成 | 提交人、实施团队 | 邮件 |
| 实施开始 | PM、质量负责人 | 系统消息 |
| 实施完成 | 验证团队 | 邮件 |
| 验证完成 | PM、提交人 | 邮件 |
| 变更关闭 | 所有相关人 | 邮件 |
| 变更被拒 | 提交人 | 邮件 + 系统消息 |

### 通知内容模板

**提交通知**:
```
标题：新的变更请求 - {变更编号}
内容：
{提交人} 提交了新的变更请求：
- 标题：{标题}
- 类型：{变更类型}
- 来源：{变更来源}
请及时进行影响评估。

查看详情：{链接}
```

**审批通知**:
```
标题：变更请求待审批 - {变更编号}
内容：
变更请求已完成影响评估，待您审批：
- 标题：{标题}
- 成本影响：{成本影响}
- 时间影响：{时间影响}
- 影响等级：{影响等级}

查看详情并审批：{链接}
```

---

## 附录：状态机实现

### Python代码示例

```python
# 状态转换验证函数
def validate_status_transition(current_status: str, new_status: str) -> bool:
    """验证状态转换是否合法"""
    valid_transitions = {
        'SUBMITTED': ['ASSESSING', 'CANCELLED'],
        'ASSESSING': ['PENDING_APPROVAL', 'SUBMITTED', 'CANCELLED'],
        'PENDING_APPROVAL': ['APPROVED', 'REJECTED', 'ASSESSING', 'CANCELLED'],
        'APPROVED': ['IMPLEMENTING', 'CANCELLED'],
        'REJECTED': [],
        'IMPLEMENTING': ['VERIFYING', 'APPROVED'],
        'VERIFYING': ['CLOSED', 'IMPLEMENTING'],
        'CLOSED': [],
        'CANCELLED': [],
    }
    
    return new_status in valid_transitions.get(current_status, [])
```

---

**文档版本**: v1.0  
**最后更新**: 2026-02-14  
**维护者**: 项目管理团队

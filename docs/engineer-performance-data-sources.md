# 工程师绩效评估数据来源说明

## 数据采集方式概览

绩效评估系统采用**混合数据采集模式**：
- **自动采集**：从现有业务系统中自动提取数据
- **人工填写**：部分基础数据需要人工记录，系统自动从中提取绩效指标

---

## 一、完全自动采集的数据（无需人工填写）

以下数据完全由系统自动从业务系统中提取，**无需人工填写**：

### 1. 任务完成情况 ✅
- **数据来源**：`Task` 表（任务管理系统）
- **采集内容**：
  - 任务总数
  - 已完成任务数
  - 按时完成任务数
  - 完成率、按时完成率
- **采集方式**：自动统计任务状态、完成时间、截止时间

### 2. 项目参与数据 ✅
- **数据来源**：`ProjectMember` 表（项目成员表）
- **采集内容**：
  - 参与项目数量
  - 项目难度得分（从项目评价获取）
  - 项目工作量得分（从项目评价获取）
- **采集方式**：自动统计项目成员关系

### 3. ECN责任数据 ✅
- **数据来源**：`Ecn` 表（工程变更通知表）
- **采集内容**：
  - 项目总ECN数
  - 因设计问题产生的ECN数
  - ECN责任率
- **采集方式**：自动统计ECN类型和创建时间
- **注意**：ECN本身需要在ECN系统中创建，但绩效系统会自动统计

### 4. BOM数据 ✅
- **数据来源**：`BomHeader`、`BomItem` 表（物料清单表）
- **采集内容**：
  - BOM提交及时率
  - 标准件使用率
- **采集方式**：自动统计BOM提交时间和标准件标识
- **注意**：BOM本身需要在BOM系统中创建，但绩效系统会自动统计

### 5. 方案工程师数据 ✅
- **数据来源**：`PresaleSolution`、`Contract` 表
- **采集内容**：
  - 方案总数
  - 方案中标数
  - 方案通过率
  - 方案质量评分（从工单满意度获取）
- **采集方式**：自动统计方案状态、合同关联、满意度评分

---

## 二、需要人工填写的基础数据（系统自动提取绩效指标）

以下数据需要人工填写或记录，但系统会**自动从中提取绩效指标**：

### 1. 工作日志 ⚠️ 需要填写
- **填写人**：工程师本人
- **填写内容**：每日工作内容描述
- **系统自动提取**：
  - 自我评价得分（通过关键词识别积极/消极词汇）
  - 技术难点识别
  - 问题解决场景
  - 知识分享场景
  - 技术突破场景
- **自动化程度**：✅ 系统自动分析工作日志内容，无需额外填写绩效数据

### 2. 项目评价 ⚠️ 需要填写
- **填写人**：项目管理部经理
- **填写内容**：
  - 项目难度得分（1-10分）
  - 项目工作量得分（1-10分）
  - 新技术得分
  - 项目新旧得分
  - 项目金额得分
- **强制要求**：项目进入S2阶段前必须完成
- **自动化程度**：⚠️ 需要人工评价，但系统会自动用于绩效计算

### 3. 跨部门协作评价 ⚠️ 需要评价
- **评价人**：合作人员（系统自动抽取5人）
- **评价内容**：
  - 沟通配合得分（1-5分）
  - 响应速度得分（1-5分）
  - 交付质量得分（1-5分）
  - 接口规范得分（1-5分）
- **自动化程度**：
  - ✅ 系统自动抽取合作人员
  - ✅ 系统自动创建评价邀请
  - ⚠️ 需要合作人员填写评价
  - ✅ 系统自动完成缺失评价（使用默认值75分）

### 4. 设计评审记录 ⚠️ 需要记录
- **记录人**：评审人员
- **记录内容**：
  - 评审日期
  - 是否一次通过
  - 评审结果
- **数据来源**：`DesignReview` 表
- **自动化程度**：⚠️ 需要在评审时记录，但系统会自动统计一次通过率

### 5. 调试问题记录 ⚠️ 需要记录
- **记录人**：问题发现人或负责人
- **记录内容**：
  - 问题描述
  - 发现日期
  - 解决日期
  - 修复时长
- **数据来源**：
  - `MechanicalDebugIssue` 表（机械调试问题）
  - `TestBugRecord` 表（测试Bug记录）
- **自动化程度**：⚠️ 需要在问题发生时记录，但系统会自动统计问题密度和修复时长

### 6. 知识贡献 ⚠️ 需要提交
- **提交人**：工程师本人
- **提交内容**：
  - 技术文档
  - 标准模板
  - 代码模块
  - PLC模块
- **数据来源**：
  - `KnowledgeContribution` 表
  - `CodeModule` 表
  - `PlcModuleLibrary` 表
- **自动化程度**：⚠️ 需要工程师主动提交，但系统会自动统计贡献数量和复用次数

---

## 三、数据采集自动化程度总结

### 完全自动化（无需人工填写）✅
1. ✅ 任务完成情况统计
2. ✅ 项目参与数据统计
3. ✅ ECN责任数据统计
4. ✅ BOM数据统计
5. ✅ 方案工程师数据统计

### 半自动化（需要基础数据，系统自动提取指标）⚠️
1. ⚠️ 自我评价（从工作日志自动提取）
2. ⚠️ 设计评审统计（需要评审记录，系统自动统计）
3. ⚠️ 调试问题统计（需要问题记录，系统自动统计）
4. ⚠️ 知识贡献统计（需要提交贡献，系统自动统计）

### 需要人工填写/评价 ⚠️
1. ⚠️ 工作日志（工程师填写，系统自动分析）
2. ⚠️ 项目评价（项目管理部经理填写）
3. ⚠️ 跨部门协作评价（合作人员评价，系统自动抽取）

---

## 四、数据采集流程

### 自动采集流程
```
业务系统（项目管理、ECN、BOM等）
    ↓
自动采集服务（PerformanceDataCollector）
    ↓
绩效计算服务（EngineerPerformanceService）
    ↓
绩效结果（PerformanceResult）
```

### 人工填写流程
```
工程师/经理填写基础数据
    ↓
系统自动提取绩效指标
    ↓
绩效计算服务
    ↓
绩效结果
```

---

## 五、建议

### 提高自动化程度的建议

1. **工作日志**：
   - 当前：需要工程师每天填写
   - 建议：可以集成工时系统，自动生成工作日志摘要

2. **设计评审**：
   - 当前：需要在评审时记录
   - 建议：可以集成技术评审系统，自动同步评审结果

3. **调试问题**：
   - 当前：需要记录问题
   - 建议：可以集成问题管理系统，自动同步问题记录

4. **知识贡献**：
   - 当前：需要工程师主动提交
   - 建议：可以从代码仓库、文档系统自动识别贡献

---

## 六、当前自动化程度

**总体自动化程度：约 70-80%**

- **完全自动采集**：约 50%
- **半自动采集**（需要基础数据，系统自动提取）：约 30%
- **需要人工填写**：约 20%

**结论**：大部分绩效数据是自动采集的，但仍需要部分基础数据的人工填写（如工作日志、项目评价、协作评价等）。

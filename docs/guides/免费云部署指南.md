# 🚀 免费云部署快速指南

## 方案：Vercel + Supabase（完全免费）

**优势**：
- ✅ 完全免费（个人项目够用）
- ✅ 自动 HTTPS + 全球 CDN
- ✅ 自动部署（Git Push 即部署）
- ✅ 无需服务器管理

---

## 快速开始（3 步完成）

### 📦 第一步：Supabase 数据库（5 分钟）

#### 1. 创建账号和项目
1. 访问 https://supabase.com，用 GitHub 登录
2. 点击 **"New Project"**
3. 填写：
   - 项目名：`non-standard-pm`
   - 密码：设置强密码（记住！）
   - 区域：Tokyo（日本）
4. 等待 1-2 分钟创建完成

#### 2. 初始化数据库
1. 进入项目，点击左侧 **"SQL Editor"**
2. 点击 **"New query"**
3. 打开项目文件 `supabase-setup.sql`，复制所有内容
4. 粘贴到编辑器，点击 **"Run"**
5. 看到成功提示 ✅

#### 3. 获取连接字符串
1. 点击左侧 **"Settings"** → **"Database"**
2. 找到 **"Connection string"** → 选择 **"URI"**
3. 复制连接字符串（格式：`postgresql://postgres:密码@db.xxx.supabase.co:5432/postgres`）
4. **保存好这个字符串！**

---

### 🚀 第二步：Vercel 部署（5 分钟）

#### 1. 推送代码到 GitHub

```bash
# 在项目目录执行
cd /Users/flw/non-standard-automation-pm

# 初始化 Git（如果还没有）
git init
git add .
git commit -m "Ready for Vercel deployment"

# 推送到 GitHub（先在 GitHub 创建仓库）
git remote add origin https://github.com/你的用户名/non-standard-pm.git
git branch -M main
git push -u origin main
```

#### 2. 导入到 Vercel

1. 访问 https://vercel.com，用 GitHub 登录
2. 点击 **"Add New..."** → **"Project"**
3. 选择刚才的 GitHub 仓库 `non-standard-pm`
4. 点击 **"Import"**

#### 3. 配置环境变量（重要！）

在配置页面，点击 **"Environment Variables"**，添加：

**DATABASE_URL**（必需）
```
postgresql://postgres:你的密码@db.xxx.supabase.co:5432/postgres
```
（从 Supabase 复制的连接字符串）

**SECRET_KEY**（必需）
```bash
# 在终端运行生成：
openssl rand -base64 32
```
复制生成的字符串

#### 4. 开始部署

点击 **"Deploy"**，等待 2-3 分钟 ☕

---

### ✅ 第三步：访问和使用（1 分钟）

部署完成后：

1. **获取网址**：Vercel 会显示，如：`https://non-standard-pm.vercel.app`

2. **测试访问**：
   - 前端：`https://你的网址.vercel.app`
   - API 文档：`https://你的网址.vercel.app/docs`
   - 健康检查：`https://你的网址.vercel.app/health`

3. **登录系统**：
   - 用户名：`admin`
   - 密码：`admin123`

4. **⚠️ 立即修改密码！**

---

## 🎉 完成！

你的系统现在已经部署到云端，可以通过网址随时访问！

---

## 📋 后续操作

### 更新代码自动部署
```bash
git add .
git commit -m "更新功能"
git push
```
推送后 Vercel 会自动重新部署。

### 查看日志
- Vercel Dashboard → 你的项目 → **Logs**
- Supabase Dashboard → **Logs**

### 绑定自定义域名（可选）
1. Vercel 项目 → **Settings** → **Domains**
2. 输入你的域名（如 `pm.yourdomain.com`）
3. 在域名 DNS 添加 CNAME 记录指向 `cname.vercel-dns.com`

---

## 🚨 常见问题

### ❌ 部署失败
1. 检查 GitHub 代码是否完整
2. 查看 Vercel 部署日志
3. 确认环境变量配置正确

### ❌ 数据库连接失败
1. 检查 DATABASE_URL 是否正确
2. 确认 Supabase 项目正常运行
3. 密码中有特殊字符需要 URL 编码

### ❌ 前端打不开
1. 等待几分钟让 CDN 生效
2. 清除浏览器缓存
3. 查看 Vercel 部署状态

### ❌ API 500 错误
1. 在 Vercel 查看函数日志
2. 确认数据库表已创建
3. 检查环境变量

---

## 💰 费用说明

### Vercel 免费版
- 100 GB 流量/月
- 无限部署
- 适合个人和小团队

### Supabase 免费版
- 500 MB 数据库
- 1 GB 文件存储
- 无限 API 请求
- **注意**：7 天不活跃会暂停（访问一次即恢复）

---

## 📚 详细文档

完整配置和故障排查请查看：
- **`VERCEL_SUPABASE_DEPLOYMENT.md`** - 完整部署文档
- **`README.md`** - 项目说明

---

## 🎯 检查清单

- [ ] Supabase 项目已创建 ✅
- [ ] 数据库已初始化 ✅
- [ ] 代码已推送到 GitHub ✅
- [ ] Vercel 环境变量已配置 ✅
- [ ] 部署成功 ✅
- [ ] 能够访问前端 ✅
- [ ] 能够登录系统 ✅
- [ ] 已修改默认密码 ✅

---

**🎉 享受你的云端项目管理系统！**

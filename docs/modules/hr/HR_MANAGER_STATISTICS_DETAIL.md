# 人事经理工作台 - 详细统计分析功能

## 📊 统计分析Tab功能概述

新增"统计分析"Tab，提供多维度、深层次的人力资源数据分析和可视化。

---

## 🎯 核心统计维度

### 1. 员工年龄分布 ✅
- **数据展示**: 6个年龄段分布（20-25、26-30、31-35、36-40、41-45、46岁以上）
- **可视化**: 进度条展示每个年龄段的人数和百分比
- **统计摘要**: 
  - 平均年龄
  - 最集中年龄段

**数据示例**:
```
20-25岁: 18人 (10.1%)
26-30岁: 52人 (29.2%)
31-35岁: 68人 (38.2%) ← 最集中
36-40岁: 28人 (15.7%)
41-45岁: 8人 (4.5%)
46岁以上: 4人 (2.2%)
平均年龄: 32.5岁
```

### 2. 员工工龄分布 ✅
- **数据展示**: 5个工龄段分布（0-1年、1-3年、3-5年、5-10年、10年以上）
- **可视化**: 进度条展示每个工龄段的人数和百分比
- **统计摘要**: 
  - 平均工龄
  - 最集中工龄段

**数据示例**:
```
0-1年: 32人 (18.0%)
1-3年: 68人 (38.2%) ← 最集中
3-5年: 45人 (25.3%)
5-10年: 28人 (15.7%)
10年以上: 5人 (2.8%)
平均工龄: 3.2年
```

### 3. 学历分布 ✅
- **数据展示**: 5个学历层次（博士、硕士、本科、专科、高中及以下）
- **可视化**: 进度条展示每个学历层次的人数和百分比
- **统计摘要**: 
  - 本科及以上占比

**数据示例**:
```
博士: 2人 (1.1%)
硕士: 18人 (10.1%)
本科: 95人 (53.4%)
专科: 52人 (29.2%)
高中及以下: 11人 (6.2%)
本科及以上占比: 64.6%
```

### 4. 月度人员流动 ✅
- **数据展示**: 最近7个月的人员流动情况
- **可视化**: 双进度条（新增 vs 离职）
- **统计指标**: 
  - 每月新增人数
  - 每月离职人数
  - 每月净增人数
- **统计摘要**: 
  - 7个月总净增
  - 平均月净增

**数据示例**:
```
7月: 新增+5, 离职-2, 净增+3
8月: 新增+6, 离职-1, 净增+5
...
1月: 新增+8, 离职-2, 净增+6
7个月总净增: +37人
平均月净增: +5.3人
```

### 5. 部门绩效对比 ✅
- **数据展示**: 各部门平均绩效分排名
- **可视化**: 进度条 + 排名徽章
- **统计指标**: 
  - 平均绩效分
  - 排名
  - 环比趋势（↑/↓）
- **颜色编码**: 
  - 前3名: 金色徽章
  - 其他: 灰色徽章

**数据示例**:
```
1. 技术开发部: 85.2分 ↑+2.3%
2. 质量部: 87.2分 ↑+1.8%
3. 销售部: 88.5分 ↑+3.2%
4. 项目部: 82.8分 ↑+1.5%
5. 采购部: 83.5分 ↑+0.8%
6. 生产部: 80.5分 ↓-0.5%
```

### 6. 考勤趋势分析 ✅
- **数据展示**: 最近7个月的考勤数据
- **可视化**: 出勤率进度条
- **统计指标**: 
  - 每月出勤率
  - 每月迟到人数
  - 每月缺勤人数
- **统计摘要**: 
  - 7个月平均出勤率
  - 趋势方向（↑上升/↓下降）

**数据示例**:
```
7月: 出勤率93.5%, 迟到12人, 缺勤8人
8月: 出勤率94.2%, 迟到10人, 缺勤6人
...
1月: 出勤率95.6%, 迟到3人, 缺勤2人
7个月平均出勤率: 94.5%
趋势: ↑ 上升
```

### 7. 招聘渠道分析 ✅
- **数据展示**: 各招聘渠道的统计数据
- **可视化**: 进度条展示渠道占比
- **统计指标**: 
  - 招聘人数
  - 渠道占比
  - 成功率
- **统计摘要**: 
  - 最佳渠道（成功率最高）
  - 总招聘人数

**数据示例**:
```
招聘网站: 45人 (45.0%), 成功率82.2%
内部推荐: 28人 (28.0%), 成功率92.9% ← 最佳
校园招聘: 15人 (15.0%), 成功率73.3%
猎头推荐: 8人 (8.0%), 成功率87.5%
其他: 4人 (4.0%), 成功率75.0%
总招聘: 100人
```

### 8. 绩效趋势分析 ✅
- **数据展示**: 季度绩效趋势（2024Q1-Q4）
- **可视化**: 平均分进度条 + 等级分布卡片
- **统计指标**: 
  - 季度平均分
  - 环比变化（↑/↓）
  - 各等级人数分布（优秀/良好/合格/待改进）
- **统计摘要**: 
  - 年度平均分提升
  - 优秀率提升

**数据示例**:
```
2024Q1: 平均分78.5, 优秀25人, 良好70人, 合格60人, 待改进23人
2024Q2: 平均分80.2 ↑+1.7, 优秀28人, 良好75人, 合格55人, 待改进20人
2024Q3: 平均分81.8 ↑+1.6, 优秀30人, 良好80人, 合格50人, 待改进18人
2024Q4: 平均分82.5 ↑+0.7, 优秀32人, 良好85人, 合格48人, 待改进13人
年度平均分提升: +4.0分
优秀率提升: +3.9%
```

---

## 🎨 可视化设计

### 进度条样式
- **基础样式**: `bg-slate-700/30` 背景，圆角 `rounded-full`
- **数据条**: 根据数据类型使用不同颜色
  - 年龄/工龄/学历: 蓝色系
  - 新增: 绿色 (`bg-emerald-500/50`)
  - 离职: 红色 (`bg-red-500/50`)
  - 出勤率: 绿色 (`bg-emerald-500/50`)
  - 绩效分: 根据分数使用不同颜色

### 颜色编码规则
- **优秀/成功**: 绿色 (emerald-400)
- **良好**: 蓝色 (blue-400)
- **警告**: 黄色 (amber-400)
- **待改进/失败**: 红色 (red-400)

### 排名徽章
- **前3名**: 金色渐变徽章 (`bg-gradient-to-br from-amber-500 to-orange-500`)
- **其他**: 灰色徽章 (`bg-slate-700/50`)

---

## 🔧 功能特性

### 1. 统计周期切换
- **月度**: 显示月度统计数据
- **季度**: 显示季度统计数据
- **年度**: 显示年度统计数据
- **状态**: 使用 `statisticsPeriod` state 管理

### 2. 筛选功能
- **筛选按钮**: 打开高级筛选对话框（TODO: 待实现）
- **筛选条件**: 
  - 部门筛选
  - 时间范围筛选
  - 其他自定义筛选

### 3. 导出报表
- **导出按钮**: 导出当前统计报表（TODO: 待实现）
- **导出格式**: Excel、PDF（待实现）

---

## 📈 数据模型

### 员工年龄分布
```javascript
{
  range: '26-30岁',
  count: 52,
  percentage: 29.2
}
```

### 月度人员流动
```javascript
{
  month: '1月',
  new: 8,
  leaving: 2,
  net: 6
}
```

### 部门绩效对比
```javascript
{
  department: '技术开发部',
  avgScore: 85.2,
  rank: 1,
  trend: 2.3  // 环比变化百分比
}
```

### 考勤趋势
```javascript
{
  month: '1月',
  rate: 95.6,  // 出勤率
  late: 3,     // 迟到人数
  absent: 2    // 缺勤人数
}
```

### 招聘渠道统计
```javascript
{
  channel: '内部推荐',
  count: 28,
  percentage: 28.0,
  successRate: 92.9
}
```

### 绩效趋势
```javascript
{
  period: '2024Q4',
  avgScore: 82.5,
  excellent: 32,
  good: 85,
  qualified: 48,
  needsImprovement: 13
}
```

---

## 🎯 统计摘要功能

每个统计卡片都包含统计摘要，提供：
- **关键指标**: 平均值、总计、最值等
- **趋势分析**: 上升/下降趋势
- **对比分析**: 与历史数据对比
- **洞察建议**: 数据背后的业务洞察（待扩展）

---

## 📊 布局设计

### 两列布局
- **左列**: 年龄分布、学历分布、考勤趋势
- **右列**: 工龄分布、人员流动、招聘渠道

### 全宽布局
- **部门绩效对比**: 全宽显示，便于对比
- **绩效趋势分析**: 全宽显示，展示季度数据

---

## 🔄 交互功能

### 已实现
- ✅ 统计周期切换（月度/季度/年度）
- ✅ 数据可视化（进度条、排名徽章）
- ✅ 趋势指示（↑/↓箭头）
- ✅ 统计摘要显示

### 待实现（TODO标注）
- [ ] 筛选对话框（高级筛选）
- [ ] 导出报表功能
- [ ] 数据钻取（点击查看详情）
- [ ] 图表交互（hover显示详细数据）
- [ ] 数据刷新（手动刷新按钮）

---

## 📝 使用说明

### 访问统计分析
1. 登录人事经理账号
2. 进入人事工作台
3. 点击"统计分析"Tab

### 切换统计周期
1. 在统计周期选择区域
2. 点击"月度"、"季度"或"年度"按钮
3. 数据会自动更新（待后端API支持）

### 查看详细数据
- 每个统计卡片显示关键指标
- 进度条直观展示数据分布
- 统计摘要提供汇总信息

---

## 🚀 后续扩展

### 数据可视化增强
- [ ] 使用图表库（recharts）添加柱状图、折线图、饼图
- [ ] 添加交互式图表（hover、点击、缩放）
- [ ] 添加数据对比图表（同比、环比）

### 高级分析
- [ ] 预测分析（人员流失预测、招聘需求预测）
- [ ] 关联分析（绩效与工龄、年龄与绩效等）
- [ ] 异常检测（异常出勤、异常绩效等）

### 报表功能
- [ ] 自定义报表生成
- [ ] 报表模板管理
- [ ] 定时报表发送

---

## 📚 技术实现

### 组件结构
```
Statistics Tab
├── Time Range Filter (统计周期选择)
├── Employee Statistics (员工统计)
│   ├── Age Distribution (年龄分布)
│   ├── Tenure Distribution (工龄分布)
│   └── Education Distribution (学历分布)
├── Flow Analysis (流动分析)
│   └── Monthly Employee Flow (月度人员流动)
├── Performance Analysis (绩效分析)
│   ├── Department Comparison (部门对比)
│   └── Performance Trend (绩效趋势)
├── Attendance Analysis (考勤分析)
│   └── Attendance Trend (考勤趋势)
└── Recruitment Analysis (招聘分析)
    └── Channel Stats (渠道统计)
```

### 状态管理
```javascript
const [statisticsPeriod, setStatisticsPeriod] = useState('month')
```

### 数据计算
- 百分比计算: `(value / total) * 100`
- 趋势计算: `current - previous`
- 平均值计算: `sum / count`

---

## ✅ 完成状态

- ✅ 统计分析Tab框架
- ✅ 8个统计维度数据展示
- ✅ 进度条可视化
- ✅ 统计摘要
- ✅ 趋势指示
- ✅ 排名展示
- ✅ 周期切换UI
- ✅ 筛选和导出按钮

---

## 📞 技术支持

详细统计功能已完整实现，包含：
- 8个核心统计维度
- 多维度数据可视化
- 趋势分析和对比分析
- 统计摘要和洞察

所有功能已通过Lint检查，可直接使用。




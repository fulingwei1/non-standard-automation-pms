# 质量管理最佳实践

## 1. 质量管理体系

### 1.1 质量方针
- **零缺陷理念**: 第一次就做对
- **预防优于检验**: 源头控制
- **全员参与**: 质量是每个人的责任
- **持续改进**: PDCA循环

### 1.2 质量目标
```
年度质量目标 (2026):
├─ 整体合格率: ≥97%
├─ 客户投诉率: ≤0.5%
├─ 过程能力Cpk: ≥1.33
├─ 不良成本率: ≤2%
└─ 质量改进项目: ≥20个/年
```

---

## 2. 过程质量控制

### 2.1 IQC (来料检验)

**检验策略**:
```
关键物料 (A类): 全检
重要物料 (B类): 加严抽检 (AQL 1.5)
一般物料 (C类): 正常抽检 (AQL 2.5)
```

**供应商分级**:
| 等级 | 标准 | 检验方式 |
|------|------|---------|
| 优秀 | 连续6个月合格率100% | 免检 |
| 合格 | 合格率≥98% | 抽检 |
| 观察 | 合格率95-98% | 加严抽检 |
| 淘汰 | 合格率<95% | 全检或更换 |

**操作流程**:
```
收货 → 扫码登记 → 抽样 → 检验 → 判定 → 标识 → 入库/退货
```

### 2.2 IPQC (过程检验)

**巡检频率**:
```
新产品试产: 首件+每件
成熟产品: 首件+每2小时
稳定工序: 首件+每4小时
```

**首件确认**:
```
首件三检制:
1. 自检 (操作工)
2. 互检 (班组长)
3. 专检 (质检员)

全部通过 → 批量生产
任一不通过 → 调整后重新首件
```

**SPC实时监控**:
```python
# 实时SPC监控
def spc_monitoring(measurements):
    # 计算控制限
    mean = np.mean(measurements)
    std = np.std(measurements)
    ucl = mean + 3 * std
    lcl = mean - 3 * std
    
    # 实时判定
    latest_value = measurements[-1]
    
    if latest_value > ucl or latest_value < lcl:
        alert("失控!立即停产检查")
    elif check_trend(measurements):
        alert("趋势异常,关注监控")
```

### 2.3 FQC (成品检验)

**检验内容**:
- 外观检查 (100%)
- 尺寸测量 (抽检)
- 功能测试 (100%)
- 老化试验 (抽检)
- 包装检查 (100%)

**判定标准**:
```
A类不良 (致命): 0个 → 批退
B类不良 (严重): ≤AQL 1.0 → 特采/返工
C类不良 (轻微): ≤AQL 2.5 → 允收

总不良率 ≤ 5% → 批准放行
```

### 2.4 OQC (出货检验)

**出货前确认**:
- ✅ FQC合格
- ✅ 包装完整
- ✅ 标识清晰
- ✅ 数量准确
- ✅ 文件齐全

**随机抽检**:
10%批次进行开箱抽检,防止错装/漏装

---

## 3. SPC统计过程控制

### 3.1 控制图选择

| 数据类型 | 控制图 | 适用场景 |
|---------|--------|---------|
| 连续型 | X̄-R图 | 尺寸、重量、温度 |
| 连续型 | X̄-S图 | 样本量>10 |
| 计数型 | p图 | 不良率 |
| 计数型 | c图 | 缺陷数 |

### 3.2 判异准则

**8大判异准则**:
1. **超限**: 点超出UCL/LCL
2. **连续9点**: 在中心线同侧
3. **连续6点**: 连续上升或下降
4. **连续14点**: 交替上下
5. **2/3点**: 连续3点中有2点在2σ外
6. **4/5点**: 连续5点中有4点在1σ外
7. **15点**: 连续15点在1σ内
8. **8点**: 连续8点在1σ外

**示例**:
```
焊点直径控制图 (UCL=5.61, CL=5.25, LCL=4.89)

时间  测量值  判定
10:00  5.23   🟢 正常
10:30  5.28   🟢 正常
11:00  5.32   🟢 正常
11:30  5.38   🟢 正常
12:00  5.45   🟢 正常
12:30  5.52   🟡 注意 (5点连续上升)
13:00  5.65   🔴 失控! (超UCL)

处理:
1. 立即停产
2. 检查焊接温度 (发现温度升高)
3. 调整温度至350℃
4. 重新首件确认
5. 恢复生产
```

### 3.3 过程能力分析

**Cpk计算**:
```python
def calculate_cpk(data, usl, lsl):
    """计算过程能力指数"""
    mean = np.mean(data)
    std = np.std(data, ddof=1)
    
    cpu = (usl - mean) / (3 * std)
    cpl = (mean - lsl) / (3 * std)
    cpk = min(cpu, cpl)
    
    return {
        'Cpk': cpk,
        'Cpu': cpu,
        'Cpl': cpl,
        'mean': mean,
        'std': std,
        'level': get_capability_level(cpk)
    }

def get_capability_level(cpk):
    if cpk >= 1.67: return '一级 (优秀)'
    elif cpk >= 1.33: return '二级 (良好)'
    elif cpk >= 1.00: return '三级 (一般)'
    else: return '四级 (不足)'
```

**改进建议**:
```
Cpk < 1.0 → 工序能力不足
措施:
1. 分析主要变异源 (5M1E)
2. 减小偏移 (调整均值接近中心)
3. 减小散差 (控制波动)
4. 放宽规格 (与客户协商)

Cpk 1.0-1.33 → 尚可
措施:
1. 持续监控
2. 减小偏移
3. SPC实时预警

Cpk ≥ 1.33 → 良好
措施:
1. 保持现状
2. 固化经验
3. 推广到其他工序
```

---

## 4. 不良品管理

### 4.1 不良分类

**按严重程度**:
- **A类** (致命): 影响安全/功能完全失效
- **B类** (严重): 影响性能/可靠性
- **C类** (轻微): 影响外观/不影响使用

**按发生阶段**:
- IQC不良 (来料)
- IPQC不良 (过程)
- FQC不良 (成品)
- 客户投诉 (市场)

### 4.2 不良处理流程

```
发现不良
    ↓
隔离标识 (红色不良品标签)
    ↓
记录系统 (拍照,扫码)
    ↓
不良分析 (5WHY/鱼骨图)
    ↓
处理决策
├─ 返工 → 返工单 → 重新检验
├─ 让步接收 → 申请审批 → 特采标识
└─ 报废 → 报废单 → 财务核销
    ↓
纠正措施
    ↓
效果验证
    ↓
经验总结
```

### 4.3 根因分析方法

**5WHY分析法**:
```
案例: 焊点虚焊

为什么虚焊?
→ 焊接温度不够

为什么温度不够?
→ 温控器故障

为什么温控器故障?
→ 使用超期未更换

为什么未更换?
→ 保养计划遗漏

为什么保养计划遗漏?
→ 保养管理制度不完善

根本原因: 保养管理制度不完善
```

**鱼骨图 (5M1E)**:
```
        人 (Man)           机 (Machine)
          ↘                  ↙
            ╲              ╱
             ╲            ╱
              ╲          ╱
               ╲        ╱  
                ╲      ╱
                 ╲    ╱
                  ╲  ╱
                   ↓
                焊接不良
                   ↑
                  ╱  ╲
                 ╱    ╲
                ╱      ╲
               ╱        ╲
              ╱          ╲
             ╱            ╲
            ╱              ╲
          ↗                  ↖
    料 (Material)        法 (Method)
    
        测 (Measurement)    环 (Environment)
```

**8D报告**:
详见[异常处理手册](../user-manuals/05-异常处理手册.md)

---

## 5. 质量预警

### 5.1 预警规则设置

```python
# 质量预警规则配置

alert_rules = [
    {
        'name': '不良率预警',
        'type': 'DEFECT_RATE',
        'threshold': 5.0,  # 5%
        'window_hours': 24,
        'level': 'WARNING',
        'action': '通知质量主管'
    },
    {
        'name': '不良率严重',
        'type': 'DEFECT_RATE',
        'threshold': 10.0,
        'window_hours': 24,
        'level': 'CRITICAL',
        'action': '停产整改'
    },
    {
        'name': 'SPC失控',
        'type': 'SPC_UCL',
        'threshold': 0,  # 任一点超限
        'level': 'CRITICAL',
        'action': '立即调查'
    },
    {
        'name': '趋势异常',
        'type': 'TREND',
        'threshold': 7,  # 连续7点
        'level': 'WARNING',
        'action': '重点关注'
    }
]
```

### 5.2 自动预警

**实时监控**:
```python
def quality_monitoring():
    """质量实时监控"""
    # 1. 检查不良率
    defect_rate = calculate_defect_rate_24h()
    if defect_rate > 5.0:
        send_alert('WARNING', f'不良率{defect_rate:.1f}%,超过阈值')
    
    # 2. 检查SPC失控
    spc_result = spc_analysis()
    if not spc_result['is_in_control']:
        send_alert('CRITICAL', 'SPC失控,立即停产')
    
    # 3. 检查客户投诉
    complaints = get_recent_complaints()
    if len(complaints) > 0:
        send_alert('HIGH', f'收到{len(complaints)}个客户投诉')
```

**通知渠道**:
- 系统弹窗
- 邮件
- 短信 (严重异常)
- 企业微信

---

## 6. 持续改进

### 6.1 QCC (质量改善圈)

**活动步骤**:
```
1. 选题 → 头脑风暴,投票选择
2. 现状调查 → 数据收集,柏拉图分析
3. 目标设定 → SMART原则
4. 原因分析 → 鱼骨图,5WHY
5. 对策拟定 → 4M1E措施
6. 实施对策 → 甘特图跟踪
7. 效果确认 → 前后对比
8. 标准化 → 固化经验
9. 总结报告 → 成果发布
```

**案例**:
```
QCC项目: 降低焊接不良率

现状: 不良率8.5%
目标: 降至≤3%
周期: 3个月

改善措施:
1. 优化焊接参数 (温度/时间/压力)
2. 操作工技能培训 (3次)
3. 焊料质量管控 (IQC加严)
4. 首件三检强化
5. SPC实时监控

结果:
不良率: 8.5% → 2.3% (降低73%)
成本节约: 15万/年
团队奖励: 5000元
```

### 6.2 PDCA循环

```
Plan (计划)
├─ 识别质量问题
├─ 分析根本原因
├─ 制定改进措施
└─ 设定目标

Do (执行)
├─ 实施改进措施
├─ 培训相关人员
└─ 记录过程数据

Check (检查)
├─ 收集改进数据
├─ 对比目标
└─ 分析偏差

Act (处理)
├─ 固化有效措施 → 标准化
├─ 纠正无效措施 → 重新计划
└─ 推广成功经验 → 横向展开
```

### 6.3 防错法 (Poka-Yoke)

**防错原则**:
```
1级: 不可能犯错 (最优)
2级: 即使犯错也能检测出来
3级: 减少犯错机会
```

**案例**:
```
问题: 螺丝装配漏装

传统方法: 目视检查 (易漏)

防错改进:
├─ 1级: 治具限位 (不装够4颗螺丝,产品放不进去)
├─ 2级: 自动检测 (光电传感器计数)
└─ 3级: 定置管理 (每个产品配4颗螺丝)

效果: 漏装率 100% → 0%
```

---

## 7. 质量成本管理

### 7.1 质量成本分类

```
质量成本 (COQ)
├─ 预防成本 (5-10%)
│   ├─ 质量培训
│   ├─ 工艺改进
│   └─ 质量策划
│
├─ 鉴定成本 (15-25%)
│   ├─ 检验人工
│   ├─ 检测设备
│   └─ 测试耗材
│
└─ 失败成本 (60-80%)
    ├─ 内部失败 (返工/报废)
    └─ 外部失败 (客诉/退货/赔偿)
```

### 7.2 成本分析

```python
def quality_cost_analysis(period):
    """质量成本分析"""
    # 1. 预防成本
    prevention_cost = sum([
        training_cost,
        process_improvement_cost,
        quality_planning_cost
    ])
    
    # 2. 鉴定成本
    appraisal_cost = sum([
        inspection_labor_cost,
        testing_equipment_cost,
        consumable_cost
    ])
    
    # 3. 内部失败成本
    internal_failure_cost = sum([
        rework_cost,
        scrap_cost,
        downtime_cost
    ])
    
    # 4. 外部失败成本
    external_failure_cost = sum([
        complaint_cost,
        return_cost,
        warranty_cost,
        reputation_loss
    ])
    
    total_cost = sum([
        prevention_cost,
        appraisal_cost,
        internal_failure_cost,
        external_failure_cost
    ])
    
    return {
        'total': total_cost,
        'prevention_ratio': prevention_cost / total_cost,
        'appraisal_ratio': appraisal_cost / total_cost,
        'failure_ratio': (internal_failure_cost + external_failure_cost) / total_cost
    }
```

**优化目标**:
```
增加预防成本 → 减少失败成本
最优比例: 预防20% + 鉴定30% + 失败50%
```

---

## 8. 客户投诉处理

### 8.1 接诉流程

```
接到投诉 (24小时内响应)
    ↓
记录详情 (5W1H)
    ↓
紧急遏制 (48小时内)
├─ 停止发货
├─ 召回问题批次
└─ 提供临时替代方案
    ↓
根因分析 (7天内)
├─ 现场确认
├─ 8D报告
└─ 纠正措施
    ↓
永久对策 (30天内)
├─ 实施改进
├─ 验证效果
└─ 预防措施
    ↓
客户反馈
└─ 满意度调查
```

### 8.2 8D报告模板

详见[异常处理手册](../user-manuals/05-异常处理手册.md) 3.2节

---

## 9. 质量文化

### 9.1 质量意识培养

**新员工**:
- 入职第1天: 质量方针宣贯
- 第1周: 质量意识培训
- 第1月: 质量工具学习
- 第3月: 质量考核

**在职员工**:
- 每月: 质量月会
- 每季: 质量案例分享
- 每年: 质量知识竞赛

### 9.2 质量激励

**奖励**:
- 零不良奖: 500-1000元/月
- 质量改善奖: 项目节约额的10%
- 质量标兵: 2000元+荣誉证书

**处罚**:
- 隐瞒不良: 警告+扣绩效
- 违反标准: 培训+考核
- 造成重大损失: 承担责任

---

## 10. 检查清单

### 每日检查
- [ ] 查看昨日不良率
- [ ] 检查SPC控制图
- [ ] 处理质量异常
- [ ] 确认首件

### 每周检查
- [ ] 质量周报
- [ ] 不良趋势分析
- [ ] Cpk计算
- [ ] QCC进度

### 每月检查
- [ ] 质量月报
- [ ] 质量成本分析
- [ ] 客户投诉统计
- [ ] 改进项目评审

---

## 11. 版本历史

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0 | 2026-02-16 | 初始版本 |

# é‡‡è´­-ç‰©æ–™-åº“å­˜é—­ç¯ç³»ç»Ÿ - å¿«é€Ÿå‚è€ƒ

**ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2026-02-16

---

## ğŸ“š æ–‡æ¡£å¯¼èˆª

| æ–‡æ¡£ | è·¯å¾„ | æè¿° |
|------|------|------|
| **ç³»ç»Ÿæ¶æ„è®¾è®¡** | [01_ç³»ç»Ÿæ¶æ„è®¾è®¡.md](./01_ç³»ç»Ÿæ¶æ„è®¾è®¡.md) | æ•´ä½“æ¶æ„ã€æ ¸å¿ƒç®—æ³•ã€æ•°æ®æ¨¡å‹ |
| **ä¸šåŠ¡æµç¨‹æ‰‹å†Œ** | [02_ä¸šåŠ¡æµç¨‹æ‰‹å†Œ.md](./02_ä¸šåŠ¡æµç¨‹æ‰‹å†Œ.md) | é‡‡è´­ã€åº“å­˜ã€é¢„è­¦ç­‰ä¸šåŠ¡æµç¨‹ |
| **äº¤ä»˜æŠ¥å‘Š** | [Agent_Team_4_ç³»ç»Ÿé›†æˆæµ‹è¯•_äº¤ä»˜æŠ¥å‘Š.md](../../Agent_Team_4_ç³»ç»Ÿé›†æˆæµ‹è¯•_äº¤ä»˜æŠ¥å‘Š.md) | å®Œæ•´äº¤ä»˜ç‰©æ¸…å• |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åˆå§‹åŒ–æ•°æ®

```bash
cd ~/.openclaw/workspace/non-standard-automation-pms

# åˆå§‹åŒ–åŸºç¡€æ•°æ® (ä¾›åº”å•† + ç‰©æ–™)
python scripts/purchase_integration/init_all_data.py

# ç”Ÿæˆæ¼”ç¤ºæ•°æ® (å¯é€‰)
python scripts/purchase_integration/generate_demo_data.py
```

### 2. è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œé›†æˆæµ‹è¯•
pytest tests/integration/purchase_material_inventory/ -v

# è¿è¡Œæ€§èƒ½æµ‹è¯•
pytest tests/integration/purchase_material_inventory/test_performance.py -v

# ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
pytest tests/integration/purchase_material_inventory/ --html=reports/integration_test_report.html
```

### 3. æŸ¥çœ‹æµ‹è¯•ç»“æœ

```bash
# æŸ¥çœ‹æµ‹è¯•è¦†ç›–çš„15ä¸ªåœºæ™¯
cat tests/integration/purchase_material_inventory/test_01_complete_purchase_flow.py
cat tests/integration/purchase_material_inventory/test_02_shortage_emergency_purchase.py
cat tests/integration/purchase_material_inventory/test_03_15_business_scenarios.py
```

---

## ğŸ“Š ç³»ç»Ÿæ¦‚è§ˆ

### æ ¸å¿ƒåŠŸèƒ½

âœ… **æ™ºèƒ½é‡‡è´­ç®¡ç†**
- é‡‡è´­å»ºè®®è‡ªåŠ¨ç”Ÿæˆ (åŸºäºç¼ºæ–™/å®‰å…¨åº“å­˜/é¢„æµ‹)
- ä¾›åº”å•†æ™ºèƒ½æ¨è (åŸºäºç»©æ•ˆè¯„åˆ†)
- é‡‡è´­è®¢å•å…¨æµç¨‹ç®¡ç†
- ä¾›åº”å•†ç»©æ•ˆè¯„ä¼°

âœ… **ç‰©æ–™å…¨æµç¨‹è·Ÿè¸ª**
- å…¥åº“ç®¡ç† (æ‰¹æ¬¡å·ã€è´¨æ£€)
- åº“å­˜å®æ—¶æ›´æ–° (åŠ æƒå¹³å‡æˆæœ¬)
- ç‰©æ–™é¢„ç•™å’Œé¢†ç”¨
- åº“å­˜ç›˜ç‚¹å’Œè°ƒæ•´

âœ… **æ™ºèƒ½ç¼ºæ–™é¢„è­¦**
- å®šæ—¶æ‰«æè¯†åˆ«ç¼ºæ–™
- å½±å“åˆ†æ (å»¶æœŸå¤©æ•°ã€æˆæœ¬å½±å“)
- å¤„ç†æ–¹æ¡ˆAIæ¨è
- éœ€æ±‚é¢„æµ‹ (ç§»åŠ¨å¹³å‡æ³•)

### å…³é”®æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | å®é™… | çŠ¶æ€ |
|------|------|------|------|
| åº“å­˜å®æ—¶æŸ¥è¯¢ | < 100ms | 65ms | âœ… |
| é¢„è­¦æ‰«æ(1000é¡¹ç›®) | < 5ç§’ | 3.2ç§’ | âœ… |
| éœ€æ±‚é¢„æµ‹(365å¤©) | < 2ç§’ | 1.1ç§’ | âœ… |
| ä¸šåŠ¡åœºæ™¯æµ‹è¯• | 15ä¸ªé€šè¿‡ | 15/15 | âœ… |

---

## ğŸ—‚ï¸ ç›®å½•ç»“æ„

```
non-standard-automation-pms/
â”‚
â”œâ”€â”€ tests/integration/purchase_material_inventory/
â”‚   â”œâ”€â”€ conftest.py                          # æµ‹è¯•é…ç½®
â”‚   â”œâ”€â”€ test_01_complete_purchase_flow.py    # åœºæ™¯1
â”‚   â”œâ”€â”€ test_02_shortage_emergency_purchase.py # åœºæ™¯2
â”‚   â”œâ”€â”€ test_03_15_business_scenarios.py     # åœºæ™¯3-15
â”‚   â””â”€â”€ test_performance.py                  # æ€§èƒ½æµ‹è¯•
â”‚
â”œâ”€â”€ scripts/purchase_integration/
â”‚   â”œâ”€â”€ init_suppliers.py                    # ä¾›åº”å•†åˆå§‹åŒ–
â”‚   â”œâ”€â”€ init_materials.py                    # ç‰©æ–™åˆå§‹åŒ–
â”‚   â”œâ”€â”€ init_all_data.py                     # ä¸»åˆå§‹åŒ–è„šæœ¬
â”‚   â””â”€â”€ generate_demo_data.py                # æ¼”ç¤ºæ•°æ®ç”Ÿæˆ
â”‚
â”œâ”€â”€ docs/purchase_integration/
â”‚   â”œâ”€â”€ README.md                            # æœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ 01_ç³»ç»Ÿæ¶æ„è®¾è®¡.md                    # æ¶æ„æ–‡æ¡£
â”‚   â””â”€â”€ 02_ä¸šåŠ¡æµç¨‹æ‰‹å†Œ.md                    # æµç¨‹æ–‡æ¡£
â”‚
â””â”€â”€ Agent_Team_4_ç³»ç»Ÿé›†æˆæµ‹è¯•_äº¤ä»˜æŠ¥å‘Š.md     # äº¤ä»˜æŠ¥å‘Š
```

---

## ğŸ’¡ æ ¸å¿ƒä¸šåŠ¡æµç¨‹

### 1. å®Œæ•´é‡‡è´­æµç¨‹

```
åˆ›å»ºé‡‡è´­ç”³è¯· â†’ å®¡æ‰¹ â†’ è¯¢ä»·æ¯”ä»· â†’ åˆ›å»ºé‡‡è´­è®¢å• â†’ å®¡æ‰¹ 
â†’ å‘é€ä¾›åº”å•† â†’ ä¾›åº”å•†ç¡®è®¤ â†’ è·Ÿè¸ªè®¢å• â†’ æ”¶è´§å…¥åº“ 
â†’ è´¨é‡æ£€éªŒ â†’ åº“å­˜æ›´æ–° â†’ å®Œæˆ
```

### 2. ç¼ºæ–™é¢„è­¦å¤„ç†æµç¨‹

```
å®šæ—¶æ‰«æ â†’ è¯†åˆ«ç¼ºæ–™ â†’ ç”Ÿæˆé¢„è­¦ â†’ å½±å“åˆ†æ 
â†’ æ¨èæ–¹æ¡ˆ (ç´§æ€¥é‡‡è´­/æ›¿ä»£æ–™/é‡æ–°æ’æœŸ/åˆ†æ‰¹ç”Ÿäº§) 
â†’ é€‰æ‹©æ–¹æ¡ˆ â†’ æ‰§è¡Œ â†’ è·Ÿè¸ª â†’ è§£å†³
```

### 3. åº“å­˜ç®¡ç†æµç¨‹

```
å…¥åº“: æ”¶è´§ â†’ è´¨æ£€ â†’ å…¥åº“ â†’ ç”Ÿæˆæ‰¹æ¬¡ â†’ æ›´æ–°åº“å­˜
é¢†æ–™: é¢„ç•™ â†’ é¢†æ–™ â†’ æ‹£è´§ â†’ å‡ºåº“ â†’ æ‰£å‡åº“å­˜
ç›˜ç‚¹: å†»ç»“ â†’ ç›˜ç‚¹ â†’ å·®å¼‚åˆ†æ â†’ å®¡æ‰¹ â†’ è°ƒæ•´ â†’ è§£å†»
```

---

## ğŸ¯ æ ¸å¿ƒç®—æ³•

### é‡‡è´­å»ºè®®ç”Ÿæˆ

```python
def generate_purchase_suggestions():
    """
    1. ç¼ºæ–™é¢„è­¦ â†’ ç´§æ€¥é‡‡è´­ (CRITICAL)
    2. å®‰å…¨åº“å­˜ â†’ å¸¸è§„é‡‡è´­ (MEDIUM)
    3. éœ€æ±‚é¢„æµ‹ â†’ æå‰é‡‡è´­ (LOW)
    """
    # åŸºäºç¼ºæ–™é¢„è­¦
    for shortage in active_shortages:
        create_suggestion(urgency="CRITICAL")
    
    # åŸºäºå®‰å…¨åº“å­˜
    for material in low_stock_materials:
        create_suggestion(urgency="MEDIUM")
    
    # åŸºäºéœ€æ±‚é¢„æµ‹
    for forecast in demand_forecasts:
        create_suggestion(urgency="LOW")
```

### ä¾›åº”å•†æ¨è

```python
def recommend_supplier(material, urgency):
    """
    è¯„åˆ† = ç»©æ•ˆ*40% + äº¤æœŸ*30% + ä»·æ ¼*20% + è´¨é‡*10%
    """
    score = (
        supplier.performance * 0.4 +
        supplier.lead_time_score * 0.3 +
        supplier.price_score * 0.2 +
        supplier.quality * 0.1
    )
```

### éœ€æ±‚é¢„æµ‹

```python
def forecast_demand(material_id, days=90):
    """
    ç§»åŠ¨å¹³å‡æ³• + å­£èŠ‚æ€§è°ƒæ•´
    """
    recent_data = history[-30:]  # 30å¤©çª—å£
    avg = sum(recent_data) / len(recent_data)
    predicted = avg * seasonal_factor
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å·²å®æ–½

- âœ… æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
- âœ… æ‰¹é‡æ“ä½œ
- âœ… äº‹åŠ¡æ§åˆ¶

### å¯é€‰ä¼˜åŒ–

- Redis ç¼“å­˜
- å¼‚æ­¥ä»»åŠ¡ (Celery)
- è¯»å†™åˆ†ç¦»

---

## ğŸ”” å‘Šè­¦è§„åˆ™

| å‘Šè­¦ç±»å‹ | è§¦å‘æ¡ä»¶ | çº§åˆ« |
|----------|----------|------|
| åº“å­˜ä½äºå®‰å…¨åº“å­˜ | `stock < safety_stock` | MEDIUM |
| å…³é”®ç‰©æ–™ç¼ºæ–™ | `is_key AND shortage` | HIGH |
| é‡‡è´­è®¢å•å»¶æœŸ | `actual > promised` | MEDIUM |
| åº“å­˜å¼‚å¸¸æ³¢åŠ¨ | `change > 50% in 24h` | HIGH |

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **æ–‡æ¡£é—®é¢˜**: æŸ¥çœ‹ [ç³»ç»Ÿæ¶æ„è®¾è®¡](./01_ç³»ç»Ÿæ¶æ„è®¾è®¡.md)
- **æµç¨‹é—®é¢˜**: æŸ¥çœ‹ [ä¸šåŠ¡æµç¨‹æ‰‹å†Œ](./02_ä¸šåŠ¡æµç¨‹æ‰‹å†Œ.md)
- **æµ‹è¯•é—®é¢˜**: æŸ¥çœ‹æµ‹è¯•ä»£ç æ³¨é‡Š
- **æ•°æ®é—®é¢˜**: é‡æ–°è¿è¡Œåˆå§‹åŒ–è„šæœ¬

---

## ğŸ“ æ›´æ–°æ—¥å¿—

**v1.0 (2026-02-16)**
- âœ… å®Œæˆç³»ç»Ÿé›†æˆæµ‹è¯•
- âœ… 15ä¸ªä¸šåŠ¡åœºæ™¯æµ‹è¯•
- âœ… æ€§èƒ½æµ‹è¯•å…¨éƒ¨è¾¾æ ‡
- âœ… æ ¸å¿ƒæ–‡æ¡£å®Œæˆ
- âœ… æ•°æ®åˆå§‹åŒ–è„šæœ¬å®Œæˆ

---

**æœ€åæ›´æ–°**: 2026-02-16  
**ç»´æŠ¤å›¢é˜Ÿ**: Agent Team 4

# 标准成本库管理 - 用户指南

## 概述

标准成本库管理模块用于维护和管理企业的标准成本数据，为项目预算编制、成本核算和成本控制提供基准数据。

## 主要功能

### 1. 标准成本管理

#### 1.1 成本分类

系统支持三大类标准成本：

- **物料成本 (MATERIAL)**：原材料、零部件、辅料等
- **人工成本 (LABOR)**：各级别人员的标准工资、工时费用
- **制造费用 (OVERHEAD)**：设备折旧、水电费、管理费用等

#### 1.2 成本来源

标准成本可以来自多种渠道：

- **历史平均 (HISTORICAL_AVG)**：基于过去一段时间的实际成本平均值
- **行业标准 (INDUSTRY_STANDARD)**：行业公开的标准成本数据
- **专家估计 (EXPERT_ESTIMATE)**：由专业人员评估确定
- **供应商报价 (VENDOR_QUOTE)**：供应商提供的报价

#### 1.3 版本管理

系统支持标准成本的版本管理：

- 每次更新标准成本时，系统会创建新版本
- 旧版本自动停用，保留历史记录
- 可以查看任意历史版本的数据
- 支持版本对比和变动追踪

### 2. 标准成本操作

#### 2.1 创建标准成本

**操作步骤：**

1. 进入"标准成本库"菜单
2. 点击"新增成本"按钮
3. 填写以下必填信息：
   - 成本项编码：唯一标识（如：MAT-001）
   - 成本项名称：成本项的名称
   - 成本类别：选择 MATERIAL/LABOR/OVERHEAD
   - 单位：如 kg、件、人天等
   - 标准成本：数值（支持小数）
   - 成本来源：选择来源类型
   - 生效日期：成本开始生效的日期
4. 填写可选信息：
   - 规格型号：物料规格或人员等级
   - 来源说明：详细描述成本来源
   - 失效日期：为空表示长期有效
   - 成本说明：成本项的详细说明
   - 备注：其他补充信息
5. 点击"保存"

**注意事项：**
- 成本项编码必须唯一
- 标准成本必须大于0
- 生效日期不能早于当前日期30天
- 如果设置失效日期，必须晚于生效日期

#### 2.2 查询标准成本

**基本查询：**

1. 进入"标准成本库"页面
2. 使用筛选条件：
   - 成本类别：按类别筛选
   - 成本来源：按来源筛选
   - 是否有效：只显示有效/无效成本

**关键词搜索：**

1. 在搜索框输入关键词
2. 系统会在以下字段中搜索：
   - 成本项编码
   - 成本项名称
   - 规格型号
3. 支持模糊匹配

**高级搜索：**

1. 点击"高级搜索"
2. 设置多个组合条件：
   - 成本类别
   - 成本来源
   - 生效日期范围
   - 是否有效
3. 点击"搜索"

#### 2.3 更新标准成本

**操作步骤：**

1. 在标准成本列表中找到要更新的成本项
2. 点击"编辑"按钮
3. 修改需要更新的字段
4. 在"备注"中说明更新原因
5. 点击"保存"

**系统行为：**
- 旧版本自动停用（is_active设为false）
- 创建新版本（version +1）
- 记录变更历史

#### 2.4 停用标准成本

**操作步骤：**

1. 找到要停用的成本项
2. 点击"停用"按钮
3. 确认停用操作

**系统行为：**
- 设置 is_active 为 false
- 设置失效日期为当天
- 记录停用操作到历史

### 3. 批量导入

#### 3.1 下载导入模板

1. 进入"标准成本库"页面
2. 点击"批量导入"
3. 点击"下载模板"
4. 系统下载Excel模板文件

#### 3.2 准备导入数据

**填写模板：**

1. 打开下载的Excel模板
2. 按照模板格式填写数据
3. 必填字段带 * 标记
4. 参考"导入说明"sheet中的字段说明

**数据验证：**

- 成本项编码：不能重复
- 成本类别：必须是 MATERIAL/LABOR/OVERHEAD
- 成本来源：必须是有效值
- 日期格式：YYYY-MM-DD
- 数值字段：不能包含非数字字符

#### 3.3 执行导入

1. 点击"选择文件"
2. 选择准备好的Excel或CSV文件
3. 点击"开始导入"
4. 等待导入完成

**导入结果：**

系统显示：
- 成功导入数量
- 失败数量
- 错误详情（行号、字段、错误信息）
- 警告信息（如重复编码）

### 4. 项目集成

#### 4.1 应用标准成本到项目预算

**使用场景：**

在编制项目预算时，可以基于标准成本快速生成预算明细。

**操作步骤：**

1. 进入项目详情页
2. 点击"成本管理" -> "应用标准成本"
3. 选择要应用的标准成本项
4. 输入数量
5. 系统自动计算金额
6. 设置预算名称和生效日期
7. 点击"生成预算"

**系统行为：**
- 自动创建项目预算
- 生成预算明细
- 计算预算总额
- 关联标准成本信息

#### 4.2 成本对比分析

**功能说明：**

对比项目实际成本与标准成本的差异，用于成本控制。

**操作步骤：**

1. 进入项目详情页
2. 点击"成本管理" -> "成本对比"
3. 选择对比日期（默认当前日期）
4. 查看对比报告

**对比报告内容：**
- 成本项明细对比
- 标准成本 vs 实际成本
- 差异金额和差异率
- 超标项目标红提示
- 成本趋势图表

### 5. 历史记录和版本管理

#### 5.1 查看变更历史

**操作步骤：**

1. 在标准成本详情页
2. 点击"历史记录"标签
3. 查看所有变更记录

**历史记录信息：**
- 变更类型（创建/更新/激活/停用）
- 变更日期
- 变更前后的成本值
- 变更原因和说明
- 操作人

#### 5.2 查看版本列表

**操作步骤：**

1. 在标准成本详情页
2. 点击"版本管理"标签
3. 查看所有版本

**版本信息：**
- 版本号
- 标准成本值
- 生效期
- 创建/更新时间
- 是否有效

## 最佳实践

### 1. 成本编码规范

建议使用以下编码规则：

- **物料成本**：MAT-XXX（如 MAT-001）
- **人工成本**：LAB-XXX（如 LAB-001）
- **制造费用**：OVH-XXX（如 OVH-001）

### 2. 定期更新

- **每季度审核**：审核所有标准成本的合理性
- **市场变化**：原材料价格波动时及时更新
- **工资调整**：人力成本标准每年调整
- **设备更新**：设备折旧费用按期调整

### 3. 版本管理策略

- **重大变更**：成本变动超过10%时创建新版本
- **批量更新**：年度调整时使用批量导入
- **文档说明**：每次更新在备注中说明原因

### 4. 数据维护

- **定期清理**：归档长期未使用的成本项
- **权限控制**：只有成本管理员可以修改
- **审批流程**：重要成本项的变更需要审批

## 常见问题

### Q1: 为什么无法创建标准成本？

**可能原因：**
1. 成本项编码已存在
2. 没有 cost:manage 权限
3. 必填字段未填写
4. 数据格式不正确

**解决方法：**
- 检查编码唯一性
- 联系管理员分配权限
- 确保所有必填字段已填写
- 验证数据格式

### Q2: 如何批量更新标准成本？

**方法：**
1. 导出现有成本数据
2. 在Excel中修改
3. 使用批量导入功能
4. 系统会创建新版本

### Q3: 历史版本的数据还能使用吗？

**说明：**
- 历史版本保留只读数据
- 可以查看但不能直接使用
- 如需使用，需要创建新版本
- 可以参考历史版本数据

### Q4: 导入失败如何处理？

**排查步骤：**
1. 检查错误详情中的提示
2. 修正Excel中的错误数据
3. 验证日期格式为 YYYY-MM-DD
4. 确认成本类别和来源使用正确值
5. 重新导入

## 权限说明

### 功能权限

- **cost:read** - 查看标准成本
- **cost:manage** - 创建、更新、停用标准成本
- **cost:import** - 批量导入
- **cost:export** - 导出数据

### 角色配置

系统默认角色权限：
- **财务经理**：所有权限
- **成本会计**：读取、导入、导出
- **项目经理**：只读权限
- **普通员工**：无权限

## 技术支持

如有问题，请联系：
- 技术支持：support@company.com
- 培训咨询：training@company.com

# 缺料处理方案推荐指南

**Team 3: 智能缺料预警系统**  
**版本**: v1.0  
**日期**: 2026-02-16

---

## 📋 目录

1. [方案推荐概述](#方案推荐概述)
2. [五大处理方案](#五大处理方案)
3. [AI评分模型](#ai评分模型)
4. [方案选择决策树](#方案选择决策树)
5. [实战案例](#实战案例)
6. [最佳实践](#最佳实践)

---

## 方案推荐概述

### 为什么需要AI推荐？

传统的缺料处理依赖人工经验：
- ❌ **耗时长** - 需要逐个分析供应商、库存、替代料
- ❌ **不全面** - 可能遗漏某些可行方案
- ❌ **不客观** - 受个人经验和情绪影响

AI推荐系统可以：
- ✅ **秒级响应** - 自动生成多个方案
- ✅ **全面覆盖** - 考虑所有可能的处理方式
- ✅ **客观评分** - 多维度量化评估

### 推荐流程

```
1. 预警触发
   ↓
   系统检测到缺料预警（CRITICAL/URGENT级别）
   
2. 方案生成
   ↓
   AI自动生成5类处理方案
   
3. 多维度评分
   ↓
   - 可行性评分 (Feasibility)
   - 成本评分 (Cost)
   - 时间评分 (Time)
   - 风险评分 (Risk)
   
4. 加权综合评分
   ↓
   AI Score = 0.3×可行性 + 0.3×成本 + 0.3×时间 + 0.1×风险
   
5. 排序推荐
   ↓
   按评分排序，标记推荐方案
   
6. 人工决策
   ↓
   用户查看方案，选择执行
```

---

## 五大处理方案

### 方案矩阵

| 方案类型 | 适用场景 | 成本 | 时间 | 风险 | AI评分 |
|----------|----------|------|------|------|--------|
| 🔴 **紧急采购** | 供应商有货 | 高 | 快 | 中 | ⭐⭐⭐⭐ |
| 🟠 **替代料** | 有可替代物料 | 中 | 中 | 中 | ⭐⭐⭐ |
| 🟡 **项目间调拨** | 其他项目有余料 | 低 | 快 | 低 | ⭐⭐⭐⭐⭐ |
| 🟢 **分批交付** | 有部分库存 | 低 | 快 | 中 | ⭐⭐⭐⭐ |
| 🔵 **生产重排期** | 不太紧急 | 极低 | 慢 | 高 | ⭐⭐ |

---

### 1. 紧急采购 (URGENT_PURCHASE)

#### 方案说明

从供应商紧急采购所需物料，走快速审批流程。

#### 适用场景

- ✅ 预警级别为 URGENT/CRITICAL
- ✅ 供应商有现货
- ✅ 预算充足
- ✅ 不能延期交付

#### 优点

- ✅ **快速解决** - 7天内到货
- ✅ **数量充足** - 按需采购，不受限制
- ✅ **质量保证** - 原厂物料，质量有保障

#### 缺点

- ❌ **成本较高** - 加急溢价20-50%
- ❌ **需要审批** - 走特殊审批流程
- ❌ **依赖供应商** - 供应商可能无货或延误

#### 风险点

- ⚠️ 供应商承诺的交期无法保证
- ⚠️ 物流环节可能出现延误
- ⚠️ 紧急采购可能挤占其他订单资源

#### 成本估算

```python
estimated_cost = shortage_qty × unit_price × urgency_factor

urgency_factor:
- 7天内到货: 1.2 (加价20%)
- 3天内到货: 1.5 (加价50%)
- 当天到货: 2.0 (加价100%)
```

#### 执行步骤

```
1. 联系供应商确认库存
2. 提交紧急采购申请
3. 走快速审批通道
4. 下达采购订单
5. 跟踪物流进度
6. 验收入库
```

---

### 2. 替代料 (SUBSTITUTE)

#### 方案说明

使用功能相近的替代物料，解决缺料问题。

#### 适用场景

- ✅ 有可替代物料（已在系统中维护）
- ✅ 技术部门同意替代
- ✅ 替代料有库存或采购周期短
- ✅ 对产品性能影响小

#### 优点

- ✅ **成本适中** - 可能更便宜，也可能略贵
- ✅ **灵活性高** - 不依赖单一供应商
- ✅ **库存利用** - 可能利用现有库存

#### 缺点

- ❌ **需要评审** - 需技术部门和生产部门审批
- ❌ **有风险** - 性能/质量可能有差异
- ❌ **需要测试** - 可能需要小批量试产

#### 风险点

- ⚠️ 替代料性能不符合要求
- ⚠️ 替代后影响产品质量
- ⚠️ 客户不接受替代方案

#### 决策矩阵

| 替代料匹配度 | 成本对比 | 可行性 | 推荐度 |
|-------------|----------|--------|--------|
| 完全兼容 | 更便宜 | 高 | ⭐⭐⭐⭐⭐ |
| 完全兼容 | 相近 | 高 | ⭐⭐⭐⭐ |
| 需要调整 | 更便宜 | 中 | ⭐⭐⭐ |
| 需要调整 | 更贵 | 低 | ⭐⭐ |

#### 执行步骤

```
1. 查询替代料清单
2. 技术部门评估可行性
3. 生产部门评估影响
4. 提交替代申请
5. 审批通过后执行
6. 记录替代效果
```

---

### 3. 项目间调拨 (TRANSFER)

#### 方案说明

从其他项目的库存中调拨物料，实现内部资源共享。

#### 适用场景

- ✅ 其他项目有余料
- ✅ 该项目不影响其他项目进度
- ✅ 物料通用性强
- ✅ 调拨成本低

#### 优点

- ✅ **成本最低** - 无额外采购成本
- ✅ **速度最快** - 内部调拨，当天到位
- ✅ **风险最低** - 物料质量有保证
- ✅ **库存优化** - 盘活闲置库存

#### 缺点

- ❌ **可调数量有限** - 取决于其他项目余量
- ❌ **需要协调** - 需项目经理同意
- ❌ **可能欠人情** - 影响项目间关系

#### 风险点

- ⚠️ 其他项目后续也缺料
- ⚠️ 调拨后影响原项目进度
- ⚠️ 物料规格不完全匹配

#### 调拨优先级

```
1. 已完工项目的剩余物料 (优先级: 最高)
2. 预留安全库存多的项目
3. 进度超前的项目
4. 使用频率低的项目
5. 同一客户的其他项目
```

#### 执行步骤

```
1. 查询其他项目库存
2. 筛选可调拨项目
3. 联系项目经理确认
4. 提交调拨申请
5. 审批通过后执行
6. 物料转移和记录
```

---

### 4. 分批交付 (PARTIAL_DELIVERY)

#### 方案说明

先使用现有库存启动生产，余量后续补充。

#### 适用场景

- ✅ 有部分库存（≥30%需求）
- ✅ 工序可以分批进行
- ✅ 客户接受分批交付
- ✅ 后续补货有保障

#### 优点

- ✅ **快速启动** - 不等待全部到齐
- ✅ **降低风险** - 分散缺料影响
- ✅ **成本低** - 利用现有库存
- ✅ **灵活性高** - 按进度调整批次

#### 缺点

- ❌ **管理复杂** - 需跟踪多批次
- ❌ **可能影响后续** - 第二批延误影响整体
- ❌ **客户接受度** - 部分客户不接受分批

#### 风险点

- ⚠️ 后续批次采购延误
- ⚠️ 分批生产成本增加
- ⚠️ 客户不满意分批交付

#### 批次规划

```python
# 示例
total_demand = 1000
available_stock = 300
shortage = 700

# 第一批（现有库存）
batch_1 = 300  # 立即投产
estimated_date_1 = today + 0天

# 第二批（采购补充）
batch_2 = 700  # 等待采购
estimated_date_2 = today + 14天

# 客户交付
partial_delivery_1 = today + 7天  (30%成品)
final_delivery = today + 21天  (100%成品)
```

#### 执行步骤

```
1. 评估现有库存
2. 规划分批生产计划
3. 与客户沟通分批交付
4. 启动第一批生产
5. 同步采购第二批物料
6. 完成全部交付
```

---

### 5. 生产重排期 (RESCHEDULE)

#### 方案说明

调整生产计划，延后该订单，等物料到货后再生产。

#### 适用场景

- ✅ 预警级别较低（WARNING/INFO）
- ✅ 客户可接受延期
- ✅ 没有合同违约风险
- ✅ 有其他订单可以顶替

#### 优点

- ✅ **成本最低** - 无额外成本
- ✅ **不需要资源** - 不占用采购资源
- ✅ **按正常流程** - 走常规采购流程

#### 缺点

- ❌ **延期交付** - 影响客户满意度
- ❌ **可能违约** - 合同约定的交期无法保证
- ❌ **影响信誉** - 多次延期影响公司口碑

#### 风险点

- ⚠️ 客户投诉或取消订单
- ⚠️ 合同违约，需赔偿
- ⚠️ 影响后续订单

#### 延期评估

```python
# 延期影响评分
delay_impact_score = 0

# 客户等级
if customer_level == 'VIP':
    delay_impact_score += 50
elif customer_level == 'A':
    delay_impact_score += 30

# 订单金额
if order_amount > 1000000:
    delay_impact_score += 30
elif order_amount > 100000:
    delay_impact_score += 10

# 合同违约
if has_penalty_clause:
    delay_impact_score += 30

# 评估
if delay_impact_score > 70:
    recommendation = "不推荐重排期，采用其他方案"
else:
    recommendation = "可考虑重排期"
```

#### 执行步骤

```
1. 评估延期影响
2. 与客户沟通延期
3. 评估合同违约风险
4. 调整生产计划
5. 安排其他订单顶替
6. 等待物料到货后生产
```

---

## AI评分模型

### 评分维度

#### 1. 可行性评分 (Feasibility Score)

**定义**: 方案实施的难易程度

**评分标准**:
```python
方案类型默认分数:
- URGENT_PURCHASE: 80分（供应商有货即可）
- SUBSTITUTE: 60分（需评审和测试）
- TRANSFER: 70分（需协调其他项目）
- PARTIAL_DELIVERY: 85分（有部分库存即可）
- RESCHEDULE: 90分（最容易实施）

调整因子:
+ 供应商库存充足: +10分
+ 历史成功案例: +5分
- 需要多部门审批: -10分
- 技术难度大: -15分
```

#### 2. 成本评分 (Cost Score)

**定义**: 成本越低，评分越高

**评分公式**:
```python
cost_ratio = estimated_cost / baseline_cost

if cost_ratio < 0.5:
    cost_score = 100
elif cost_ratio < 1.0:
    cost_score = 80
elif cost_ratio < 1.5:
    cost_score = 60
elif cost_ratio < 2.0:
    cost_score = 40
else:
    cost_score = 20
```

**成本组成**:
```
总成本 = 直接成本 + 间接成本

直接成本:
- 采购成本（含加急溢价）
- 运输成本
- 检验成本

间接成本:
- 审批成本（时间）
- 协调成本（人力）
- 风险成本（延误损失）
```

#### 3. 时间评分 (Time Score)

**定义**: 时间越短，评分越高

**评分标准**:
```python
if lead_time == 0天:
    time_score = 100  # 立即可用
elif lead_time <= 3天:
    time_score = 90   # 快速
elif lead_time <= 7天:
    time_score = 70   # 较快
elif lead_time <= 14天:
    time_score = 50   # 一般
else:
    time_score = 30   # 较慢
```

#### 4. 风险评分 (Risk Score)

**定义**: 风险越低，评分越高

**风险因素**:
```python
risk_count = len(risks)

if risk_count == 0:
    risk_score = 100
elif risk_count <= 2:
    risk_score = 80
elif risk_count <= 4:
    risk_score = 60
else:
    risk_score = 40

# 风险类别权重
- 质量风险: -20分
- 交期风险: -15分
- 成本超支风险: -10分
- 客户投诉风险: -20分
```

### 综合评分

**公式**:
```python
AI_Score = (
    feasibility_score × 0.3 +
    cost_score × 0.3 +
    time_score × 0.3 +
    risk_score × 0.1
)
```

**权重说明**:
- **可行性 30%** - 能不能做到
- **成本 30%** - 花多少钱
- **时间 30%** - 要多久
- **风险 10%** - 会不会出问题

**评分解释**:
- 90-100分: 强烈推荐 ⭐⭐⭐⭐⭐
- 80-90分: 推荐 ⭐⭐⭐⭐
- 70-80分: 可选 ⭐⭐⭐
- 60-70分: 备选 ⭐⭐
- <60分: 不推荐 ⭐

---

## 方案选择决策树

```
开始: 发现缺料预警
│
├─ 是否有其他项目余料？
│   ├─ 是 → 【项目间调拨】✅ 首选
│   └─ 否 → 继续
│
├─ 是否有部分库存（≥30%）？
│   ├─ 是 → 客户是否接受分批？
│   │   ├─ 是 → 【分批交付】✅ 推荐
│   │   └─ 否 → 继续
│   └─ 否 → 继续
│
├─ 供应商是否有现货？
│   ├─ 是 → 是否紧急（≤7天）？
│   │   ├─ 是 → 【紧急采购】✅ 推荐
│   │   └─ 否 → 考虑常规采购
│   └─ 否 → 继续
│
├─ 是否有替代料？
│   ├─ 是 → 技术部门是否同意？
│   │   ├─ 是 → 【替代料】✅ 可选
│   │   └─ 否 → 继续
│   └─ 否 → 继续
│
└─ 客户是否接受延期？
    ├─ 是 → 【重排期】⚠️ 备选
    └─ 否 → 返回【紧急采购】或与客户协商
```

---

## 实战案例

### 案例1: 紧急缺料 - 优选调拨

**场景**:
- 预警级别: URGENT
- 物料: 钢板Q235
- 需求: 100张
- 库存: 0
- 需求日期: 3天后

**AI生成方案**:

| 方案 | 可行性 | 成本 | 时间 | 风险 | AI评分 | 排名 |
|------|--------|------|------|------|--------|------|
| 项目间调拨 | 95 | 100 | 100 | 90 | **97.5** | ⭐ 1st |
| 紧急采购 | 80 | 60 | 90 | 80 | **77.0** | 2nd |
| 分批交付 | 0 | - | - | - | - | N/A |
| 替代料 | 60 | 70 | 70 | 60 | **65.0** | 3rd |
| 重排期 | 90 | 100 | 30 | 40 | **66.0** | 4th |

**推荐方案**: **项目间调拨**

**理由**:
- ✅ 其他项目有50张余料，可立即调拨
- ✅ 成本为0，无需额外采购
- ✅ 当天到位，风险最低
- ✅ 剩余50张走紧急采购

**执行**:
```
1. 从项目B调拨50张（当天到位）
2. 紧急采购50张（3天到位）
3. 分两批投产，不影响交期
```

---

### 案例2: 成本优先 - 选择替代料

**场景**:
- 预警级别: WARNING
- 物料: 进口芯片（贵）
- 需求: 1000个
- 库存: 0
- 预算紧张

**AI生成方案**:

| 方案 | 可行性 | 成本 | 时间 | 风险 | AI评分 | 排名 |
|------|--------|------|------|------|--------|------|
| 替代料（国产） | 85 | **95** | 80 | 75 | **86.5** | ⭐ 1st |
| 紧急采购（进口） | 80 | **40** | 90 | 80 | **72.0** | 2nd |
| 项目间调拨 | 0 | - | - | - | - | N/A |

**推荐方案**: **替代料（国产芯片）**

**理由**:
- ✅ 国产芯片性能满足要求
- ✅ 成本降低60%（¥50→¥20）
- ✅ 交期10天，可接受
- ✅ 已有测试报告，风险可控

**执行**:
```
1. 技术部门确认替代可行性（已通过）
2. 采购国产芯片1000个
3. 小批量试产100个验证
4. 通过后批量生产
```

---

### 案例3: 时间紧迫 - 分批交付

**场景**:
- 预警级别: CRITICAL
- 物料: 连接器
- 需求: 500个
- 库存: 200个
- 需求日期: 5天后

**AI生成方案**:

| 方案 | 可行性 | 成本 | 时间 | 风险 | AI评分 | 排名 |
|------|--------|------|------|------|--------|------|
| 分批交付 | 90 | 95 | **100** | 80 | **92.0** | ⭐ 1st |
| 紧急采购 | 75 | 60 | **90** | 75 | **74.5** | 2nd |
| 项目间调拨 | 40 | 100 | 100 | 90 | **78.0** | 3rd |

**推荐方案**: **分批交付**

**理由**:
- ✅ 现有200个，可先生产40%产品
- ✅ 余量300个走紧急采购，7天到货
- ✅ 两批次刚好满足客户交付节奏
- ✅ 不影响最终交期

**执行**:
```
批次1 (现有库存):
- 数量: 200个
- 投产: 立即
- 产出: 40%成品（5天后）

批次2 (紧急采购):
- 数量: 300个
- 到货: 7天后
- 产出: 60%成品（12天后）

客户交付:
- 第一批: 40%成品（5天后）✅
- 最终交付: 100%成品（12天后）✅
```

---

## 最佳实践

### 1. 定期评审方案效果

**建立反馈机制**:
```python
# 方案执行后，记录实际效果
plan.actual_cost = 9800  # 实际成本
plan.actual_lead_time = 8  # 实际交期
plan.effectiveness_rating = 4  # 有效性评分 1-5

# 系统自动调整评分模型
if actual_cost < estimated_cost:
    cost_score_weight += 0.05  # 增加成本权重
```

### 2. 优先考虑调拨和分批

**成本最优策略**:
```
优先级:
1. 项目间调拨（成本最低）
2. 分批交付（利用现有库存）
3. 紧急采购（加急成本高）
4. 替代料（需评审）
5. 重排期（影响客户）
```

### 3. 建立供应商快速响应机制

**签订框架协议**:
- 指定3-5家战略供应商
- 约定紧急采购响应时间（<24小时）
- 预留紧急产能（10%）
- 设定加急溢价上限（<30%）

### 4. 维护替代料清单

**定期更新**:
```sql
-- 每季度更新替代料清单
UPDATE material_substitutes
SET status = 'VALIDATED'
WHERE last_test_date > DATE_SUB(NOW(), INTERVAL 90 DAY);

-- 移除失效替代料
UPDATE material_substitutes
SET status = 'OBSOLETE'
WHERE failure_count > 3;
```

### 5. 数据驱动决策

**统计分析**:
```python
# 每月统计各方案执行效果
solution_stats = {
    'URGENT_PURCHASE': {
        'total_count': 45,
        'success_rate': 0.89,
        'avg_cost_overrun': 0.12,
        'avg_delay_days': 1.5
    },
    'TRANSFER': {
        'total_count': 28,
        'success_rate': 0.96,
        'avg_cost_overrun': 0.02,
        'avg_delay_days': 0.3
    }
}

# 根据统计调整推荐权重
```

---

## 总结

### 方案推荐核心原则

1. **快速响应** - AI秒级生成多个方案
2. **量化评估** - 多维度客观评分
3. **人工决策** - AI推荐，人工最终决定
4. **闭环反馈** - 记录效果，持续优化

### 适用场景总结

| 场景 | 最优方案 | 备选方案 |
|------|----------|----------|
| 有项目余料 | 项目间调拨 | 紧急采购 |
| 有部分库存 | 分批交付 | 紧急采购 |
| 供应商有货 | 紧急采购 | 替代料 |
| 预算紧张 | 替代料 | 重排期 |
| 时间充裕 | 常规采购 | 重排期 |
| 无其他选择 | 重排期 | 与客户协商 |

---

**文档版本**: v1.0  
**最后更新**: 2026-02-16  
**作者**: Team 3  
**审核**: 待定

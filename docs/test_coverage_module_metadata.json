{
  "metadata_version": "1.0",
  "last_updated": "2025-01-21",
  "description": "Priority tagging for low-coverage modules based on fan-out, criticality, change frequency, and dependency complexity",
  "modules": {
    "services/permission_service.py": {
      "fan_out": 5,
      "criticality": "high",
      "change_frequency": "medium",
      "dependency_complexity": "low",
      "estimated_coverage_gap": "147 lines",
      "impact_score": 50,
      "testing_approach": "Unit tests with mock permissions, focus on core permission checks and scope validation"
    },
    "services/data_scope_service_v2.py": {
      "fan_out": 5,
      "criticality": "high",
      "change_frequency": "medium",
      "dependency_complexity": "medium",
      "estimated_coverage_gap": "138 lines",
      "impact_score": 47,
      "testing_approach": "Unit tests with mock data scope, test scope resolution and filtering"
    },
    "services/cache_service.py": {
      "fan_out": 5,
      "criticality": "high",
      "change_frequency": "low",
      "dependency_complexity": "low",
      "estimated_coverage_gap": "139 lines",
      "impact_score": 47,
      "testing_approach": "Unit tests with mock cache, test cache hit/miss and TTL logic"
    },
    "services/data_sync_service.py": {
      "fan_out": 5,
      "criticality": "high",
      "change_frequency": "high",
      "dependency_complexity": "high",
      "estimated_coverage_gap": "143 lines",
      "impact_score": 48,
      "testing_approach": "Integration tests with mocked sync targets, test retry logic and error handling"
    },
    "services/timesheet_sync_service.py": {
      "fan_out": 4,
      "criticality": "high",
      "change_frequency": "high",
      "dependency_complexity": "high",
      "estimated_coverage_gap": "171 lines",
      "impact_score": 46,
      "testing_approach": "Integration tests with mocked external timesheet APIs, test sync reconciliation"
    },
    "services/progress_integration_service.py": {
      "fan_out": 4,
      "criticality": "high",
      "change_frequency": "medium",
      "dependency_complexity": "medium",
      "estimated_coverage_gap": "148 lines",
      "impact_score": 39,
      "testing_approach": "Integration tests with staged progress updates, test state transitions"
    },
    "services/invoice_auto_service.py": {
      "fan_out": 3,
      "criticality": "critical",
      "change_frequency": "medium",
      "dependency_complexity": "high",
      "estimated_coverage_gap": "179 lines",
      "impact_score": 36,
      "testing_approach": "Integration tests with mocked payment gateway, test invoice generation logic"
    },
    "services/collaboration_rating_service.py": {
      "fan_out": 3,
      "criticality": "medium",
      "change_frequency": "medium",
      "dependency_complexity": "medium",
      "estimated_coverage_gap": "172 lines",
      "impact_score": 32,
      "testing_approach": "Unit tests with project data fixtures, test rating calculation algorithms"
    },
    "services/timesheet_report_service.py": {
      "fan_out": 2,
      "criticality": "medium",
      "change_frequency": "high",
      "dependency_complexity": "medium",
      "estimated_coverage_gap": "290 lines",
      "impact_score": 28,
      "testing_approach": "Unit tests for transformation logic + thin IO seam for report generation"
    },
    "services/metric_calculation_service.py": {
      "fan_out": 3,
      "criticality": "high",
      "change_frequency": "medium",
      "dependency_complexity": "medium",
      "estimated_coverage_gap": "180 lines",
      "impact_score": 36,
      "testing_approach": "Unit tests with edge cases, test calculation precision and boundary conditions"
    },
    "services/win_rate_prediction_service.py": {
      "fan_out": 1,
      "criticality": "low",
      "change_frequency": "low",
      "dependency_complexity": "high",
      "estimated_coverage_gap": "200 lines",
      "impact_score": 12,
      "testing_approach": "Pure unit tests for prompt building + response parsing, contract tests for AI model client"
    },
    "services/sales_prediction_service.py": {
      "fan_out": 1,
      "criticality": "low",
      "change_frequency": "low",
      "dependency_complexity": "high",
      "estimated_coverage_gap": "145 lines (12.7% current)",
      "impact_score": 12,
      "testing_approach": "Pure unit tests for prediction logic, contract tests for ML model client"
    },
    "services/performance_service.py": {
      "fan_out": 2,
      "criticality": "high",
      "change_frequency": "high",
      "dependency_complexity": "medium",
      "estimated_coverage_gap": "146 lines (14.1% current)",
      "impact_score": 24,
      "testing_approach": "Unit tests with performance data fixtures, add edge cases for error paths"
    },
    "services/ecn_knowledge_service.py": {
      "fan_out": 2,
      "criticality": "medium",
      "change_frequency": "medium",
      "dependency_complexity": "medium",
      "estimated_coverage_gap": "197 lines (12.4% current)",
      "impact_score": 20,
      "testing_approach": "Unit tests with ECN data fixtures, add edge cases for knowledge retrieval"
    },
    "services/ecn_bom_analysis_service.py": {
      "fan_out": 2,
      "criticality": "high",
      "change_frequency": "medium",
      "dependency_complexity": "high",
      "estimated_coverage_gap": "172 lines (10.4% current)",
      "impact_score": 24,
      "testing_approach": "Unit tests with BOM fixtures, test analysis edge cases and error handling"
    },
    "services/report_export_service.py": {
      "fan_out": 2,
      "criticality": "medium",
      "change_frequency": "low",
      "dependency_complexity": "low",
      "estimated_coverage_gap": "193 lines",
      "impact_score": 22,
      "testing_approach": "Unit tests for transformation logic + thin IO seam (mock file generation)"
    },
    "services/excel_export_service.py": {
      "fan_out": 2,
      "criticality": "medium",
      "change_frequency": "low",
      "dependency_complexity": "low",
      "estimated_coverage_gap": "160 lines",
      "impact_score": 20,
      "testing_approach": "Unit tests for Excel structure + thin IO seam (mock openpyxl)"
    },
    "services/pdf_content_builders.py": {
      "fan_out": 2,
      "criticality": "medium",
      "change_frequency": "low",
      "dependency_complexity": "low",
      "estimated_coverage_gap": "142 lines",
      "impact_score": 20,
      "testing_approach": "Unit tests for PDF structure generation + thin IO seam (mock reportlab)"
    },
    "services/project_export_service.py": {
      "fan_out": 2,
      "criticality": "medium",
      "change_frequency": "medium",
      "dependency_complexity": "low",
      "estimated_coverage_gap": "130 lines",
      "impact_score": 18,
      "testing_approach": "Unit tests for export data mapping + thin IO seam for file generation"
    },
    "services/employee_import_service.py": {
      "fan_out": 2,
      "criticality": "high",
      "change_frequency": "low",
      "dependency_complexity": "medium",
      "estimated_coverage_gap": "154 lines",
      "impact_score": 22,
      "testing_approach": "Table-driven tests for validation: valid file, missing columns, invalid values, duplicates, partial rows"
    },
    "services/hr_profile_import_service.py": {
      "fan_out": 2,
      "criticality": "high",
      "change_frequency": "low",
      "dependency_complexity": "medium",
      "estimated_coverage_gap": "187 lines",
      "impact_score": 26,
      "testing_approach": "Table-driven tests for HR-specific validation: profile completeness, required fields, format checks"
    },
    "services/project_import_service.py": {
      "fan_out": 2,
      "criticality": "medium",
      "change_frequency": "low",
      "dependency_complexity": "medium",
      "estimated_coverage_gap": "138 lines",
      "impact_score": 20,
      "testing_approach": "Table-driven tests for project validation: required fields, customer lookup, stage mapping"
    },
    "models/exports/complete.py": {
      "fan_out": 2,
      "criticality": "medium",
      "change_frequency": "low",
      "dependency_complexity": "low",
      "estimated_coverage_gap": "134 lines (0% current)",
      "impact_score": 18,
      "testing_approach": "Unit tests for export model serialization, test all relationships and field mappings"
    },
    "services/technical_assessment_service.py": {
      "fan_out": 2,
      "criticality": "medium",
      "change_frequency": "medium",
      "dependency_complexity": "medium",
      "estimated_coverage_gap": "178 lines (10.6% current)",
      "impact_score": 22,
      "testing_approach": "Unit tests with assessment data fixtures, add edge cases for different assessment types"
    },
    "services/acceptance_completion_service.py": {
      "fan_out": 2,
      "criticality": "high",
      "change_frequency": "medium",
      "dependency_complexity": "high",
      "estimated_coverage_gap": "131 lines (0% current)",
      "impact_score": 20,
      "testing_approach": "Integration tests with acceptance flow fixtures, test completion triggers and state transitions"
    }
  },
  "scoring_system": {
    "description": "Impact score = Fan-Out (1-5) + Criticality (critical=5, high=4, medium=3, low=2) + Change Frequency (high=5, medium=3, low=1)",
    "max_score": 15,
    "priority_thresholds": {
      "critical": "12-15",
      "high": "9-11",
      "medium": "6-8",
      "low": "3-5"
    }
  }
}

# 绩效管理系统 - 快速验证指南

## 系统状态

✅ **后端**: 运行中 (PID 52918, Port 8000)
✅ **前端**: 运行中 (Port 5173)
✅ **集成**: 100% 完成
✅ **文档**: 已完成

---

## 5分钟快速验证

### 第1步: 访问前端页面

打开浏览器访问: http://localhost:5173

### 第2步: 登录系统

使用测试账号登录 (根据init_db.py创建的测试用户)

### 第3步: 验证5个核心页面

#### 页面1: 月度总结 (MonthlySummary.jsx)
- 路径: `/monthly-summary`
- 功能: 提交月度工作总结
- 验证点:
  - ✅ 页面正常加载
  - ✅ 可以填写表单
  - ✅ 可以保存草稿
  - ✅ 可以提交总结
  - ✅ API调用成功

#### 页面2: 我的绩效 (MyPerformance.jsx)
- 路径: `/my-performance`
- 功能: 查看个人绩效
- 验证点:
  - ✅ 页面正常加载
  - ✅ 显示绩效等级
  - ✅ 显示历史记录
  - ✅ 显示趋势图
  - ✅ API调用成功

#### 页面3: 评价任务 (EvaluationTaskList.jsx)
- 路径: `/evaluation-tasks`
- 功能: 经理查看待评价员工
- 验证点:
  - ✅ 页面正常加载
  - ✅ 显示待评价列表
  - ✅ 筛选功能正常
  - ✅ 可以点击评价
  - ✅ API调用成功

#### 页面4: 评价打分 (EvaluationScoring.jsx)
- 路径: `/evaluation-scoring/:taskId`
- 功能: 经理对员工评价
- 验证点:
  - ✅ 页面正常加载
  - ✅ 显示员工信息
  - ✅ 可以输入评分
  - ✅ 可以填写意见
  - ✅ 可以提交评价
  - ✅ API调用成功

#### 页面5: 权重配置 (EvaluationWeightConfig.jsx)
- 路径: `/weight-config`
- 功能: HR配置评价权重
- 验证点:
  - ✅ 页面正常加载
  - ✅ 显示当前配置
  - ✅ 可以调整权重
  - ✅ 显示配置历史
  - ✅ 可以保存配置
  - ✅ API调用成功

---

## API验证命令

### 1. 健康检查
```bash
curl http://localhost:8000/health
```
预期输出: `{"status":"healthy"}`

### 2. 获取权重配置
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  http://localhost:8000/api/v1/performance/weight-config
```

### 3. 获取评价任务
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
  http://localhost:8000/api/v1/performance/evaluation-tasks
```

---

## 完整业务流程验证

### 流程: 员工总结 → 经理评价 → 查看结果

#### 步骤1: 员工提交总结 (3分钟)
1. 登录员工账号
2. 访问 `/monthly-summary`
3. 填写工作总结
4. 点击"提交总结"
5. ✅ 验证: 提交成功,系统自动创建评价任务

#### 步骤2: 部门经理评价 (2分钟)
1. 登录部门经理账号
2. 访问 `/evaluation-tasks`
3. 找到待评价员工
4. 点击"去评价"
5. 输入评分和意见
6. 点击"提交评价"
7. ✅ 验证: 评价成功

#### 步骤3: 项目经理评价 (2分钟)
1. 登录项目经理账号
2. 访问 `/evaluation-tasks`
3. 找到待评价员工
4. 点击"去评价"
5. 输入评分和意见
6. 点击"提交评价"
7. ✅ 验证: 评价成功

#### 步骤4: 员工查看绩效 (1分钟)
1. 登录员工账号
2. 访问 `/my-performance`
3. ✅ 验证: 看到最终分数和等级
4. ✅ 验证: 看到经理评价意见

#### 步骤5: HR配置权重 (2分钟)
1. 登录HR账号
2. 访问 `/weight-config`
3. 调整权重滑块
4. 点击"保存配置"
5. ✅ 验证: 配置保存成功
6. ✅ 验证: 历史记录已更新

---

## 浏览器控制台检查

打开浏览器开发者工具 (F12),查看:

### 1. Network (网络)
- ✅ API请求成功 (状态码 200)
- ✅ 响应数据格式正确
- ✅ 无404或500错误

### 2. Console (控制台)
- ✅ 无JavaScript错误
- ✅ 无API调用失败日志
- ✅ 只有正常的信息日志

---

## 常见问题排查

### 问题1: 页面加载失败
**检查**:
```bash
# 检查前端是否运行
lsof -ti:5173

# 重启前端
cd frontend && npm run dev
```

### 问题2: API调用401错误
**原因**: Token过期或未登录
**解决**: 重新登录获取新Token

### 问题3: API调用失败
**检查**:
```bash
# 检查后端是否运行
lsof -ti:8000

# 查看后端日志
tail -f backend.log

# 重启后端
python3 -m app.main
```

---

## 数据验证

### 检查数据库记录

```bash
# 连接SQLite数据库
sqlite3 data/app.db

# 查看工作总结记录
SELECT * FROM monthly_work_summary;

# 查看评价记录
SELECT * FROM performance_evaluation_record;

# 查看最终分数
SELECT * FROM performance_final_score;

# 查看权重配置
SELECT * FROM performance_weight_config;

# 退出
.quit
```

---

## 验证清单

### 后端验证 ✅
- [x] 健康检查通过
- [x] 所有API端点正常
- [x] 数据库连接正常
- [x] JWT认证工作
- [x] 权限控制正确

### 前端验证 ✅
- [x] 所有页面正常加载
- [x] 表单提交成功
- [x] API集成正常
- [x] 加载状态显示
- [x] 错误处理正确

### 业务验证 ✅
- [x] 员工提交总结
- [x] 自动创建评价任务
- [x] 经理完成评价
- [x] 自动计算最终分数
- [x] 员工查看绩效
- [x] HR配置权重

### 集成验证 ✅
- [x] 前后端数据传输正确
- [x] 字段名兼容处理
- [x] 错误处理完善
- [x] 用户体验流畅

---

## 性能验证

### API响应时间
- 获取列表: < 500ms
- 提交数据: < 1000ms
- 计算分数: < 2000ms

### 页面加载时间
- 首次加载: < 2s
- 后续加载: < 500ms

---

## 安全验证

### 权限控制
- ✅ 员工只能看自己的数据
- ✅ 经理只能评价下属
- ✅ HR可以配置权重
- ✅ 未授权访问被拒绝

### 数据验证
- ✅ 评分范围验证 (60-100)
- ✅ 权重总和验证 (=100%)
- ✅ 必填字段验证
- ✅ SQL注入防护

---

## 验证报告模板

```
绩效管理系统验证报告

验证时间: YYYY-MM-DD HH:mm
验证人: [姓名]

【系统状态】
- 后端状态: ✅ 运行正常 / ❌ 异常
- 前端状态: ✅ 运行正常 / ❌ 异常
- 数据库状态: ✅ 正常 / ❌ 异常

【功能验证】
- 员工提交总结: ✅ 通过 / ❌ 失败
- 经理评价: ✅ 通过 / ❌ 失败
- 自动计算: ✅ 通过 / ❌ 失败
- 权重配置: ✅ 通过 / ❌ 失败
- 查看绩效: ✅ 通过 / ❌ 失败

【问题记录】
1. [如有问题,在此记录]
2. ...

【结论】
系统验证 [通过 / 不通过]

【签名】
验证人: ___________
日期: ___________
```

---

## 下一步行动

验证通过后,可以进行:

1. **用户培训**: 准备培训材料,组织用户培训
2. **试运行**: 小范围试用,收集反馈
3. **正式上线**: 全员使用
4. **持续优化**: 根据使用反馈优化功能

---

## 支持联系

- 技术问题: tech@company.com
- 使用问题: support@company.com
- 紧急问题: 400-XXX-XXXX

---

**验证指南版本**: v1.0.0
**更新日期**: 2025-01-07

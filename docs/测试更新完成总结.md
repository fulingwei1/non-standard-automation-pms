# æµ‹è¯•æ›´æ–°å®Œæˆæ€»ç»“

> æ›´æ–°æµ‹è¯•ä»¥é€‚åº”æ–°çš„ç»Ÿä¸€å“åº”æ ¼å¼

---

## âœ… å·²å®Œæˆå·¥ä½œ

### 1. åˆ›å»ºæµ‹è¯•è¾…åŠ©å‡½æ•°æ¨¡å—

**æ–‡ä»¶**: `tests/helpers/response_helpers.py`

**åŠŸèƒ½**:
- âœ… `assert_success_response()` - æ–­è¨€æˆåŠŸå“åº”æ ¼å¼å¹¶æå–æ•°æ®
- âœ… `assert_paginated_response()` - æ–­è¨€åˆ†é¡µå“åº”æ ¼å¼
- âœ… `assert_list_response()` - æ–­è¨€åˆ—è¡¨å“åº”æ ¼å¼ï¼ˆæ— åˆ†é¡µï¼‰
- âœ… `extract_data()` - ä»ç»Ÿä¸€å“åº”æ ¼å¼ä¸­æå–æ•°æ®ï¼ˆå…¼å®¹æ–°æ—§æ ¼å¼ï¼‰
- âœ… `extract_items()` - ä»åˆ—è¡¨å“åº”ä¸­æå–itemsï¼ˆå…¼å®¹æ–°æ—§æ ¼å¼ï¼‰

### 2. æ›´æ–°æµ‹è¯•æ–‡ä»¶

#### é›†æˆæµ‹è¯•
- âœ… `tests/integration/test_suppliers_api.py` - å·²æ›´æ–°ï¼Œæµ‹è¯•é€šè¿‡
- âœ… `tests/integration/test_materials_api.py` - å·²æ›´æ–°
- âœ… `tests/integration/test_customers_api.py` - å·²æ›´æ–°
- âœ… `tests/integration/test_members_api.py` - å·²æ›´æ–°
- âœ… `tests/integration/test_milestones_api.py` - å·²æ›´æ–°

#### APIæµ‹è¯•
- âœ… `tests/api/test_suppliers.py` - éƒ¨åˆ†æ›´æ–°ï¼ˆå·²æœ‰å…¼å®¹æ€§å¤„ç†ï¼‰
- âœ… `tests/api/test_stages.py` - éƒ¨åˆ†æ›´æ–°

### 3. ä¿®å¤ä»£ç é”™è¯¯

- âœ… ä¿®å¤ `app/core/sales_permissions.py` ä¸­çš„ç¼©è¿›é”™è¯¯

### 4. åˆ›å»ºæ–‡æ¡£

- âœ… `docs/æµ‹è¯•æ›´æ–°æŒ‡å—_ç»Ÿä¸€å“åº”æ ¼å¼.md` - è¯¦ç»†çš„æµ‹è¯•æ›´æ–°æŒ‡å—
- âœ… `docs/æµ‹è¯•æ›´æ–°å®Œæˆæ€»ç»“.md` - æœ¬æ–‡æ¡£

---

## ğŸ“Š æµ‹è¯•æ›´æ–°ç»Ÿè®¡

### å·²æ›´æ–°æµ‹è¯•æ–‡ä»¶
- **é›†æˆæµ‹è¯•**: 5ä¸ªæ–‡ä»¶
- **APIæµ‹è¯•**: 2ä¸ªæ–‡ä»¶ï¼ˆéƒ¨åˆ†æ›´æ–°ï¼‰
- **æµ‹è¯•è¾…åŠ©å‡½æ•°**: 1ä¸ªæ–°æ–‡ä»¶

### æµ‹è¯•éªŒè¯
- âœ… `test_list_suppliers` - é€šè¿‡
- âœ… `test_get_supplier_detail` - é€šè¿‡
- âœ… `test_create_supplier` - é€šè¿‡
- âœ… `test_list_materials` - é€šè¿‡

---

## ğŸ”§ æ›´æ–°æ¨¡å¼æ€»ç»“

### æ¨¡å¼1ï¼šå•ä¸ªå¯¹è±¡å“åº”

```python
# åŸæµ‹è¯•
data = response.json()
assert data["id"] == 1

# æ–°æµ‹è¯•
from tests.helpers.response_helpers import assert_success_response
response_data = response.json()
data = assert_success_response(response_data)
assert data["id"] == 1
```

### æ¨¡å¼2ï¼šåˆ—è¡¨å“åº”ï¼ˆåˆ†é¡µï¼‰

```python
# åŸæµ‹è¯•
data = response.json()
assert "items" in data

# æ–°æµ‹è¯•
from tests.helpers.response_helpers import assert_paginated_response
response_data = response.json()
paginated_data = assert_paginated_response(response_data)
assert "items" in paginated_data
```

### æ¨¡å¼3ï¼šåˆ—è¡¨å“åº”ï¼ˆæ— åˆ†é¡µï¼‰

```python
# åŸæµ‹è¯•
data = response.json()
assert isinstance(data, list)

# æ–°æµ‹è¯•
from tests.helpers.response_helpers import assert_list_response
response_data = response.json()
list_data = assert_list_response(response_data)
assert "items" in list_data
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. å‘åå…¼å®¹

æµ‹è¯•è¾…åŠ©å‡½æ•°æ”¯æŒæ–°æ—§ä¸¤ç§æ ¼å¼ï¼Œå¯ä»¥é€æ­¥è¿ç§»ï¼š
- æ–°æ ¼å¼ï¼šè‡ªåŠ¨æå– `data` å­—æ®µ
- æ—§æ ¼å¼ï¼šç›´æ¥è¿”å›æ•°æ®å¯¹è±¡

### 2. çŠ¶æ€ç 

- åˆ›å»ºæ“ä½œï¼š201 (æ–°æ ¼å¼) æˆ– 200 (æ—§æ ¼å¼)
- å…¶ä»–æ“ä½œï¼š200
- é”™è¯¯ï¼š400, 404, 422 ç­‰

### 3. é”™è¯¯å“åº”

é”™è¯¯å“åº”ä»ç„¶ä½¿ç”¨HTTPExceptionï¼Œæ ¼å¼ä¸å˜ï¼š
```json
{
  "detail": "é”™è¯¯æ¶ˆæ¯"
}
```

---

## ğŸ“‹ å¾…å®Œæˆå·¥ä½œ

### 1. æ›´æ–°å‰©ä½™æµ‹è¯•æ–‡ä»¶

- â­ï¸ `tests/api/test_materials.py`
- â­ï¸ `tests/api/test_customers.py`
- â­ï¸ `tests/api/test_machines.py`
- â­ï¸ `tests/api/test_milestones.py`
- â­ï¸ `tests/api/test_members.py`
- â­ï¸ å…¶ä»–ç›¸å…³æµ‹è¯•æ–‡ä»¶

### 2. è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶

- â­ï¸ è¿è¡Œæ‰€æœ‰é›†æˆæµ‹è¯•
- â­ï¸ è¿è¡Œæ‰€æœ‰APIæµ‹è¯•
- â­ï¸ ä¿®å¤å¤±è´¥çš„æµ‹è¯•

### 3. éªŒè¯åŠŸèƒ½

- â­ï¸ éªŒè¯æ‰€æœ‰CRUDæ“ä½œ
- â­ï¸ éªŒè¯ç‰¹æ®Šç«¯ç‚¹
- â­ï¸ éªŒè¯é”™è¯¯å¤„ç†

---

## ğŸ¯ é¢„æœŸæ”¶ç›Š

### æµ‹è¯•è´¨é‡æå‡
- âœ… ç»Ÿä¸€çš„å“åº”æ ¼å¼éªŒè¯
- âœ… æ›´å¥½çš„é”™è¯¯å¤„ç†æµ‹è¯•
- âœ… æ›´æ¸…æ™°çš„æµ‹è¯•ä»£ç 

### ç»´æŠ¤æ•ˆç‡æå‡
- âœ… å‡å°‘é‡å¤çš„å“åº”æ ¼å¼æ–­è¨€ä»£ç 
- âœ… ç»Ÿä¸€çš„æµ‹è¯•æ¨¡å¼
- âœ… æ›´å®¹æ˜“ç»´æŠ¤å’Œæ‰©å±•

---

## ğŸ“ æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶
- `tests/helpers/response_helpers.py` - æµ‹è¯•è¾…åŠ©å‡½æ•°æ¨¡å—
- `docs/æµ‹è¯•æ›´æ–°æŒ‡å—_ç»Ÿä¸€å“åº”æ ¼å¼.md` - æµ‹è¯•æ›´æ–°æŒ‡å—
- `docs/æµ‹è¯•æ›´æ–°å®Œæˆæ€»ç»“.md` - æœ¬æ–‡æ¡£

### ä¿®æ”¹æ–‡ä»¶
- `tests/integration/test_suppliers_api.py` - æ›´æ–°å“åº”æ ¼å¼æ–­è¨€
- `tests/integration/test_materials_api.py` - æ›´æ–°å“åº”æ ¼å¼æ–­è¨€
- `tests/integration/test_customers_api.py` - æ›´æ–°å“åº”æ ¼å¼æ–­è¨€
- `tests/integration/test_members_api.py` - æ›´æ–°å“åº”æ ¼å¼æ–­è¨€
- `tests/integration/test_milestones_api.py` - æ›´æ–°å“åº”æ ¼å¼æ–­è¨€
- `tests/api/test_suppliers.py` - éƒ¨åˆ†æ›´æ–°
- `tests/api/test_stages.py` - éƒ¨åˆ†æ›´æ–°
- `app/core/sales_permissions.py` - ä¿®å¤è¯­æ³•é”™è¯¯

---

**åˆ›å»ºæ—¥æœŸ**: 2026-01-23  
**çŠ¶æ€**: âœ… éƒ¨åˆ†å®Œæˆ  
**ä¸‹ä¸€æ­¥**: æ›´æ–°å‰©ä½™æµ‹è¯•æ–‡ä»¶å¹¶è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶

# 项目成本列表功能 - 测试检查清单

## 📋 测试前准备

- [ ] 已安装 xlsx 依赖
- [ ] 已更新路由配置
- [ ] 开发服务器已启动
- [ ] 后端服务器已启动
- [ ] 已有测试数据（至少10个项目，包含成本数据）

---

## 1️⃣ 页面加载测试

### 基础加载
- [ ] 访问 `/projects-cost` 页面正常加载
- [ ] 页面标题显示"项目列表"
- [ ] 统计信息显示正确（总项目数）
- [ ] 无控制台错误

### 数据加载
- [ ] 项目卡片正常显示
- [ ] 项目基本信息正确（名称、编号、客户）
- [ ] 进度条显示正确
- [ ] 健康度徽章显示正确

---

## 2️⃣ 成本显示测试

### 显示成本开关
- [ ] "显示成本"开关默认为开启（或关闭）
- [ ] 点击开关可切换成本显示
- [ ] 开启时，项目卡片显示成本信息
- [ ] 关闭时，项目卡片隐藏成本信息
- [ ] 开关状态切换时，自动重新加载数据

### 成本信息显示
- [ ] 总成本显示正确（万元单位）
- [ ] 预算显示正确（万元单位）
- [ ] 预算使用率显示正确（百分比）
- [ ] 预算使用率进度条显示正确

### 成本颜色编码
- [ ] 使用率 < 80% → 绿色进度条
- [ ] 使用率 80-90% → 琥珀色进度条
- [ ] 使用率 90-100% → 黄色进度条
- [ ] 使用率 > 100% → 红色进度条

### 超支项目高亮
- [ ] 超支项目顶部有红色边框条
- [ ] 超支项目有红色环形边框
- [ ] 超支项目显示"超支"徽章
- [ ] 超支项目成本使用率为红色

---

## 3️⃣ 筛选功能测试

### 仅显示超支项目
- [ ] "仅超支项目"开关默认为关闭
- [ ] 点击开关可切换筛选
- [ ] 开启时，仅显示超支项目
- [ ] 关闭时，显示所有项目
- [ ] 无超支项目时，显示"暂无超支项目"提示
- [ ] 活跃筛选标签显示"仅超支项目"

### 排序功能
- [ ] 排序下拉菜单可正常打开
- [ ] 显示4种排序选项：
  - 创建时间（新→旧）
  - 成本（高→低）
  - 成本（低→高）
  - 预算使用率（高→低）
- [ ] 选择"成本（高→低）"，项目按成本倒序排列
- [ ] 选择"成本（低→高）"，项目按成本正序排列
- [ ] 选择"预算使用率（高→低）"，项目按使用率倒序排列
- [ ] 选择"创建时间（新→旧）"，项目按创建时间倒序排列
- [ ] 活跃筛选标签显示当前排序方式

### 清除筛选
- [ ] 有活跃筛选时，显示"清除筛选"按钮
- [ ] 点击"清除筛选"，所有筛选重置
- [ ] 重置后，回到默认状态（显示成本关闭，按创建时间排序）

---

## 4️⃣ 搜索功能测试

- [ ] 搜索框占位符正确显示
- [ ] 输入项目名称可搜索
- [ ] 输入项目编号可搜索
- [ ] 输入客户名称可搜索
- [ ] 搜索结果实时更新
- [ ] 无搜索结果时显示"未找到匹配的项目"
- [ ] 清空搜索框，恢复所有项目

---

## 5️⃣ 视图切换测试

- [ ] 网格视图/列表视图切换按钮正常显示
- [ ] 点击网格视图按钮，切换到网格布局
- [ ] 点击列表视图按钮，切换到列表布局
- [ ] 视图切换时，数据不丢失
- [ ] 当前视图按钮高亮显示

---

## 6️⃣ 成本明细弹窗测试

### 打开弹窗
- [ ] 点击"查看成本明细"按钮，弹窗打开
- [ ] 弹窗标题显示项目名称
- [ ] 弹窗显示项目编号

### 成本概览
- [ ] 总成本卡片显示正确（带¥符号和千分位）
- [ ] 预算卡片显示正确
- [ ] 差异卡片显示正确
- [ ] 超支项目差异为红色
- [ ] 非超支项目差异为绿色

### 预算使用率
- [ ] 预算使用率百分比显示正确
- [ ] 成本状态徽章显示正确（安全/注意/预警/超支）
- [ ] 进度条颜色正确（绿/琥珀/黄/红）
- [ ] 进度条宽度正确

### 成本结构饼图
- [ ] 饼图正常显示
- [ ] 饼图包含5种成本类型（人工/材料/设备/差旅/其他）
- [ ] 饼图颜色正确
- [ ] 鼠标悬停显示Tooltip
- [ ] Tooltip显示成本金额和占比

### 成本明细表
- [ ] 明细表显示5种成本类型
- [ ] 每种成本金额显示正确
- [ ] 每种成本占比显示正确
- [ ] 值为0的成本也显示（不隐藏）
- [ ] 颜色编码与饼图一致

### 提示信息
- [ ] 超支项目显示红色超支提示
- [ ] 提示包含超支金额和百分比
- [ ] 预算使用率 > 90% 显示黄色预警提示
- [ ] 提示包含剩余预算
- [ ] 正常项目不显示提示

### 关闭弹窗
- [ ] 点击关闭按钮，弹窗关闭
- [ ] 点击弹窗外部，弹窗关闭
- [ ] 按ESC键，弹窗关闭

---

## 7️⃣ 导出功能测试

### 导出按钮
- [ ] 启用成本时，显示"导出Excel"按钮
- [ ] 禁用成本时，隐藏"导出Excel"按钮
- [ ] 无数据时，点击导出提示"没有可导出的项目数据"

### 导出内容
- [ ] 点击"导出Excel"，生成Excel文件
- [ ] 文件名包含日期（格式：项目列表_含成本_2026-02-14.xlsx）
- [ ] Excel包含工作表"项目列表"

### Excel数据完整性
- [ ] 包含基础信息列：项目编号、项目名称、客户、项目经理、阶段、健康度、进度
- [ ] 包含成本信息列：总成本、预算、预算使用率、是否超支、差异
- [ ] 包含成本明细列：人工成本、材料成本、设备成本、差旅成本、其他成本
- [ ] 数据行数与当前筛选结果一致
- [ ] 数值格式正确（数字而非字符串）
- [ ] 导出后显示成功提示

---

## 8️⃣ 统计信息测试

- [ ] 总项目数显示正确
- [ ] 启用成本时，显示"超支"项目数
- [ ] 启用成本时，显示"预警"项目数（使用率 ≥ 90%）
- [ ] 启用成本时，显示"正常"项目数
- [ ] 统计信息实时更新（筛选时）

---

## 9️⃣ 响应式设计测试

### 桌面 (1920x1080)
- [ ] 网格视图显示3列
- [ ] 所有卡片正常显示
- [ ] 成本明细弹窗宽度适中（max-w-3xl）

### 平板 (768x1024)
- [ ] 网格视图显示2列
- [ ] 筛选器组件自适应
- [ ] 成本明细弹窗宽度适中

### 移动端 (375x667)
- [ ] 网格视图显示1列
- [ ] 筛选器组件堆叠显示
- [ ] 搜索框全宽显示
- [ ] 成本明细弹窗全屏显示

---

## 🔟 性能测试

### 加载性能
- [ ] 10个项目 < 200ms
- [ ] 100个项目 < 800ms
- [ ] 大量项目时，使用分页加载

### 交互性能
- [ ] 筛选切换 < 100ms
- [ ] 搜索实时更新 < 100ms
- [ ] 成本明细弹窗打开 < 50ms
- [ ] 导出Excel < 1s（100个项目）

### 内存占用
- [ ] 长时间使用无内存泄漏
- [ ] 切换筛选不累积内存
- [ ] 多次打开/关闭弹窗无内存泄漏

---

## 1️⃣1️⃣ 错误处理测试

### 网络错误
- [ ] 后端服务器关闭时，显示错误提示
- [ ] 网络超时时，显示错误提示
- [ ] 错误提示友好且有用

### 数据异常
- [ ] 项目无成本数据时，显示"无数据"或"--"
- [ ] 预算为0时，不显示预算使用率
- [ ] 成本明细为空时，饼图显示"无数据"

### 边界情况
- [ ] 0个项目时，显示空状态提示
- [ ] 所有项目都超支时，筛选正常
- [ ] 所有项目都不超支时，筛选显示"暂无超支项目"

---

## 1️⃣2️⃣ 用户体验测试

### 动画效果
- [ ] 页面加载时有淡入动画
- [ ] 卡片有错开动画（stagger）
- [ ] 进度条有过渡动画
- [ ] 按钮有悬停效果

### 交互反馈
- [ ] 按钮点击有视觉反馈
- [ ] 开关切换有动画
- [ ] 导出成功显示Toast提示
- [ ] 错误时显示Toast提示

### 可访问性
- [ ] 所有按钮有合理的文本
- [ ] 图标有语义化描述
- [ ] 颜色对比度足够（WCAG AA）
- [ ] 键盘可导航（Tab键）

---

## ✅ 测试完成确认

- [ ] 所有基础功能测试通过
- [ ] 所有筛选功能测试通过
- [ ] 所有成本明细弹窗测试通过
- [ ] 所有导出功能测试通过
- [ ] 所有响应式测试通过
- [ ] 所有性能测试通过
- [ ] 所有错误处理测试通过
- [ ] 所有用户体验测试通过

---

## 🐛 发现的问题

| 序号 | 问题描述 | 严重程度 | 状态 |
|-----|---------|---------|------|
| 1   |         |         |      |
| 2   |         |         |      |
| 3   |         |         |      |

---

## 📝 测试备注

测试人员:  
测试时间:  
测试环境:  
浏览器版本:  

---

## 🎉 验收签字

- [ ] 功能测试通过
- [ ] 性能测试通过
- [ ] 用户体验良好
- [ ] 可以上线

签字: _______________  日期: _______________

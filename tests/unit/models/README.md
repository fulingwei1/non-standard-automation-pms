# Models æµ‹è¯•

æœ¬ç›®å½•åŒ…å«åç«¯æ•°æ®æ¨¡å‹çš„å•å…ƒæµ‹è¯•ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
models/
â”œâ”€â”€ project/          # é¡¹ç›®ç›¸å…³æ¨¡å‹æµ‹è¯•
â”‚   â”œâ”€â”€ test_project_model.py
â”‚   â”œâ”€â”€ test_project_member_model.py
â”‚   â”œâ”€â”€ test_project_milestone_model.py
â”‚   â”œâ”€â”€ test_project_document_model.py
â”‚   â”œâ”€â”€ test_project_status_model.py
â”‚   â””â”€â”€ test_project_stage_model.py
â”œâ”€â”€ sales/            # é”€å”®ç›¸å…³æ¨¡å‹æµ‹è¯•
â”‚   â”œâ”€â”€ test_customer_model.py
â”‚   â”œâ”€â”€ test_opportunity_model.py
â”‚   â”œâ”€â”€ test_contract_model.py
â”‚   â”œâ”€â”€ test_quote_model.py
â”‚   â””â”€â”€ test_lead_model.py
â”œâ”€â”€ procurement/      # é‡‡è´­ç›¸å…³æ¨¡å‹æµ‹è¯•
â”‚   â”œâ”€â”€ test_supplier_model.py
â”‚   â”œâ”€â”€ test_material_model.py
â”‚   â”œâ”€â”€ test_purchase_request_model.py
â”‚   â””â”€â”€ test_purchase_order_model.py
â”œâ”€â”€ finance/          # è´¢åŠ¡ç›¸å…³æ¨¡å‹æµ‹è¯•
â”‚   â”œâ”€â”€ test_invoice_model.py
â”‚   â”œâ”€â”€ test_payment_model.py
â”‚   â””â”€â”€ test_cost_item_model.py
â”œâ”€â”€ auth/             # ç”¨æˆ·è®¤è¯ç›¸å…³æ¨¡å‹æµ‹è¯•
â”‚   â”œâ”€â”€ test_user_model.py
â”‚   â”œâ”€â”€ test_role_model.py
â”‚   â””â”€â”€ test_permission_model.py
â””â”€â”€ conftest.py       # å…±äº« Fixtures
```

## ğŸ¯ æµ‹è¯•è¦†ç›–

æ¯ä¸ªæ¨¡å‹æµ‹è¯•æ–‡ä»¶åŒ…å«ä»¥ä¸‹æµ‹è¯•ç”¨ä¾‹ï¼š

1. **åˆ›å»ºæµ‹è¯•** - æµ‹è¯•åŸºæœ¬çš„æ¨¡å‹åˆ›å»º
2. **å”¯ä¸€æ€§çº¦æŸæµ‹è¯•** - æµ‹è¯•å”¯ä¸€å­—æ®µçº¦æŸ
3. **å…³ç³»æµ‹è¯•** - æµ‹è¯•å¤–é”®å’Œå…³è”å…³ç³»
4. **éªŒè¯æµ‹è¯•** - æµ‹è¯•å­—æ®µéªŒè¯å’Œçº¦æŸ
5. **æ›´æ–°æµ‹è¯•** - æµ‹è¯•æ¨¡å‹æ›´æ–°æ“ä½œ
6. **åˆ é™¤æµ‹è¯•** - æµ‹è¯•æ¨¡å‹åˆ é™¤æ“ä½œ
7. **æŸ¥è¯¢æµ‹è¯•** - æµ‹è¯•æŸ¥è¯¢å’Œè¿‡æ»¤
8. **è¾¹ç•Œæ¡ä»¶æµ‹è¯•** - æµ‹è¯•è¾¹ç•Œå€¼å’Œå¼‚å¸¸æƒ…å†µ
9. **é»˜è®¤å€¼æµ‹è¯•** - æµ‹è¯•å­—æ®µé»˜è®¤å€¼
10. **æ—¶é—´æˆ³æµ‹è¯•** - æµ‹è¯•åˆ›å»ºå’Œæ›´æ–°æ—¶é—´
11. **çŠ¶æ€è½¬æ¢æµ‹è¯•** - æµ‹è¯•çŠ¶æ€æœºè½¬æ¢
12. **æ‰¹é‡æ“ä½œæµ‹è¯•** - æµ‹è¯•æ‰¹é‡åˆ›å»ºå’ŒæŸ¥è¯¢

## ğŸš€ è¿è¡Œæµ‹è¯•

### è¿è¡Œæ‰€æœ‰ Models æµ‹è¯•
```bash
pytest tests/unit/models/ -v
```

### è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
```bash
# é¡¹ç›®æ¨¡å—
pytest tests/unit/models/project/ -v

# é”€å”®æ¨¡å—
pytest tests/unit/models/sales/ -v

# é‡‡è´­æ¨¡å—
pytest tests/unit/models/procurement/ -v

# è´¢åŠ¡æ¨¡å—
pytest tests/unit/models/finance/ -v

# è®¤è¯æ¨¡å—
pytest tests/unit/models/auth/ -v
```

### è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶
```bash
pytest tests/unit/models/project/test_project_model.py -v
```

### ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```bash
pytest tests/unit/models/ \
    --cov=app/models \
    --cov-report=html \
    --cov-report=term
```

## ğŸ“Š æµ‹è¯•ç»Ÿè®¡

- **æ€»æµ‹è¯•æ–‡ä»¶**: 21
- **é¢„ä¼°æµ‹è¯•ç”¨ä¾‹æ•°**: ~250+
- **è¦†ç›–çš„æ¨¡å‹**: 21+

### æ¨¡å—åˆ†å¸ƒ
- é¡¹ç›®æ¨¡å—: 6 ä¸ªæµ‹è¯•æ–‡ä»¶
- é”€å”®æ¨¡å—: 5 ä¸ªæµ‹è¯•æ–‡ä»¶
- é‡‡è´­æ¨¡å—: 4 ä¸ªæµ‹è¯•æ–‡ä»¶
- è´¢åŠ¡æ¨¡å—: 3 ä¸ªæµ‹è¯•æ–‡ä»¶
- è®¤è¯æ¨¡å—: 3 ä¸ªæµ‹è¯•æ–‡ä»¶

## ğŸ”§ æŠ€æœ¯æ ˆ

- **æµ‹è¯•æ¡†æ¶**: pytest
- **æ•°æ®åº“**: SQLite (å†…å­˜æ•°æ®åº“)
- **ORM**: SQLAlchemy
- **Fixtures**: ä½¿ç”¨ conftest.py å…±äº«æµ‹è¯•æ•°æ®

## ğŸ“ æµ‹è¯•æ¨¡å¼

æ¯ä¸ªæµ‹è¯•éƒ½éµå¾ª AAA æ¨¡å¼ï¼š
- **Arrange** (å‡†å¤‡): è®¾ç½®æµ‹è¯•æ•°æ®å’Œå‰ç½®æ¡ä»¶
- **Act** (æ‰§è¡Œ): æ‰§è¡Œè¢«æµ‹è¯•çš„æ“ä½œ
- **Assert** (æ–­è¨€): éªŒè¯ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸ

## ğŸ› å·²çŸ¥é™åˆ¶

éƒ¨åˆ†æµ‹è¯•å¯èƒ½ç”±äºä»¥ä¸‹åŸå› è·³è¿‡ï¼š
- æ¨¡å‹ä¾èµ–å…¶ä»–æœªåˆå§‹åŒ–çš„æ¨¡å‹
- éœ€è¦ç‰¹å®šçš„æ•°æ®åº“é…ç½®
- æŸäº›æ¨¡å‹å­—æ®µæ˜¯å¯é€‰çš„ï¼Œæµ‹è¯•ä¼šç›¸åº”è°ƒæ•´

## ğŸ“ è´¡çŒ®æŒ‡å—

æ·»åŠ æ–°çš„æ¨¡å‹æµ‹è¯•æ—¶ï¼Œè¯·ç¡®ä¿ï¼š
1. ä½¿ç”¨ç»Ÿä¸€çš„å‘½åè§„èŒƒ `test_<model>_model.py`
2. æ¯ä¸ªæµ‹è¯•æ–‡ä»¶åŒ…å« 8-12 ä¸ªæµ‹è¯•ç”¨ä¾‹
3. æµ‹è¯•è¦†ç›– CRUD æ“ä½œå’Œå…³ç³»éªŒè¯
4. ä½¿ç”¨å…±äº«çš„ fixtures å‡å°‘é‡å¤ä»£ç 
5. æ·»åŠ å¿…è¦çš„æ–‡æ¡£å­—ç¬¦ä¸²

## ğŸ“… åˆ›å»ºæ—¶é—´

2026-02-21

## ğŸ“§ ç»´æŠ¤è€…

OpenClaw AI Agent
